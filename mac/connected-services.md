---
title: Подключенные службы в Visual Studio для Mac
description: Добавление хранилища данных Azure, проверка подлинности и push-уведомления в мобильных приложениях в среде Visual Studio для Mac
ms.prod: xamarin
ms.assetid: 41CB62FF-0F39-4CE8-8917-6A77F058719F
author: asb3993
ms.author: amburns
ms.date: 04/04/2018
ms.openlocfilehash: 0e3cc587b2c29cab19a4a6cdeed0a4b138330726
ms.sourcegitcommit: 4c0bc21d2ce2d8e6c9d3b149a7d95f0b4d5b3f85
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/20/2018
---
# <a name="connected-services-walkthrough"></a>Пошаговое руководство по подключенным службам

Механизм подключенных служб привносит рабочий процесс портала Azure в Visual Studio для Mac, поэтому вам не нужно переключаться с проекта для добавления служб.

В этом пошаговом руководстве демонстрируется добавление внутренней службы Azure, которая добавляет возможности облачного хранилища данных, проверки подлинности и push-уведомлений в кроссплатформенные приложения переносимых библиотек классов (PCL) Xamarin.Forms.


1.  Сначала дважды щелкните узел **Подключенные службы** в решении, чтобы открыть **Коллекцию служб**.
  Этот список содержит все доступные службы для данного типа приложения. Выберите службу (например, **Мобильный внутренний сервер со службой приложений Azure**), щелкнув по ней.

    [![Узел подключенных служб в Visual Studio для Mac](media/connected-services-image001-sml.png "Узел подключенных служб в Visual Studio для Mac")](media/connected-services-image001.png#lightbox)

2. Страница сведений о службе содержит описание службы и зависимости, которые будут установлены.
  Нажмите кнопку **Добавить**, чтобы добавить зависимости в приложение:

    [![Мобильный внутренний сервер с Azure](media/connected-services-image002-sml.png "Мобильный внутренний сервер с Azure")](media/connected-services-image002.png#lightbox)

3. Зависимости необходимо добавлять как к переносимой библиотеке классов (PCL), так и к проектам под конкретные платформы.
  Установите флажки, чтобы добавить эту службу в каждый проект, который будет ссылаться на нее (явно или неявно):

    [![Отметьте все проекты, которые должны ссылаться на службу](media/connected-services-image003-sml.png "Отметьте все проекты, которые должны ссылаться на службу")](media/connected-services-image003.png#lightbox)

4. Выберите **Принять** в диалоговых окнах **Принятия условий лицензионного соглашения** для пакетов NuGet.
  Возможно появление двух диалоговых окон принятия лицензионного соглашения: одно для MobileClient и зависимостей, второе для SQLiteStore, необходимого для синхронизации данных в автономном режиме:

    [![Принятие условий лицензионного соглашения](media/connected-services-image004-sml.png "Принятие условий лицензионного соглашения")](media/connected-services-image004.png#lightbox)

    ![Окно принятия условий лицензионного соглашения](media/connected-services-image005.png "Окно принятия условий лицензионного соглашения")

5. После добавления зависимостей вам будет предложено войти с использованием учетной записи, которую вы хотите применить для взаимодействия с Azure.
  Если вы уже выполнили вход с помощью идентификатора Майкрософт, Visual Studio для Mac будет пытаться получить ваши подписки Azure и все связанные с ними службы приложений. Если у вас нет ни одной подписки, можно добавить подписку, зарегистрировавшись для получения бесплатной пробной версии или купив план подписки на портале Azure.

6. Выберите службу приложений из списка. В результате значение кода шаблона объекта `MobileServiceClient` заполнится соответствующим URL-адресом службы приложений в Azure:

    [![Выберите службу приложений из списка](media/connected-services-image006-sml.png "Выберите службу приложений из списка")](media/connected-services-image006.png#lightbox)

    Если список не содержит ни одной службы, нажмите кнопку **Создать** (см. шаг 9).

7. Скопируйте код шаблона для `MobileServiceClient` в PCL. Расположение файла не имеет значения при условии, что имеется только один экземпляр.
  Рекомендуемый подход заключается в создании класса `AzureService`, который обрабатывает все взаимодействия с Azure и использует `MobileServiceClient`:

    ![Скопируйте код конфигурации в приложение](media/connected-services-image007.png "Скопируйте код конфигурации в приложение")

8. Следуйте инструкциям документации в разделе **Следующие шаги**, чтобы добавить в ваше приложение данные, автономную синхронизацию, проверку подлинности и push-уведомления:

    [![Ознакомьтесь с инструкциями в разделе "Следующие шаги"](media/connected-services-image008-sml.png "Ознакомьтесь с инструкциями в разделе "Следующие шаги"")](media/connected-services-image008.png#lightbox)

9. Если у вас нет ни одной существующей службы приложений, можно создать новые службы в Visual Studio для Mac.
  Нажмите кнопку **Создать** в левом нижнем углу списка служб, чтобы открыть диалоговое окно**Новая служба приложений**:

    [![Создание новой службы приложений в Visual Studio для Mac](media/connected-services-image009-sml.png "Создание новой службы приложений в Visual Studio для Mac")](media/connected-services-image009.png#lightbox)

Для новой службы требуется указать следующие параметры:

-   **Имя службы приложений** — уникальное имя или идентификатор плана
-   **Подписка** — подписка, которую бы вы хотели использовать для оплаты службы
-   **Группа ресурсов** — способ организации всех ваших ресурсов Azure для проекта. Можно использовать существующую или создать новую. Если это первая служба Azure, создайте новую.
-   **План обслуживания** — определяет расположение и стоимость всех ресурсов, которые ее используют. Можно использовать существующий или создать новый. Если это первая служба Azure, используйте план по умолчанию или создайте новый на бесплатном уровне (F1).

Для получения дополнительных сведений посетите страницу [документации по службе приложений Azure](https://azure.microsoft.com/documentation/learning-paths/appservice-mobileapps/).
