---
title: "Отладка с помощью Xamarin"
description: "Отладка — это типичная и неотъемлемая часть программирования. Являясь сформировавшейся интегрированной средой разработки, Visual Studio для Mac предоставляет обширный набор функций для облегчения отладки. Эта статья описывает использование всего арсенала средств отладки в Visual Studio для Mac — от безопасной отладки до визуализации данных."
author: asb3993
ms.author: amburns
ms.date: 04/14/2017
ms.topic: article
ms.technology: vs-ide-debug
ms.assetid: BB7A084D-9AC2-48B5-8076-6C8518796BBA
ms.translationtype: HT
ms.sourcegitcommit: e2b7ff9126e1cc38ac2e58d6be339b656a024e7f
ms.openlocfilehash: d416c0967daa3354e09660e3b618e0cc6f3b49f7
ms.contentlocale: ru-ru
ms.lasthandoff: 08/11/2017

---


# <a name="debugging-with-xamarin"></a>Отладка с помощью Xamarin


Visual Studio для Mac имеет отладчик машинного кода, обеспечивая поддержку отладки для приложений Xamarin.iOS, Xamarin.Android и Xamarin.Mac.
Visual Studio для Mac использует отладчик [*Mono Soft Debugger*](http://www.mono-project.com/docs/advanced/runtime/docs/soft-debugger/), который реализован в среде выполнения Mono, что позволяет Visual Studio для Mac выполнять отладку управляемого кода на всех платформах.

## <a name="the-debugger"></a>Отладчик

Visual Studio для Mac использует Mono Soft Debugger для отладки управляемого кода (C# и F #) во всех приложениях Xamarin. Mono Soft Debugger отличается от обычных отладчиков тем, что является взаимодействующим и встроен в среду выполнения Mono. Созданный код и среда выполнения Mono взаимодействуют с интегрированной средой разработки (IDE) для обеспечения отладки. Среда выполнения Mono предоставляет функции отладки через протокол связи, подробнее о котором можно прочитать [в документации по Mono](http://www.mono-project.com/docs/advanced/runtime/docs/soft-debugger-wire-format/).


Жестко заданные отладчики, такие как [LLDB]( http://lldb.llvm.org/index.html) или [GDB]( https://www.gnu.org/software/gdb/), управляют программой без информации об отлаживаемой программе или взаимодействия с ней, но по-прежнему могут пригодиться при отладке приложений Xamarin, когда требуется отладка машинного кода iOS или Android.

## <a name="using-the-debugger"></a>Использование отладчика

Чтобы начать отладку любого приложения, обязательно проверьте, установлена ли конфигурация **Отладка**. Конфигурации отладки предоставляет полезный набор средств для поддержки отладки, например для задания точек останова, использования визуализаторов данных и просмотра стека вызовов:

![Конфигурация отладки](media/debugging-image_0.png)

## <a name="setting-a-breakpoint"></a>Задание точки останова

Чтобы задать точку останова в IDE, щелкните область поля редактора рядом с номером строки кода, где требуется прервать выполнение:

![Задание точки останова в поле](media/debugging-image0.png)


Вы можете просмотреть все точки останова, заданные в коде, перейдя на **панель точек останова**:

![Список точек останова](media/debugging-image0a.png)


## <a name="start-debugging"></a>Начать отладку

Чтобы начать отладку, выберите целевое устройство или подходящий эмулятор в IDE:

![Выберите целевое устройство](media/debugging-image1.png)

После этого разверните приложение, нажав кнопку **Воспроизвести** или клавиши **CMD+ВВОД**. При попадании в точку останова код выделяется желтым цветом:

![Выделение показывает, что достигнута точка останова](media/debugging-image2.png)

На этом этапе можно применить средства отладки, например используемые для проверки значений объектов, для получения дополнительных сведений о том, что происходит в коде:

![Визуализации отладки](media/debugging-image3.png)

## <a name="conditional-breakpoints"></a>Условные точки останова

Вы также можете задать правила, определяющие условия, при которых должна активироваться точка останова, это называется добавлением *условной точки останова*. Чтобы задать условную точку останова, перейдите в окно **Свойства точки останова**, что можно сделать двумя способами:


* Чтобы добавить условную точку останова, щелкните правой кнопкой мыши поле редактора слева от номера строки кода, где требуется задать точку останова, а затем выберите пункт "Создать точку останова":


 ![Контекстное меню точки останова](media/debugging-image4.png)

* Чтобы добавить условие в существующую точку останова, щелкните ее правой кнопкой мыши и выберите пункт **Свойства точки останова** либо нажмите кнопку "Изменить точку останова" на **панели точек останова**, как показано ниже:


 ![Изменение существующей точки останова на панели точек останова](media/debugging-image5.png)


Затем можно ввести условие, при котором активируется эта точка останова:

 ![Изменение условий для точки останова](media/debugging-image6.png)

## <a name="stepping-through-code"></a>Пошаговая отладка

При достижении точки останова средства отладки позволяют получить контроль над выполнением программы. Visual Studio для Mac отображает четыре кнопки, что позволяет запустить и пошагово выполнить код. В Visual Studio для Mac они будут выглядеть следующим образом:

 ![Кнопки для пошагового выполнения кода](media/debugging-image7.png)

Ниже указаны эти четыре кнопки:

*   **Воспроизвести** — запускает выполнение кода до следующей точки останова.
*   **Шаг с обходом** — выполняет следующую строку кода. Если она содержит вызов функции, эта функция выполняется, а выполнение останавливается на *следующей* за ней строке.
*   **Шаг с заходом** — также выполняет следующую строку кода. Если она является вызовом функции, эта команда останавливается на первой строке функции, позволяя продолжить ее отладку по строкам. Если следующая строка не является функцией, команда работает аналогично шагу с обходом.
*   **Шаг с выходом** — возвращается к строке, где была вызвана текущая функция.


## <a name="debugging-monos-class-libraries"></a>Отладка библиотек классов Mono
Продукты Xamarin поставляются с исходным кодом для библиотек классов Mono, что позволяет легко узнать о внутренних взаимодействиях в коде прямо из отладчика.

Так как эта функция использует больше памяти во время отладки, по умолчанию она отключена.

Чтобы включить ее, перейдите в раздел **Visual Studio для Mac > Параметры > Отладчик** и убедитесь, что выбор параметра "**Отладка только кода проекта (без захода в код платформы)**" **отменен**, как показано ниже:

 ![Параметр "Отладка только кода проекта (без захода в код платформы)"](media/debugging-image8.png)

