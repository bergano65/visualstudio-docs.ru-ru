---
title: ClickOnce и технология Authenticode | Документация Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.technology: vs-ide-deployment
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- .pfx files
- ClickOnce deployment, Authenticode
- Authenticode, ClickOnce
- ClickOnce deployment, certificates
- ClickOnce deployment, security
ms.assetid: ab5b6712-f32a-4e33-842f-e88ab4818ccf
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: 2943766bb7b0df6d2e0974f8a8c1b52747f31526
ms.sourcegitcommit: 206e738fc45ff8ec4ddac2dd484e5be37192cfbd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2018
ms.locfileid: "39512214"
---
# <a name="clickonce-and-authenticode"></a>ClickOnce и технология Authenticode
*Authenticode* — это технология Майкрософт, которая использует шифрование по отраслевому стандарту для подписания кода приложения цифровыми сертификатами, которые удостоверяют подлинность издателя приложения. Используя Authenticode для развертывания приложения, [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] снижает риск заражения программой-трояном. Программа-троян — это вирус или другая вредоносная программа, которые злоумышленник представляет как легальную программу, исходящую из авторитетного и заслуживающего доверия источника. Подписание развертываний [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] с помощью цифрового сертификата — это необязательный шаг, позволяющий убедиться, что сборки и файлы не были изменены.  
  
 В следующих разделах описываются различные типы цифровых сертификатов, используемых в Authenticode, способ проверки сертификатов с помощью центров сертификации (ЦС), роль меток времени в сертификатах и методы хранения сертификатов.  
  
## <a name="authenticode-and-code-signing"></a>Authenticode и подписывание кода  
 *Цифровой сертификат* — это файл, содержащий пару из открытого и закрытого криптографических ключей вместе с метаданными, описывающими издателя, которому был выдан сертификат, и агентство, выдавшее сертификат.  
  
 Существуют различные типы сертификатов Authenticode. Каждый из них настроен для разных типов подписывания. Для приложений [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] требуется сертификат Authenticode, пригодный для подписания кода. Если попытаться войти приложение [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] с помощью другого типа сертификата, например цифрового сертификата электронной почты, он не будет работать. Дополнительные сведения см. в разделе [Знакомство с подписыванием кода](http://go.microsoft.com/fwlink/?LinkId=179452).  
  
 Сертификат для подписывания кода можно получить одним из трех способов:  
  
-   приобрести у поставщика сертификатов;  
  
-   получить от группы, которая отвечает за создание цифровых сертификатов в вашей организации.  
  
-   Создать собственный сертификат с помощью командлета PowerShell New-SelfSignedCertificate, или с помощью *MakeCert.exe*, входящий в состав [!INCLUDE[winsdklong](../deployment/includes/winsdklong_md.md)].  
  
### <a name="how-using-certificate-authorities-helps-users"></a>Как с помощью центров сертификации помогает пользователям  
 Сертификат, созданный с помощью New-SelfSignedCertificate или *MakeCert.exe* служебная программа, обычно называется *автосертификатом* или *тестовым сертификатом*. Сертификат этого типа работает во многом так же, как *.snk* файл будет работать в .NET Framework. Он состоит только из пары открытого и закрытого криптографических ключей и не содержит проверяемых сведений об издателе. Автосертификаты можно использовать для развертывания приложений [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] с высоким уровнем доверия в интрасети. Однако когда эти приложения выполняются на клиентском компьютере, [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] идентифицирует их как поступающие от неизвестного издателя. По умолчанию приложения [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] , подписанные с помощью автосертификатов и развертываемые через Интернет, не могут использовать развертывание доверенных приложений.  
  
 И наоборот, если вы получаете сертификат из такого центра сертификации, как поставщик сертификатов или отдел внутри вашей организации, этот сертификат обеспечивает повышенную безопасность для пользователей. Он не только идентифицирует издателя подписанного программного обеспечения, но и проверяет его удостоверение путем сверки с ЦС, подписавшим его. Если ЦС не является корневым, Authenticode также выстраивает обратную "цепочку" до корневого центра, чтобы убедиться, что ЦС авторизован для выдачи сертификатов. Для повышения безопасности следует по возможности использовать сертификат, выданный центром сертификации.  
  
 Дополнительные сведения о создании автосертификатов см. в разделе [New-SelfSignedCertificate](https://technet.microsoft.com/itpro/powershell/windows/pkiclient/new-selfsignedcertificate) или [MakeCert](/windows/desktop/SecCrypto/makecert).  
  
### <a name="timestamps"></a>Метки времени  
 Сертификаты, используемые для подписи приложений [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] , имеют определенный срок действия, который обычно составляет двенадцать месяцев. Чтобы устранить необходимость в постоянном повторном подписывании приложений с использованием новых сертификатов, [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] поддерживает метку времени. Когда приложение подписано с меткой времени, его сертификат будет приниматься даже после истечения срока действия, при условии, что действительна метка времени. Это позволяет скачивать и запускать приложения [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] с просроченными сертификатами, но действительными метками времени. Кроме того, это позволяет установленным приложениям с просроченными сертификатами продолжать скачивать и устанавливать обновления.  
  
 Чтобы включить метку времени на сервер приложений, должен быть доступен сервер меток времени. Сведения о выборе сервера меток времени см. в разделе [How to: Sign Application and Deployment Manifests](../ide/how-to-sign-application-and-deployment-manifests.md).  
  
### <a name="update-expired-certificates"></a>Обновлять сертификаты с истекшим сроком действия  
 В более ранних версиях платформы .NET Framework обновление приложения, у которого истек срок действия сертификата, могло привести к прекращению работы этого приложения. Чтобы устранить эту проблему, воспользуйтесь одним из следующих способов:  
  
-   Обновите платформу .NET Framework до версии 2.0 с пакетом обновления 1 или более поздней в Windows XP или до версии 3.5 или более поздней в Windows Vista.  
  
-   Удалите приложение и переустановите новую версию с действительным сертификатом.  
  
-   Создайте сборку командной строки, которая обновляет сертификат. Пошаговые инструкции для этого процесса можно найти в [справочной статье 925521 Майкрософт](http://go.microsoft.com/fwlink/?LinkId=179454).  
  
### <a name="store-certificates"></a>Сертификаты Store  
  
-   Вы можете хранить сертификаты по мере *.pfx* файла в файловой системе, или хранить их внутри контейнера ключей. Пользователь в домене Windows может иметь несколько контейнеров ключей. По умолчанию *MakeCert.exe* сохраняет сертификаты в личном контейнере ключей, если не указано, что сертификат должен храниться в *.pfx* вместо этого. *Mage.exe* и *MageUI.exe*, [!INCLUDE[winsdkshort](../debugger/debug-interface-access/includes/winsdkshort_md.md)] средства для создания [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] развертываний, позволяют использовать сертификаты, хранящиеся в любом режиме.  
  
## <a name="see-also"></a>См. также  
 [Развертывание и безопасность технологии ClickOnce](../deployment/clickonce-security-and-deployment.md)   
 [Защита приложений ClickOnce](../deployment/securing-clickonce-applications.md)   
 [Общие сведения о развертывании доверенных приложений](../deployment/trusted-application-deployment-overview.md)   
 [Mage.exe (средство создания и редактирования манифеста)](/dotnet/framework/tools/mage-exe-manifest-generation-and-editing-tool)