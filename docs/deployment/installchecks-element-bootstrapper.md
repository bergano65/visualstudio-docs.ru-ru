---
title: '&lt;&gt;Элемент инсталлчеккс (начальный загрузчик) | Документация Майкрософт'
description: Элемент Инсталлчеккс поддерживает запуск различных тестов на локальном компьютере, чтобы убедиться, что все необходимые компоненты для приложения установлены.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
dev_langs:
- FSharp
- VB
- CSharp
- C++
helpviewer_keywords:
- <InstallChecks> element [bootstrapper]
ms.assetid: ad329c87-b0ad-4304-84de-ae9496514c42
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 550baf52347c1128ef50509e7787861355c9428f
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99903406"
---
# <a name="ltinstallchecksgt-element-bootstrapper"></a>&lt;&gt;Элемент инсталлчеккс (начальный загрузчик)
`InstallChecks`Элемент поддерживает запуск различных тестов на локальном компьютере, чтобы убедиться, что все необходимые компоненты для приложения установлены.

## <a name="syntax"></a>Синтаксис

```xml
<InstallChecks>
    <AssemblyCheck
        Property
        Name
        PublicKeyToken
        Version
        Language
        ProcessorArchitecture
    />
    <RegistryCheck
        Property
        Key
        Value
    />
    <ExternalCheck
        PackageFile
        Property
        Arguments
    />
    <FileCheck
        Property
        FileName
        SearchPath
        SpecialFolder
        SearchDepth
    />
    <MsiProductCheck
        Property
        Product
        Feature
    />
    <RegistryFileCheck
        Property
        Key
        Value
        FileName
        SearchDepth
    />
</InstallChecks>
```

## <a name="assemblycheck"></a>ассембличекк
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `AssemblyCheck` загрузчик должен убедиться, что сборка, определенная элементом, существует в глобальном кэше сборок (GAC). Он не содержит элементов и имеет следующие атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`Property`|Обязательный элемент. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|
|`Name`|Обязательный элемент. Полное имя проверяемой сборки.|
|`PublicKeyToken`|Обязательный элемент. Сокращенная форма открытого ключа, связанная с этой строго именованной сборкой. Все сборки, хранимые в глобальном кэше сборок, должны иметь имя, версию и открытый ключ.|
|`Version`|Обязательный элемент. Версия сборки.<br /><br /> Номер версии имеет формат \<*major version*> . \<*minor version*> . \<*build version*> . \<*revision version*>|
|`Language`|Необязательный элемент. Язык локализованной сборки. Значение по умолчанию — `neutral`.|
|`ProcessorArchitecture`|Необязательный элемент. Процессор компьютера, предназначенный для данной установки. Значение по умолчанию — `msil`.|

## <a name="externalcheck"></a>екстерналчекк
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `ExternalCheck` загрузчик запустит именованную внешнюю программу в отдельном процессе и сохранит свой код выхода в свойстве, указанном параметром `Property` . `ExternalCheck` полезен для реализации сложных проверок зависимостей, или если единственным способом проверки существования компонента является создание его экземпляра.

 `ExternalCheck` не содержит элементов и имеет следующие атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`Property`|Обязательный элемент. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|
|`PackageFile`|Обязательный элемент. Внешняя программа для выполнения. Программа должна входить в состав пакета распространения установки.|
|`Arguments`|Необязательный элемент. Предоставляет аргументы командной строки исполняемому файлу с именем `PackageFile` .|

## <a name="filecheck"></a>FileCheck
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `FileCheck` загрузчик определит, существует ли именованный файл, и возвратит номер версии файла. Если у файла нет номера версии, начальный загрузчик задает для свойства с именем `Property` значение 0. Если файл не существует, параметр не `Property` имеет значение.

 `FileCheck` не содержит элементов и имеет следующие атрибуты.

| Атрибут | Описание |
|-----------------| - |
| `Property` | Обязательный элемент. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md). |
| `FileName` | Обязательный элемент. Имя искомого файла. |
| `SearchPath` | Обязательный элемент. Диск или папка, в которых следует искать файл. Этот путь должен быть относительным путем `SpecialFolder` , если назначен. в противном случае он должен быть абсолютным путем. |
| `SpecialFolder` | Необязательный элемент. Папка, которая имеет особую важность либо для Windows, либо для [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] . Значение по умолчанию интерпретируется `SearchPath` как абсолютный путь. Допустимые значения.<br /><br /> `AppDataFolder`. Папка Application Data для этого [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения; относится к текущему пользователю.<br /><br /> `CommonAppDataFolder`. Папка данных приложения, используемая всеми пользователями.<br /><br /> `CommonFilesFolder`. Папка общих файлов для текущего пользователя.<br /><br /> `LocalDataAppFolder`. Папка данных для приложений без роуминга.<br /><br /> `ProgramFilesFolder`. Стандартная папка Program Files для 32-разрядных приложений.<br /><br /> `StartUpFolder`. Папка, содержащая все приложения, запускаемые при запуске системы.<br /><br /> `SystemFolder`. Папка, содержащая 32-разрядные системные библиотеки DLL.<br /><br /> `WindowsFolder`. Папка, содержащая установку системы Windows.<br /><br /> `WindowsVolume`. Диск или раздел, содержащий установку системы Windows. |
| `SearchDepth` | Необязательный элемент. Глубина поиска в вложенных папках для именованного файла. Поиск сначала имеет глубину. Значение по умолчанию равно 0, что ограничит поиск до папки верхнего уровня, заданной параметром `SpecialFolder` и **SearchPath**. |

## <a name="msiproductcheck"></a>мсипродуктчекк
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `MsiProductCheck` загрузчик проверяет, выполнялась ли указанная установка Microsoft установщик Windows до ее завершения. Значение свойства задается в зависимости от состояния установленного продукта. Положительное значение указывает на то, что продукт установлен, 0 или-1 означает, что он не установлен. (Дополнительные сведения см. в описании функции установщик Windows SDK Мсикуерифеатурестате.) . Если установщик Windows не установлен на компьютере, не устанавливается `Property` .

 `MsiProductCheck` не содержит элементов и имеет следующие атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`Property`|Обязательный элемент. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|
|`Product`|Обязательный элемент. Идентификатор GUID установленного продукта.|
|`Feature`|Необязательный элемент. Идентификатор GUID для определенной функции установленного приложения.|

## <a name="registrycheck"></a>регистричекк
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `RegistryCheck` загрузчик проверяет, существует ли указанный раздел реестра или имеет ли он указанное значение.

 `RegistryCheck` не содержит элементов и имеет следующие атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`Property`|Обязательный элемент. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|
|`Key`|Обязательный элемент. Имя раздела реестра.|
|`Value`|Необязательный элемент. Имя извлекаемого значения реестра. По умолчанию возвращается текст значения по умолчанию. `Value` значение должно быть строкой или DWORD.|

## <a name="registryfilecheck"></a>регистрифилечекк
 Этот элемент является необязательным дочерним элементом `InstallChecks` . Для каждого экземпляра `RegistryFileCheck` загрузчик извлекает версию указанного файла, сначала пытаясь получить путь к файлу из указанного раздела реестра. Это особенно полезно, если требуется найти файл в каталоге, заданном как значение в реестре.

 `RegistryFileCheck` не содержит элементов и имеет следующие атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`Property`|Обязательный элемент. Имя свойства для хранения результата. На это свойство можно ссылаться из теста под `InstallConditions` элементом, который является дочерним по отношению к `Command` элементу. Дополнительные сведения см. в разделе [\<Commands>Element](../deployment/commands-element-bootstrapper.md).|
|`Key`|Обязательный элемент. Имя раздела реестра. Его значение интерпретируется как путь к файлу, если только `File` не задан атрибут. Если этот раздел не существует, `Property` он не задан.|
|`Value`|Необязательный элемент. Имя извлекаемого значения реестра. По умолчанию возвращается текст значения по умолчанию. `Value` значение должно быть строкой.|
|`FileName`|Необязательный элемент. Имя файла. Если указано, то значение, полученное из раздела реестра, считается путем к каталогу, к которому добавляется это имя. Если значение не указано, то в реестре предполагается, что возвращается полный путь к файлу.|
|`SearchDepth`|Необязательный элемент. Глубина поиска в вложенных папках для именованного файла. Поиск сначала имеет глубину. Значение по умолчанию — 0, в результате чего поиск будет ограничен папкой верхнего уровня, заданной значением раздела реестра.|

## <a name="remarks"></a>Remarks
 Хотя элементы под `InstallChecks` определяют тесты для выполнения, они не выполняют их. Чтобы выполнить тесты, необходимо создать `Command` элементы под `Commands` элементом.

## <a name="example"></a>Пример
 В следующем примере кода демонстрируется `InstallChecks` элемент, который используется в файле продукта для платформа .NET Framework.

```xml
<InstallChecks>
    <ExternalCheck Property="DotNetInstalled" PackageFile="dotnetchk.exe" />
    <RegistryCheck Property="IEVersion" Key="HKLM\Software\Microsoft\Internet Explorer" Value="Version" />
</InstallChecks>
```

## <a name="installconditions"></a>инсталлкондитионс
 При `InstallChecks` вычислении они создают свойства. Затем эти свойства используются `InstallConditions` для определения того, должен ли пакет устанавливаться, обходиться или завершаться ошибкой. В следующей таблице перечислены `InstallConditions` :

|Условие|Описание|
|-|-|
|`FailIf`|Если любое из `FailIf` условий имеет значение true, произойдет сбой пакета. Остальные условия не будут оцениваться.|
|`BypassIf`|Если любое из `BypassIf` условий имеет значение true, пакет будет обходиться. Остальные условия не будут оцениваться.|

## <a name="predefined-properties"></a>Предопределенные свойства
 В следующей таблице перечислены `BypassIf` элементы и `FailIf` .

|Свойство|Примечания|Возможные значения|
|--------------|-----------|---------------------|
|`Version9X`|Номер версии операционной системы Windows 9X.|4,10 = Windows 98|
|`VersionNT`|Номер версии операционной системы на основе Windows NT.|Основная. Дополнительная. ServicePack<br /><br /> 5,0 = Windows 2000<br /><br /> 5.1.0 = Windows XP<br /><br /> 5.1.2 = Windows XP Professional SP2<br /><br /> 5.2.0 = Windows Server 2003|
|`VersionNT64`|Номер версии 64-разрядной операционной системы на основе Windows NT.|То же, что упоминалось ранее.|
|`VersionMsi`|Номер версии службы установщик Windows.|2,0 = установщик Windows 2,0|
|`AdminUser`|Указывает, имеет ли пользователь права администратора в операционной системе на основе Windows NT.|0 = нет прав администратора<br /><br /> 1 = права администратора|

 Например, чтобы заблокировать установку на компьютере под Windows 95, используйте следующий код:

```xml
    <!-- Block install on Windows 95 -->
    <FailIf Property="Version9X" Compare="VersionLessThan" Value="4.10" String="InvalidPlatform"/>
```

 Чтобы пропустить выполнение проверок установки при выполнении условия Фаилиф или Бипассиф, используйте атрибут Бефореинсталлчеккс.  Пример:

```xml
    <!-- Block install and do not evaluate install checks if user does not have admin privileges -->
    <FailIf Property="AdminUser" Compare="ValueEqualTo" Value="false" String="AdminRequired" BeforeInstallChecks="true"/>
```

>[!NOTE]
>Этот `BeforeInstallChecks` атрибут поддерживается начиная с версии Visual Studio 2019 с обновлением 9.

## <a name="see-also"></a>См. также раздел
- [Элемент \<Commands>](../deployment/commands-element-bootstrapper.md)
- [Справочник по схеме продуктов и пакетов](../deployment/product-and-package-schema-reference.md)