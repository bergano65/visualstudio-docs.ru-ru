---
title: Параметры ClickOnce и приложения | Документация Майкрософт
description: Узнайте, как работают файлы параметров приложения в приложении ClickOnce и как ClickOnce переносит параметры при обновлении пользователем до следующей версии.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- ClickOnce deployment, application settings
ms.assetid: 891caba6-faef-4a3c-8f71-60e6fadb60eb
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 96491dc192b6578abd725d5d69b7c9093e92b20c
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99896394"
---
# <a name="clickonce-and-application-settings"></a>ClickOnce и параметры приложения
Параметры приложения для Windows Forms упрощают создание, хранение и обслуживание пользовательских приложений и настроек пользователей на клиенте. В следующем документе описано, как работают файлы параметров приложения в приложении ClickOnce и как ClickOnce переносит параметры при обновлении пользователем до следующей версии.

 Приведенные ниже сведения относятся только к поставщику параметров приложения по умолчанию — <xref:System.Configuration.LocalFileSettingsProvider> классу. При указании настраиваемого поставщика этот поставщик определит, как он хранит свои данные и как он обновляет свои параметры между версиями. Дополнительные сведения о поставщиках параметров приложений см. в разделе [архитектура параметров приложения](/dotnet/framework/winforms/advanced/application-settings-architecture).

## <a name="application-settings-files"></a>Файлы параметров приложения
 Параметры приложения используют два файла: *\<app>.exe.config* и *user.config*, где *приложение* — это имя приложения Windows Forms. *user.config* создается на клиенте в первый раз, когда приложение сохраняет параметры области пользователя. *\<app>.exe.config*, напротив, будут существовать до развертывания, если вы определите значения по умолчанию для параметров. Visual Studio автоматически включит этот файл при использовании его команды **Publish** . При создании приложения ClickOnce с помощью *Mage.exe* или *MageUI.exe* необходимо убедиться, что этот файл включен в другие файлы приложения при заполнении манифеста приложения.

 В Windows Formsном приложении, не развернутом с помощью ClickOnce, файл *\<app>.exe.config* приложения хранится в каталоге приложения, а файл *user.config* хранится в папке **Documents and Settings** пользователя. В приложении ClickOnce *\<app>.exe.config* находится в каталоге приложения внутри кэша приложений ClickOnce и *user.config* находится в каталоге данных ClickOnce для этого приложения.

 Независимо от способа развертывания приложения параметры приложения обеспечивают защищенный доступ на чтение к *\<app>.exe.config*, а также безопасность доступа на чтение и запись для *user.config*.

 В приложении ClickOnce размер файлов конфигурации, используемых параметрами приложения, ограничен размером кэша ClickOnce. Дополнительные сведения см. в статье [Общие сведения о кэше ClickOnce](../deployment/clickonce-cache-overview.md).

## <a name="version-upgrades"></a>Обновления версий
 Так же как каждая версия приложения ClickOnce изолирована от всех других версий, параметры приложения для приложения ClickOnce также изолированы от параметров других версий. Когда пользователь обновляет приложение до более поздней версии, параметры приложения сравниваются с самыми последними (наиболее пронумерованными) параметрами с параметрами, передаваемыми с обновленной версией, и объединяет параметры в новый набор файлов параметров.

 В следующей таблице описано, как параметры приложения решает, какие параметры следует копировать.

|Тип изменения|Действие обновления|
|--------------------|--------------------|
|Параметр добавлен в *\<app>.exe.config*|Новый параметр объединяется с *\<app>.exe.config* текущей версии.|
|Параметр удален из *\<app>.exe.config*|Старый параметр удаляется из *\<app>.exe.config* текущей версии.|
|Изменение параметра по умолчанию; локальный параметр по-прежнему по умолчанию имеет значение Original в *user.config*|Параметр объединяется с *user.config* текущей версии с новым значением по умолчанию.|
|Изменение параметра по умолчанию; для параметра задано значение, отличное от значения по умолчанию, в *user.config*|Параметр объединяется с *user.config* текущей версии с сохраняемым значением, отличным от значения по умолчанию|

Если вы создали собственный класс-оболочку параметров приложения и хотите настроить логику обновления, можно переопределить <xref:System.Configuration.ApplicationSettingsBase.Upgrade%2A> метод.

## <a name="clickonce-and-roaming-settings"></a>Параметры ClickOnce и роуминга
 Технология ClickOnce не работает с параметрами роуминга, что позволяет файлу параметров отслеживать работу компьютеров в сети. Если требуются параметры роуминга, необходимо либо реализовать поставщик параметров приложения, который хранит параметры по сети, либо разработать собственные классы пользовательских параметров для хранения параметров на удаленном компьютере. Дополнительные сведения о поставщиках параметров см. в разделе [архитектура параметров приложения](/dotnet/framework/winforms/advanced/application-settings-architecture).

## <a name="see-also"></a>См. также раздел
- [Развертывание и безопасность технологии ClickOnce](../deployment/clickonce-security-and-deployment.md)
- [Общие сведения о параметрах приложения](/dotnet/framework/winforms/advanced/application-settings-overview)
- [Общие сведения о кэше ClickOnce](../deployment/clickonce-cache-overview.md)
- [Доступ к локальным и удаленным данным в приложениях ClickOnce](../deployment/accessing-local-and-remote-data-in-clickonce-applications.md)