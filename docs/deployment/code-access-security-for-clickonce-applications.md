---
title: "Управление доступом для кода для приложения ClickOnce | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-deployment"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "vb.XBAPProjectPropertiesSecurity.HowTo"
  - "vb.XBAProjectPropertiesSecurity.HowTo"
  - "vb.ProjectPropertiesSecurity.HowTo"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
helpviewer_keywords: 
  - "развертывание приложений [ClickOnce], безопасность"
  - "приложения ClickOnce, caspol"
  - "безопасность [ClickOnce], приложения WPF, размещенные в браузере"
  - "безопасность [ClickOnce], приложения ClickOnce"
  - "приложения ClickOnce, политики управления доступом для кода"
  - "безопасность, ClickOnce"
ms.assetid: 04b104d0-0bd3-4ccb-b164-1de92d234487
caps.latest.revision: 31
author: "stevehoag"
ms.author: "shoag"
manager: "wpickett"
caps.handback.revision: 31
---
# Управление доступом для кода для приложения ClickOnce
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Приложения ClickOnce основаны на платформе .NET Framework, и к ним могут применяться ограничения управления доступом для кода. Важно понимать влияние управления доступом для кода, чтобы писать приложения ClickOnce соответствующим образом.  
  
 Управление доступом для кода — это механизм в платформе .NET Framework, позволяющий ограничить доступ кода к защищенным ресурсам и операциям. Следует настроить разрешения управления доступом для кода для приложения ClickOnce, чтобы использовать зону, подходящую для расположения установщика приложения. В большинстве случаев вы можете выбрать зону **Интернет** для ограниченного набора разрешений или зону **Локальная интрасеть** для более обширного набора разрешений.  
  
## Управление доступом для кода ClickOnce по умолчанию  
 По умолчанию при установке или запуске на клиентском компьютере приложение ClickOnce получает разрешения полного доверия.  
  
-   Приложение с такими разрешениями имеет неограниченный доступ к ресурсам, таким как файловая система и реестр. Это потенциально позволяет вредоносному коду использовать приложение \(и систему конечного пользователя\) в своих интересах.  
  
-   Если приложению требуются разрешения полного доверия, конечный пользователь может получить запрос на предоставление разрешений приложению. Это означает, что приложение на самом деле не предоставляет функциональные возможности ClickOnce, а такой запрос может привести менее опытных пользователей в замешательство.  
  
    > [!NOTE]
    >  При установке приложения со съемного носителя, например компакт\-диска, запрос пользователю не выводится. Кроме того, администратор сети может настроить политику сети так, чтобы пользователи не получали запрос при установке приложения из надежного источника. Для получения дополнительной информации см. [Общие сведения о развертывании доверенных приложений](../deployment/trusted-application-deployment-overview.md).  
  
 Чтобы ограничить разрешения для приложения ClickOnce, можно изменить разрешения управления доступом для кода для своего приложения, чтобы запросить зону, оптимальнее всего соответствующую необходимым приложению разрешениям. В большинстве случаев можно выбрать зону, из которой приложение было развернуто. Например, если приложение корпоративное, можно использовать зону **Локальная интрасеть**. Если приложение является интернет\-приложением, можно использовать зону **Интернет**.  
  
## Настройка разрешений безопасности  
 Всегда следует настраивать приложение ClickOnce на запрос подходящей зоны, чтобы ограничить разрешения управления доступом для кода. Разрешения безопасности можно настроить на странице **Безопасностьконструктора проектов**.  
  
 Страница **Безопасность** в **конструкторе проектов** содержит флажок **Включить параметры безопасности ClickOnce\-приложений**. Если этот флажок установлен, в манифест развертывания для вашего приложения добавляются запросы разрешений безопасности. Во время установки пользователю будет предложено предоставить разрешения, если запрошенные разрешения превышают разрешения по умолчанию для той зоны, из которой выполняется развертывание приложения. Для получения дополнительной информации см. [Практическое руководство. Включение параметров безопасности ClickOnce\-приложений.](../deployment/how-to-enable-clickonce-security-settings.md).  
  
 Приложениям, развернутым из разных расположений, без запроса предоставляются различные уровни разрешений. Например, если приложение развертывается из Интернета, оно получает очень ограниченный набор разрешений. При установке из локальной интрасети оно получает больше разрешений, а при установке с компакт\-диска оно получает разрешения полного доверия.  
  
 В качестве отправной точки для настройки разрешений можно выбрать зону безопасности в списке **Зоны** на странице **Безопасность**. Если приложение может развертываться из нескольких зон, выберите зону с наименьшими разрешениями. Для получения дополнительной информации см. [Практическое руководство. Установка зоны безопасности для ClickOnce\-приложения](../deployment/how-to-set-a-security-zone-for-a-clickonce-application.md).  
  
 Свойства, которые можно установить, зависят от набора разрешений; не все наборы разрешений имеют настраиваемые свойства. Дополнительные сведения о полном списке разрешений, которые может запрашивать ваше приложение, см. в разделе <xref:System.Security.Permissions>. Дополнительные сведения о том, как задать разрешения для настраиваемой зоны, см. в разделе [Практическое руководство. Установка пользовательских разрешений для ClickOnce\-приложения](../deployment/how-to-set-custom-permissions-for-a-clickonce-application.md).  
  
## Отладка приложения, обладающего ограниченными разрешениями  
 Как разработчик, вы, скорее всего, используете компьютер разработчика с разрешениями полного доверия. Таким образом, при отладке приложения вы не видите те исключения безопасности, которые могут видеть пользователи при запуске этого приложения с ограниченными разрешениями.  
  
 Чтобы перехватывать эти исключения, необходимо выполнять отладку приложения с теми же разрешениями, которые имеет конечный пользователь. Отладку с ограниченными разрешениями можно включить на странице **Безопасностьконструктора проектов**.  
  
 При отладке приложения с ограниченными разрешениями исключения возникают для любых требований к безопасности кода, которые не были включены на странице **Безопасность**. Отображается помощник по исправлению ошибок с предложениями о том, как следует изменить код, чтобы избежать возникновения исключения.  
  
 Кроме того, при написании кода компонент IntelliSense в редакторе кода отключает все члены, не включенные в настроенные разрешения безопасности.  
  
 Для получения дополнительной информации см. [Практическое руководство. Отладка ClickOnce\-приложения с ограниченными разрешениями](../deployment/how-to-debug-a-clickonce-application-with-restricted-permissions.md).  
  
## Разрешения безопасности для приложений веб\-браузера  
 Visual Studio предоставляет следующие типы проектов для приложений Windows Presentation Foundation \(WPF\).  
  
-   Приложение Windows WPF  
  
-   Приложение веб\-браузера WPF  
  
-   Библиотека настраиваемых элементов управления WPF  
  
-   Библиотека служб WPF  
  
 Из всех этих типов проектов только приложения веб\-браузера WPF размещаются в веб\-браузере и поэтому требуют особых параметров развертывания и безопасности. Для этих приложений существуют следующие параметры безопасности по умолчанию:  
  
-   **Включить параметры безопасности ClickOnce\-приложений.**  
  
-   **Это приложение с частичным доверием.**  
  
-   **Зона Интернета**\(с набором разрешений по умолчанию для выбранных приложений веб\-браузера WPF\).  
  
 Флажок **Отладить это приложение с выбранным набором разрешений** в диалоговом окне **Дополнительные параметры безопасности** выбран и недоступен для изменения. Это вызвано тем, что отладку в зоне нельзя отключить для приложений, размещенных в веб\-браузере.  
  
## См. также  
 [Защита приложений ClickOnce](../deployment/securing-clickonce-applications.md)   
 [Практическое руководство. Включение параметров безопасности ClickOnce\-приложений.](../deployment/how-to-enable-clickonce-security-settings.md)   
 [Практическое руководство. Установка зоны безопасности для ClickOnce\-приложения](../deployment/how-to-set-a-security-zone-for-a-clickonce-application.md)   
 [Практическое руководство. Установка пользовательских разрешений для ClickOnce\-приложения](../deployment/how-to-set-custom-permissions-for-a-clickonce-application.md)   
 [Практическое руководство. Отладка ClickOnce\-приложения с ограниченными разрешениями](../deployment/how-to-debug-a-clickonce-application-with-restricted-permissions.md)   
 [Общие сведения о развертывании доверенных приложений](../deployment/trusted-application-deployment-overview.md)   
 [Страница "Безопасность" в конструкторе проектов](../ide/reference/security-page-project-designer.md)