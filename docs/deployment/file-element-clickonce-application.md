---
title: '&lt;&gt;элемент File (приложение ClickOnce) | Документация Майкрософт'
description: Элемент File определяет все файлы, не являющиеся сборками, которые загружаются и используются приложением. Элемент file является необязательным.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- http://www.w3.org/2000/09/xmldsig#Transform
- urn:schemas-microsoft-com:asm.v2#file
- http://www.w3.org/2000/09/xmldsig#DigestValue
- http://www.w3.org/2000/09/xmldsig#DigestMethod
- http://www.w3.org/2000/09/xmldsig#Transforms
- urn:schemas-microsoft-com:asm.v2#hash
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- <file> element [ClickOnce application manifest]
- manifests [ClickOnce], file element
ms.assetid: 56e3490c-eed5-4841-b1bf-eefe778b6ac9
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 8ad19de19176b7c8ee1d2c2872126a19abb93b67
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99895093"
---
# <a name="ltfilegt-element-clickonce-application"></a>&lt;&gt;элемент File (приложение ClickOnce)
Определяет все файлы, не являющиеся сборками, которые загружаются и используются приложением.

## <a name="syntax"></a>Синтаксис

```xml
<file
    name
    size
    group
    optional
    writeableType
>
    <typelib
        tlbid
        version
        helpdir
        resourceid
        flags
    />
    <comClass
        clsid
        description
        threadingModel
        tlbid
        progid
        miscStatus
        miscStatusIcon
        miscStatusContent
        miscStatusDocPrint
        miscStatusThumbnail
    />
    <comInterfaceExternalProxyStub
        iid
        baseInterface
        numMethods
        name
        tlbid
        proxyStubClass32
    />
    <comInterfaceProxyStub
        iid
        baseInterface
        numMethods
        name
        tlbid
        proxyStubClass32
    />
    <windowClass
        versioned
    />
</file>
```

## <a name="elements-and-attributes"></a>Элементы и атрибуты
 Элемент `file` является необязательным. Элемент имеет перечисленные ниже атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`name`|Обязательный элемент. Определяет имя файла.|
|`size`|Обязательный элемент. Указывает размер файла в байтах.|
|`group`|Необязательный параметр, если `optional` атрибут не задан или имеет значение `false` ; требуется, если `optional` имеет значение `true` . Имя группы, которой принадлежит этот файл. Имя может быть любым строковым значением Юникода, выбранным разработчиком, и используется для загрузки файлов по запросу с помощью <xref:System.Deployment.Application.ApplicationDeployment> класса.|
|`optional`|Необязательный элемент. Указывает, должен ли этот файл загружаться при первом запуске приложения или же файл должен находиться только на сервере до тех пор, пока приложение не запросит его по запросу. Если `false` или не определен, файл загружается при первом запуске или установке приложения. Если `true` `group` задано значение, необходимо указать, что манифест приложения должен быть допустимым. `optional` не может иметь значение true, если `writeableType` указан параметр со значением `applicationData` .|
|`writeableType`|Необязательный элемент. Указывает, что этот файл является файлом данных. В настоящее время единственным допустимым значением является `applicationData`.|

## <a name="typelib"></a>Экспорт Typelib
 `typelib`Элемент является необязательным дочерним элементом элемента File. Элемент описывает библиотеку типов, принадлежащую COM-компоненту. Элемент имеет перечисленные ниже атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`tlbid`|Обязательный элемент. Идентификатор GUID, назначенный библиотеке типов.|
|`version`|Обязательный элемент. Номер версии библиотеки типов.|
|`helpdir`|Обязательный элемент. Каталог, содержащий файлы справки для компонента. Может иметь нулевую длину.|
|`resourceid`|Необязательный элемент. Шестнадцатеричное строковое представление идентификатора локали (LCID). Это одна или четыре шестнадцатеричные цифры без префикса 0x и без начальных нулей. Код языка (LCID) может иметь нейтральный идентификатор языка.|
|`flags`|Необязательный элемент. Строковое представление флагов библиотеки типов для этой библиотеки типов. В частности, это должен быть один из элементов "Restricted", "CONTROL", "HIDDEN" и "ХАСДИСКИМАЖЕ".|

## <a name="comclass"></a>comClass
 `comClass`Элемент является необязательным дочерним элементом `file` элемента, но является обязательным, если [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложение содержит COM-компонент, который планируется развернуть с помощью COM-взаимодействия без регистрации. Элемент имеет перечисленные ниже атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`clsid`|Обязательный элемент. Идентификатор класса компонента COM, выраженный в виде идентификатора GUID.|
|`description`|Необязательный элемент. Имя класса.|
|`threadingModel`|Необязательный элемент. Потоковая модель, используемая внутрипроцессный COM-классами. Если это свойство имеет значение null, модель потоков не используется. Компонент создается в основном потоке клиента, а вызовы из других потоков маршалируются в этот поток. В следующем списке приведены допустимые значения:<br /><br /> `Apartment`, `Free`, `Both` и `Neutral`.|
|`tlbid`|Необязательный элемент. Идентификатор GUID для библиотеки типов для этого COM-компонента.|
|`progid`|Необязательный элемент. Программный идентификатор, зависящий от версии, связанный с COM-компонентом. Формат `ProgID` имеет значение `<vendor>.<component>.<version>` .|
|`miscStatus`|Необязательный элемент. Дублирует в манифесте сборки сведения, предоставленные в разделе `MiscStatus` реестра. Если значения для `miscStatusIcon` атрибутов, `miscStatusContent` , `miscStatusDocprint` или `miscStatusThumbnail` не найдены, то соответствующее значение по умолчанию, указанное в `miscStatus` , используется для отсутствующих атрибутов. Значением может быть список значений атрибутов из следующей таблицы, разделенных запятыми. Этот атрибут можно использовать, если класс COM является классом OCX, для которого требуются `MiscStatus` значения разделов реестра.|
|`miscStatusIcon`|Необязательный элемент. Дублирует в манифесте сборки сведения, предоставленные DVASPECT_ICON. Он может предоставить значок объекта. Значением может быть список значений атрибутов из следующей таблицы, разделенных запятыми. Этот атрибут можно использовать, если класс COM является классом OCX, для которого требуются `Miscstatus` значения разделов реестра.|
|`miscStatusContent`|Необязательный элемент. Дублирует в манифесте сборки сведения, предоставленные DVASPECT_CONTENT. Он может обеспечить возможность воспроизведения составного документа для экрана или принтера. Значением может быть список значений атрибутов из следующей таблицы, разделенных запятыми. Этот атрибут можно использовать, если класс COM является классом OCX, для которого требуются `MiscStatus` значения разделов реестра.|
|`miscStatusDocPrint`|Необязательный элемент. Дублирует в манифесте сборки сведения, предоставленные DVASPECT_DOCPRINT. Он может предоставлять представление объекта на экране, как если бы оно печаталось на принтере. Значением может быть список значений атрибутов из следующей таблицы, разделенных запятыми. Этот атрибут можно использовать, если класс COM является классом OCX, для которого требуются `MiscStatus` значения разделов реестра.|
|`miscStatusThumbnail`|Необязательный элемент. Дублирует в манифесте сборки сведения, предоставленные DVASPECT_THUMBNAIL. Он может предоставить эскиз объекта для воспроизведения в средстве просмотра. Значением может быть список значений атрибутов из следующей таблицы, разделенных запятыми. Этот атрибут можно использовать, если класс COM является классом OCX, для которого требуются `MiscStatus` значения разделов реестра.|

## <a name="cominterfaceexternalproxystub"></a>коминтерфацеекстерналпроксистуб
 `comInterfaceExternalProxyStub`Элемент является необязательным дочерним элементом `file` элемента, но может потребоваться, если [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложение содержит COM-компонент, который планируется развернуть с помощью COM без регистрации. Элемент содержит следующие атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`iid`|Обязательный элемент. Идентификатор интерфейса (IID), обслуживаемый этим прокси-сервером. Идентификатор IID должен иметь окружающие фигурные скобки.|
|`baseInterface`|Необязательный элемент. IID интерфейса, на который ссылается интерфейс, `iid` является производным.|
|`numMethods`|Необязательный элемент. Число методов, реализованных интерфейсом.|
|`name`|Необязательный элемент. Имя интерфейса, которое будет отображаться в коде.|
|`tlbid`|Необязательный элемент. Библиотека типов, содержащая описание интерфейса, указанного `iid` атрибутом.|
|`proxyStubClass32`|Необязательный элемент. Сопоставляет идентификатор IID с идентификатором CLSID в 32-разрядных прокси-библиотеках.|

## <a name="cominterfaceproxystub"></a>коминтерфацепроксистуб
 `comInterfaceProxyStub`Элемент является необязательным дочерним элементом `file` элемента, но может потребоваться, если [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложение содержит COM-компонент, который планируется развернуть с помощью COM без регистрации. Элемент содержит следующие атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`iid`|Обязательный элемент. Идентификатор интерфейса (IID), обслуживаемый этим прокси-сервером. Идентификатор IID должен иметь окружающие фигурные скобки.|
|`baseInterface`|Необязательный элемент. IID интерфейса, на который ссылается интерфейс, `iid` является производным.|
|`numMethods`|Необязательный элемент. Число методов, реализованных интерфейсом.|
|`Name`|Необязательный элемент. Имя интерфейса, которое будет отображаться в коде.|
|`Tlbid`|Необязательный элемент. Библиотека типов, содержащая описание интерфейса, указанного `iid` атрибутом.|
|`proxyStubClass32`|Необязательный элемент. Сопоставляет идентификатор IID с идентификатором CLSID в 32-разрядных прокси-библиотеках.|
|`threadingModel`|Необязательный элемент. Необязательный элемент. Потоковая модель, используемая внутрипроцессный COM-классами. Если это свойство имеет значение null, модель потоков не используется. Компонент создается в основном потоке клиента, а вызовы из других потоков маршалируются в этот поток. В следующем списке приведены допустимые значения:<br /><br /> `Apartment`, `Free`, `Both` и `Neutral`.|

## <a name="windowclass"></a>виндовкласс
 `windowClass`Элемент является необязательным дочерним элементом `file` элемента, но может потребоваться, если [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложение содержит COM-компонент, который планируется развернуть с помощью COM без регистрации. Элемент ссылается на класс окна, определенный компонентом COM, к которому должна быть применена версия. Элемент содержит следующие атрибуты.

|Атрибут|Описание|
|---------------|-----------------|
|`versioned`|Необязательный элемент. Определяет, содержит ли внутреннее имя класса окна, используемое при регистрации, версию сборки, которая содержит класс окна. Значение этого атрибута может быть `yes` или `no` . Значение по умолчанию — `yes`. Значение `no` должно использоваться только в том случае, если один и тот же класс окна определен параллельным компонентом и эквивалентным непараллельным компонентом и требуется обрабатывать их как один и тот же класс окна. Обратите внимание, что применяются обычные правила регистрации класса окна — только первый компонент, регистрирующий класс окна, может зарегистрировать его, так как к нему не применена версия.|

## <a name="hash"></a>hash
 `hash`Элемент является необязательным дочерним элементом `file` элемента. У элемента `hash` нет атрибутов.

 [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] использует алгоритмный хэш всех файлов приложения в качестве проверки безопасности, чтобы гарантировать, что ни один из файлов не был изменен после развертывания. Если `hash` элемент не включен, эта проверка не будет выполнена. Поэтому `hash` не рекомендуется опускать элемент.

 Если манифест содержит нехэшированный файл, этот манифест не может быть подписан цифровой подписью, так как пользователи не могут проверить содержимое нехэшированного файла.

## <a name="dsigtransforms"></a>дсиг: преобразования
 `dsig:Transforms`Элемент является обязательным дочерним элементом `hash` элемента. У элемента `dsig:Transforms` нет атрибутов.

## <a name="dsigtransform"></a>дсиг: преобразование
 `dsig:Transform`Элемент является обязательным дочерним элементом `dsig:Transforms` элемента. Элемент `dsig:Transform` имеет перечисленные ниже атрибуты.

| Атрибут | Описание |
|-------------| - |
| `Algorithm` | Алгоритм, используемый для вычисления дайджеста для этого файла. В настоящее время единственным значением, используемым, [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] является `urn:schemas-microsoft-com:HashTransforms.Identity` . |

## <a name="dsigdigestmethod"></a>дсиг: Дижестмесод
 `dsig:DigestMethod`Элемент является обязательным дочерним элементом `hash` элемента. Элемент `dsig:DigestMethod` имеет перечисленные ниже атрибуты.

| Атрибут | Описание |
|-------------| - |
| `Algorithm` | Алгоритм, используемый для вычисления дайджеста для этого файла. В настоящее время единственным значением, используемым, [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] является `http://www.w3.org/2000/09/xmldsig#sha1` . |

## <a name="dsigdigestvalue"></a>дсиг: Дижествалуе
 `dsig:DigestValue`Элемент является обязательным дочерним элементом `hash` элемента. У элемента `dsig:DigestValue` нет атрибутов. Его текстовое значение — это вычисленный хэш для указанного файла.

## <a name="remarks"></a>Remarks
 Этот элемент определяет все файлы, не являющиеся сборками, которые составляют приложение, и, в частности, хэш-значения для проверки файлов. Этот элемент может также включать данные изоляции модели COM, связанные с файлом. Если файл изменяется, также необходимо обновить файл манифеста приложения, чтобы отразить изменение.

## <a name="example"></a>Пример
 В следующем примере кода показаны `file` элементы манифеста приложения для приложения, развернутого с помощью [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] .

```xml
<file name="Icon.ico" size="9216">
  <hash>
    <dsig:Transforms>
      <dsig:Transform Algorithm="urn:schemas-microsoft-com:HashTransforms.Identity" />
    </dsig:Transforms>
    <dsig:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
    <dsig:DigestValue>lVoj+Rh6RQ/HPNLOdayQah5McrI=</dsig:DigestValue>
  </hash>
</file>
```

## <a name="see-also"></a>См. также раздел
- [Манифест приложения ClickOnce](../deployment/clickonce-application-manifest.md)