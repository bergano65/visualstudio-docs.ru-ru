---
title: Развертывание и безопасность технологии ClickOnce | Документация Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.technology: vs-ide-deployment
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- Windows applications, ClickOnce deployment
- deploying applications [ClickOnce]
- ClickOnce deployment
- publishing, ClickOnce
ms.assetid: abab6d34-c3c2-45c1-a8b6-43c7d3131e7a
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: dd089b57fb50d20c8805c932b0043bb8c0dba82e
ms.sourcegitcommit: 240c8b34e80952d00e90c52dcb1a077b9aff47f6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2018
ms.locfileid: "49926453"
---
# <a name="clickonce-security-and-deployment"></a>Развертывание и безопасность технологии ClickOnce
[!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] — это технология развертывания, которая позволяет создавать самостоятельно обновляющиеся приложения Windows, которые могут устанавливаться и запускаться с минимальным вмешательством пользователя. [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] обеспечивает полную поддержку публикации и обновления приложений, развернутых с использованием технологии ClickOnce, если вы разработали проектами с помощью Visual Basic и Visual C#. Сведения о развертывании приложений Visual C++, см. в разделе [развертывание ClickOnce для приложений Visual C++](/cpp/ide/clickonce-deployment-for-visual-cpp-applications).  
  
 [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] предназначена для решения трех основных проблем развертывания:  
  
- **Трудности обновления приложений.** С помощью развертывания установщика Windows при обновлении приложения пользователь может установить обновление, файл msp и применить его к установленным продуктом; с помощью [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] развертывания, вы можете обеспечить автоматическое обновление. Загружаются только те части приложения, которые были изменены, а затем полное обновленное приложение повторно устанавливается из новой папки side-by-side.  
  
- **Влияние на компьютере пользователя.** С помощью развертывания установщика Windows приложения часто зависят от общих компонентов, вероятность конфликтов версий; с помощью [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] развертывания, каждое приложение самодостаточно и не смогут взаимодействовать с другими приложениями.  
  
- **Разрешения безопасности.** Развертывание с помощью установщика Windows необходимы права администратора и допускает только установку пользователя с ограниченными правами; [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] развертывания позволяет пользователям без прав администратора для установки и предоставляет только те разрешения управления доступом для кода, которые необходимы для приложения.  
  
  В прошлом эти проблемы иногда вынуждали разработчиков принимать решение о создании веб-приложений вместо приложения на основе Windows, жертвуя широкими возможностями пользовательского интерфейса для простоты установки. С помощью приложения, развернутые с помощью [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)], можно использовать преимущества обеих технологий.  
  
## <a name="what-is-a-clickonce-application"></a>Что такое приложение ClickOnce?  
 Объект [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложение является любой Windows Presentation Foundation (*.xbap*), Windows Forms (*.exe*), консольное приложение (*.exe*), или решения Office (*.dll*) опубликовать при помощи [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] технологии. Вы можете опубликовать [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения тремя разными способами: с веб-страницы, из общей сетевой папки или с носителя, например компакт-диска. Объект [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения могут устанавливаться на компьютере конечного пользователя и запускать локально, даже в том случае, если компьютер находится в автономном режиме, или она могут выполняться в интерактивном режиме без установки ничего на компьютере конечного пользователя. Дополнительные сведения см. в разделе [Выбор стратегии развертывания ClickOnce](../deployment/choosing-a-clickonce-deployment-strategy.md).  
  
 [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения могут обновляться самостоятельно; они могут проверять наличие новых версий по мере их доступности и автоматически заменять все обновленные файлы. Разработчик может указать поведение обновления. сетевой администратор также может управлять стратегиями обновления, например, устанавливая обязательность обновления как обязательные. Обновления можно также понизить до более ранней версии конечным пользователем или администратором. Дополнительные сведения см. в разделе [Выбор стратегии обновления ClickOnce](../deployment/choosing-a-clickonce-update-strategy.md).  
  
 Так как [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения изолированы, установку и запуск [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения не может нарушить работу существующих приложений. [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения являются самодостаточными; Каждый [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения устанавливается и запускается из безопасного каждого пользователя, кэш каждого приложения. [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения выполняются в зонах безопасности Интернета или интрасети. При необходимости приложение может запросить повышение прав. Дополнительные сведения см. в разделе [безопасности ClickOnce-приложений](../deployment/securing-clickonce-applications.md).  
  
## <a name="how-clickonce-security-works"></a>Как работает безопасность технологии ClickOnce  
 Ядро [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] безопасность основана на сертификаты, политики управления доступом для кода и запрос о доверии ClickOnce.  
  
### <a name="certificates"></a>Сертификаты  
 Сертификаты Authenticode используются для проверки подлинности издателя приложения. Используя Authenticode для развертывания приложения ClickOnce помогает предотвратить вредоносной программы случаи как легальную программу, исходящую из авторитетного, заслуживающего доверия источника. При необходимости сертификаты могут также использоваться для подписи приложения и манифестов развертывания, чтобы удостовериться, что файлы не были изменены с помощью. Дополнительные сведения см. в разделе [ClickOnce и технология Authenticode](../deployment/clickonce-and-authenticode.md). Сертификаты также могут использоваться для настройки клиентских компьютеров со списком доверенных издателей. Если приложение поступает из надежного издателя, его можно установить без вмешательства пользователя. Дополнительные сведения см. в разделе [Общие сведения о развертывании доверенных приложений](../deployment/trusted-application-deployment-overview.md).  
  
### <a name="code-access-security"></a>Управление доступом для кода  
 Secrity доступа кода помогает ограничить доступ кода к защищенным ресурсам. В большинстве случаев вы можете ограничить разрешения зон Интернета или локальной интрасети. Используйте **безопасности** странице в **ProjectDesigner** чтобы запросить зону, подходящую для приложения. Кроме того, можно выполнять отладку приложений с ограниченными правами для имитации взаимодействия с пользователем. Дополнительные сведения см. в статье [Управление доступом для кода для приложения ClickOnce](../deployment/code-access-security-for-clickonce-applications.md).  
  
### <a name="clickonce-trust-prompt"></a>Запрос о доверии ClickOnce  
 Если приложение запрашивает больше разрешений, чем позволяет зона, конечный пользователь может предложено доверии. Пользователь может решить, если приложения ClickOnce, такие как приложения Windows Forms, приложения Windows Presentation Foundation, консольные приложения, приложения браузера XAML и решений Office являются доверенными для запуска. Дополнительные сведения см. в разделе [как: Настройка поведения запроса о доверии ClickOnce](../deployment/how-to-configure-the-clickonce-trust-prompt-behavior.md).  
  
## <a name="how-clickonce-deployment-works"></a>Как работает развертывание ClickOnce  
 Ядро [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] архитектура развертывания основана на двух файлах манифеста XML: манифест приложения и манифест развертывания. Файлы используются для описания установки приложения ClickOnce из и как они будут обновлены при обновлении.  
  
### <a name="publish-clickonce-applications"></a>Публикация приложений ClickOnce  
 В манифесте приложения описывается само приложение. Сюда входят сборки, зависимости и файлы, составляющие приложение, необходимые разрешения и расположение, где будут доступны обновления. Разработчик приложения создает манифест приложения с помощью мастера публикации в Visual Studio или создания манифеста и Editing Tool (*Mage.exe*) в [!INCLUDE[winsdklong](../deployment/includes/winsdklong_md.md)]. Дополнительные сведения см. в разделе [как: публикация приложения ClickOnce с помощью мастера публикации](../deployment/how-to-publish-a-clickonce-application-using-the-publish-wizard.md).  
  
 В манифесте развертывания описывается, как приложение развертывается. Сюда входят расположение манифеста приложения и версию приложения, которое должно запускаться клиентами.  
  
### <a name="deploy-clickonce-applications"></a>Развертывание приложений ClickOnce  
 После создания манифеста развертывания копируется в место развертывания. Это может быть Web server, сетевая общая папка или носители, такие как компакт-диска. Манифест приложения и все файлы приложения также копируются в место развертывания, который указан в манифесте развертывания. Это может быть таким же, как расположение развертывания, или это может быть другое расположение. При использовании **мастера публикации** в Visual Studio операции копирования выполняются автоматически.  
  
### <a name="install-clickonce-applications"></a>Установка приложений ClickOnce  
 После развертывания в место развертывания конечным пользователям можно загрузить и установить приложение, щелкнув значок, представляющий файл манифеста развертывания на веб-странице или в папке. В большинстве случаев пользователю предоставляется простое диалоговое окно с запросом на подтверждение установки, после чего автоматически выполняется установка, и приложение запускается без дополнительных действий пользователя. В случаях, если приложению требуются повышенные разрешения или если приложение не подписано доверенным сертификатом диалоговое окно также запрашивает у пользователя разрешение перед продолжением установки. То, что ClickOnce устанавливает на пользователя, повышение уровня разрешений может потребоваться при наличии необходимых компонентов, требующих полномочий администратора. Дополнительные сведения о повышенных разрешениях см. в разделе [обеспечение безопасности ClickOnce-приложений](../deployment/securing-clickonce-applications.md).  
  
 Сертификаты могут быть доверенными на уровне компьютера или предприятия, таким образом, чтобы автоматической установки приложения ClickOnce, подписанные доверенным сертификатом. Дополнительные сведения о доверенных сертификатов, см. в разделе [Общие сведения о развертывании доверенных приложений](../deployment/trusted-application-deployment-overview.md).  
  
 Приложения могут добавляться к почтовому ящику **запустить** меню и **Установка и удаление программ** в группе **панели управления**. В отличие от других технологий развертывания ничего не добавляется **Program Files** отсутствуют права администратора или папки и реестр являются обязательными для установки  
  
> [!NOTE]
>  Можно также не позволяет приложению будут добавляться **запустить** меню и **Установка и удаление программ** группы, делая его ведут себя как веб-приложения. Дополнительные сведения см. в разделе [Выбор стратегии развертывания ClickOnce](../deployment/choosing-a-clickonce-deployment-strategy.md).  
  
### <a name="update-clickonce-applications"></a>Обновление приложений ClickOnce  
 При создании обновленной версии приложения, создать новый манифест приложения и скопируйте файлы в место развертывания — обычно папка одного уровня с исходной папкой развертывания приложения. Администратор обновляет манифест развертывания, чтобы указать расположение новой версии приложения.  
  
> [!NOTE]
>  **Мастера публикации** в Visual Studio можно использовать для выполнения этих действий.  
  
 Помимо расположения развертывания манифест развертывания также содержится размещение обновления (веб-страницу или общий сетевой ресурс), проверяемое приложением на наличие обновленных версий. [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] **Публикация** свойства, используемые для указания того, когда и как часто приложение должно проверять наличие обновлений. Поведение обновления может быть задано в манифесте развертывания, или оно может быть представлено в виде вариантов выбора в пользовательском интерфейсе приложения с помощью параметра [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] API-интерфейсы. Кроме того **публикации** свойства могут использоваться обновлений или откат к предыдущей версии. Дополнительные сведения см. в разделе [Выбор стратегии обновления ClickOnce](../deployment/choosing-a-clickonce-update-strategy.md).  
  
### <a name="third-party-installers"></a>Установщики третьих лиц  
 Можно использовать установщик ClickOnce для установки приложения и сторонних компонентов. Необходимо приобрести распространяемого пакета (.exe или MSI-файл) и описания пакета с помощью манифеста продукта не зависящий от языка и манифест пакета для конкретного языка. Дополнительные сведения см. в разделе [создание пакетов загрузчика](../deployment/creating-bootstrapper-packages.md).  
  
## <a name="clickonce-tools"></a>Средства ClickOnce  
 Ниже приведены средства можно использовать для создания, редактирования, войдите и повторной подписи манифестов приложения и развертывания.  
  
|Средство|Описание|  
|----------|-----------------|  
|[Страница "Безопасность" в конструкторе проектов](../ide/reference/security-page-project-designer.md)|Знаками манифестов приложения и развертывания.|  
|[Страница публикации в конструкторе проектов](../ide/reference/publish-page-project-designer.md)|Создания и изменения манифестов приложения и развертывания для приложений Visual Basic и Visual C#.|  
|[*Mage.exe* (манифеста средство создания и редактирования)](/dotnet/framework/tools/mage-exe-manifest-generation-and-editing-tool)|Создает манифестов приложения и развертывания для приложений Visual Basic, Visual C# и Visual C++.<br /><br /> Подписывает и повторного подписывания манифестов приложения и развертывания.<br /><br /> Можно запустить из пакетных сценариев и командной строке.|  
|[*MageUI.exe* (манифеста, создания и редактирования Tool, Graphical Client)](/dotnet/framework/tools/mageui-exe-manifest-generation-and-editing-tool-graphical-client)|Создания и изменения манифестов приложения и развертывания.<br /><br /> Подписывает и повторного подписывания манифестов приложения и развертывания.|  
|[Задача GenerateApplicationManifest](../msbuild/generateapplicationmanifest-task.md)|Создает манифест приложения.<br /><br /> Можно запустить из MSBuild. Дополнительные сведения см. в разделе [Справочник по MSBuild](../msbuild/msbuild-reference.md).|  
|[Задача GenerateDeploymentManifest](../msbuild/generatedeploymentmanifest-task.md)|Создает манифест развертывания.<br /><br /> Можно запустить из MSBuild. Дополнительные сведения см. в разделе [Справочник по MSBuild](../msbuild/msbuild-reference.md).|  
|[Задача SignFile](../msbuild/signfile-task.md)|Знаками манифестов приложения и развертывания.<br /><br /> Можно запустить из MSBuild. Дополнительные сведения см. в разделе [Справочник по MSBuild](../msbuild/msbuild-reference.md).|  
|<xref:Microsoft.Build.Tasks.Deployment.ManifestUtilities>|Разработка приложения для создания манифестов приложения и развертывания.|  
  
 В следующей таблице показаны версии .NET Framework, необходимые для поддержки приложений ClickOnce в следующих браузерах.  
  
|Браузер|Версия платформы .NET Framework|  
|-------------|----------------------------|  
|Internet Explorer|2.0, 3.0, 3.5, 3.5 С ПАКЕТОМ ОБНОВЛЕНИЯ 1, 4|  
|Firefox|2.0 С ПАКЕТОМ ОБНОВЛЕНИЯ 1, 3.5 С ПАКЕТОМ ОБНОВЛЕНИЯ 1, 4|  
  
## <a name="see-also"></a>См. также  
 [Развертывание ClickOnce в Windows Vista](../deployment/clickonce-deployment-on-windows-vista.md)   
 [Публикация приложений ClickOnce](../deployment/publishing-clickonce-applications.md)   
 [Защита приложений ClickOnce](../deployment/securing-clickonce-applications.md)   
 [Развертывание компонентов COM с помощью ClickOnce](../deployment/deploying-com-components-with-clickonce.md)   
 [Построение ClickOnce-приложений из командной строки](../deployment/building-clickonce-applications-from-the-command-line.md)   
 [Отладка ClickOnce-приложений, использующих System.Deployment.Application](../deployment/debugging-clickonce-applications-that-use-system-deployment-application.md)