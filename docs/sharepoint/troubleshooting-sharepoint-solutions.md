---
title: Устранение неполадок решений SharePoint | Документация Майкрософт
description: Узнайте, какие проблемы или предупреждения могут возникнуть при отладке решений SharePoint с помощью отладчика Visual Studio.
ms.custom: SEO-VS-2020
ms.date: 02/22/2017
ms.topic: conceptual
f1_keywords:
- Microsoft.VisualStudio.Tools.SharePoint.Errors.Debugging
dev_langs:
- VB
- CSharp
- VB
- CSharp
helpviewer_keywords:
- SharePoint development in Visual Studio, troubleshooting
author: John-Hart
ms.author: johnhart
manager: jmartens
ms.workload:
- office
ms.openlocfilehash: c6b0e031e96d2543ae0bb109f243824125f431a3
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99892298"
---
# <a name="troubleshoot-sharepoint-solutions"></a>Устранение неполадок решений SharePoint
  При отладке решений SharePoint с помощью отладчика могут возникнуть следующие проблемы или предупреждения [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] . Дополнительные сведения см. в разделе [Отладка решений рабочего процесса SharePoint 2007](/previous-versions/bb386166(v=vs.100)).

## <a name="token-restrictions-in-sandboxed-visual-web-parts"></a>Ограничения токенов в изолированных визуальных веб-компонентах
 Визуальные веб-части в изолированных решениях не могут обрабатывать стандартные токены, например $SPUrl, которые поддерживает среда выполнения SharePoint. В результате URL-адрес не может быть разрешен, и нельзя просмотреть содержимое в представлении кода в конструкторе визуальной веб-части при ссылке на него непосредственно в элементе скрипта, как в следующем примере:

```xml
<script src="<% $SPUrl:~site/SiteAssets/ListOperations.js %>"></script>
```

 Для обхода этого ограничения и разрешения токенов на него ссылаются с помощью литералов:

```xml
<asp:literal ID="Literal1" runat="server" Text="<script src='" />
<asp:literal ID="Literal2" runat="server" Text="<% $SPUrl:~site/SiteAssets/ListOperations.js %>" />
<asp:literal ID="Literal3" runat="server" Text="' type='text/javascript' ></script>" />
```

## <a name="character-restrictions-in-names-of-projects-and-project-items"></a>Ограничения на символы в именах проектов и элементов проектов
 Названия проекта и его элементов могут содержать только символы, допустимые для пути развертывания в SharePoint 2010. Другие символы не допускаются.

### <a name="error-message"></a>Сообщение об ошибке
 Сообщение об ошибке "недопустимые символы".

### <a name="resolution"></a>Решение
 Для названий проектов SharePoint и элементов проектов используйте только следующие знаки:

- Буквенно-цифровые символы ASCII

- Пробел

- Точка (.)

- Запятая (,)

- Символ подчеркивания (_)

- Тире (-)

- Обратная косая черта (\\)

  Во время упаковки проекта правило проверки проверяет, что свойство "Путь развертывания" каждого разворачиваемого файла содержит только допустимые знаки.

## <a name="errors-when-creating-custom-fields"></a>Ошибки при создании настраиваемых полей
 Настраиваемые поля в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] определяются в XML. Может возникнуть ошибка, если поле не определено или на него не существует ссылка в определенном формате.

### <a name="error-message"></a>Сообщение об ошибке
 Сообщение об ошибке "недопустимые символы" во время упаковки.

### <a name="resolution"></a>Решение
 Идентификатор для определения поля должен представлять собой GUID, заключенный в фигурные скобки, как показано в следующем примере:

```xml
<Field ID="{5744d18c-305e-4632-8bd1-09d134f4830d}"
    Type="Note"
    Name="PatientName"
    DisplayName="Patient Name"
    Group="A Custom Group">
</Field>.
```

 Как показано в следующем примере, ссылка на поле в типе содержимого должна быть определена с помощью пустого элемента Format ( \<FieldRef /> ), а не с помощью элементов Start и End ( \<FieldRef> \</FieldRef> ):

```xml
<FieldRef ID="{5744d18c-305e-4632-8bd1-09d134f4830d}"
    Name="PatientName"
    DisplayName="Patient Name"
    Required="TRUE"/>
```

 Если для поля существует проблема с исходным XML-файлом, например, неверный формат или недопустимый XML-файл, возникает ошибка "Невозможно обработать файл".

## <a name="new-non-english-site-definitions-do-not-appear-in-site-creation-page-after-deployment"></a>Новые определения сайтов, отличные от английского, не отображаются на странице создания сайта после развертывания
 После создания и развертывания определения сайта с использованием локализованной версии (т. е. [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] версии с языковым стандартом, отличным [!INCLUDE[TLA2#tla_id](../sharepoint/includes/tla2sharptla-id-md.md)] от 1033) вкладка **настройки SharePoint** не отображается в поле **выбора шаблона** , а новый шаблон узла не отображается на странице **новый сайт SharePoint** .

### <a name="error-message"></a>Сообщение об ошибке
 Отсутствует.

### <a name="resolution"></a>Решение
 Эта проблема возникает из-за неверного значения свойства **path** для файла конфигурации определения сайта веб-Temp, например *webtemp_SiteDefinitionProject1.xml*. В свойстве **path** для файла Temp, расположенном в **расположении развертывания**, измените 1033 на соответствующий языковой стандарт [!INCLUDE[TLA2#tla_id](../sharepoint/includes/tla2sharptla-id-md.md)] . Например, чтобы использовать японский языковой стандарт, измените значение на 1041. Дополнительные сведения см. в разделе [Номера локалей, назначаемые Microsoft](/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).

## <a name="error-appears-when-a-workflow-project-is-deployed-on-a-clean-system"></a>Ошибка появляется при развертывании проекта рабочего процесса в чистой системе
 Эта проблема возникает при развертывании проекта рабочего процесса в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] в чистой системе. Чистая система является компьютером, с недавно установленными [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] и SharePoint, но на котором не развернуты проекты рабочего процесса.

### <a name="error-message"></a>Сообщение об ошибке
 Не удается найти список SharePoint: журнал рабочего процесса.

### <a name="resolution"></a>Решение
 Эта ошибка возникает из-за отсутствия списка журнала рабочего процесса. Так как среда разработки является чистой системой, рабочие процессы не развертываются, а список журналов рабочего процесса еще не существует. Чтобы устранить эту проблему, снова откройте мастер рабочего процесса, в результате чего создается список журнала рабочего процесса.

##### <a name="to-reenter-the-workflow-wizard"></a>Повторный ввод в мастере рабочего процесса

1. В **Обозреватель решений** выберите узел рабочего процесса.

2. В окне **Свойства** нажмите кнопку с многоточием (...) для любого свойства, имеющего кнопку с многоточием.

## <a name="user-must-refresh-application-page-in-browser-while-debugging-to-view-updated-image"></a>Пользователь должен обновить страницу приложения в браузере во время отладки для просмотра обновленного изображения
 При отладке решения SharePoint, содержащего страницу приложения с элементом управления, который отображает изображение, например [!INCLUDE[TLA2#tla_html](../sharepoint/includes/tla2sharptla-html-md.md)] элемент управления "изображение", необходимо обновить страницу в браузере, чтобы отобразить все изменения, внесенные в образ.

## <a name="error-the-site-location-is-not-valid"></a>Ошибка: Недопустимое расположение сайта
 Эта проблема может возникать [!INCLUDE[moss_14_short](../sharepoint/includes/moss-14-short-md.md)] , если не установлена. Это также может произойти, если у вас нет прав администратора на доступ к веб-сайту SharePoint, указанному в **мастере настройки SharePoint**.

### <a name="error-message"></a>Сообщение об ошибке

- Недопустимое расположение сайта SharePoint.

### <a name="resolution"></a>Решение

- Установить службы [!INCLUDE[moss_14_short](../sharepoint/includes/moss-14-short-md.md)].

- Убедитесь, что у вас есть права администратора на доступ к веб-сайту SharePoint. Дополнительные сведения см [!INCLUDE[TLA2#tla_office](../sharepoint/includes/tla2sharptla-office-md.md)] . в статье в Интернете [назначение или удаление администраторов приложений служб в SharePoint Server](/sharepoint/administration/assign-or-remove-administrators-of-service-applications).

## <a name="site-deletion-web-event-does-not-occur-in-event-receiver-project"></a>Веб-событие удаления сайта не происходит в проекте приемника событий
 При создании проекта приемника событий и выборе определенных веб-событий, например "удаляется сайт", событие никогда не происходит.

### <a name="error-message"></a>Сообщение об ошибке
 Отсутствует.

### <a name="resolution"></a>Решение
 Эта проблема возникает из-за того, что область компонента должна быть "site" для управления событиями на уровне сайта, но областью применения по умолчанию для проектов приемников событий является "Web". Затронутые веб-события:

- Удаляется сайт (удаление)

- Сайт удален (веб-удаление)

- Перемещение сайта (веб-перемещение)

- Сайт перемещен (веб-узел перемещен)

  Чтобы устранить эту проблему, измените область применения для приемника событий, как показано ниже.

##### <a name="to-change-the-feature-scope-of-the-event-receiver"></a>Изменение области применения компонента приемника событий

1. В **Обозреватель решений** откройте файл *компонента* приемника событий в **конструкторе компонентов** , дважды щелкнув файл или открыв его контекстное меню и выбрав **Открыть**.

2. Щелкните стрелку рядом с **областью**, а затем выберите **сайт** в появившемся списке.

## <a name="deployment-error-appears-after-the-name-of-an-identifier-in-a-business-data-connectivity-model-project-is-changed"></a>После изменения имени идентификатора в проекте модели подключения к бизнес-данным появляется сообщение об ошибке развертывания
 Эта проблема возникает при изменении имени идентификатора сущности в модели подключения к бизнес-данным (BDC) и последующей попытке развертывания решения.

### <a name="error-messages"></a>Сообщения об ошибках

- \<*model name*> содержит следующие ошибки активации внешнего типа контента...

- Иметадатаобжект с именем " \<*model name*> " содержит значение в поле "имя", которое повторяется...

### <a name="resolution"></a>Решение
 Чтобы устранить эту проблему, удалите модель вручную, а затем снова разверните решение.  Модель можно удалить с помощью любого из следующих средств:

- Центр администрирования SharePoint 2010. Дополнительные сведения см. в разделе [BDC управление моделями](/previous-versions/office/sharepoint-server-2010/ee524073(v=office.14)#delete-a-bdc-model) на веб-сайте Microsoft TechNet.

- Windows PowerShell Чтобы удалить модель, введите эту команду в командной строке: **Remove-спбусинессдатакаталогмодел**. Дополнительные сведения см. в разделе [Общие командлеты (SharePoint Server 2010)](/powershell/module/sharepoint-server) на веб-сайте Microsoft TechNet.

## <a name="an-error-appears-when-you-try-to-view-a-visual-web-part-in-sharepoint"></a>При попытке просмотра визуальной веб-части в SharePoint появляется сообщение об ошибке
 Эта проблема возникает, когда свойство **path** пользовательского элемента управления не начинается со строки "ControlTemplate \\ ".

### <a name="error-messages"></a>Сообщения об ошибках

- Файл "/_CONTROLTEMPLATES/ *\<project name>* / *\<Web Part name>* / *\<user control name>* . ascx" не существует.

- Ошибка сервера в приложении «/».

### <a name="resolution"></a>Решение

##### <a name="to-resolve-this-issue"></a>Действия по устранению проблемы:

1. В **Обозреватель решений** выберите файл пользовательского элемента управления, чей файл имеет расширение *ASCX*.

2. В строке меню выберите **вид**  >  **окно свойств**.

3. В окне **Свойства** разверните узел **расположение развертывания** .

4. Убедитесь, что значение свойства **path** начинается со строки "ControlTemplate \\ ".

## <a name="error-appears-when-an-imported-reusable-workflow-that-contains-a-task-form-field-is-run"></a>Ошибка появляется, когда выполняется импортированный рабочий процесс с возможностью повторного использования, содержащий поле формы задачи
 Эта проблема возникает при импорте рабочего процесса, содержащего форму задачи с полем, и запуске нового рабочего процесса в той же системе, из которой он был импортирован.

### <a name="error-message"></a>Сообщение об ошибке
 Произошла ошибка на шаге развертывания "Активация компонентов": поле с идентификатором [*GUID*], определенное в компоненте [*GUID*], найдено в текущем семействе веб-сайтов или на дочернем сайте.

### <a name="resolution"></a>Решение
 Эта ошибка является результатом конфликтов ИДЕНТИФИКАТОРов полей, происходящих из-за того, что проект Импорт рабочего процесса с возможностью повторного использования в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] не изменяет идентификаторы полей формы задач. При развертывании импортированного рабочего процесса на том же сервере, который содержит исходный рабочий процесс, происходит конфликт ИДЕНТИФИКАТОРов полей.

 Чтобы устранить эту проблему, используйте функцию поиска и замены, чтобы изменить значение атрибута идентификатора поля во всех импортированных файлах рабочего процесса.

## <a name="error-appears-when-a-renamed-imported-list-instance-is-run"></a>Ошибка появляется при выполнении переименованного экземпляра импортированного списка
 Эта проблема возникает при переименовании импортированного экземпляра списка и его запуске в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] .

### <a name="error-message"></a>Сообщение об ошибке
 Ошибка сборки: произошла ошибка на шаге развертывания "функции активации": файл Темплате\феатурес \\ [*имя*<em>компонента</em>*импорта проекта*] \филес\листс \\ [*старое*<em>имя списка</em>] \Schema.xml не существует.

### <a name="resolution"></a>Решение
 При импорте экземпляра списка атрибут с именем Кустомсчема добавляется в файл Elements.xml экземпляра списка. Elements.xml содержит путь к пользовательскому schema.xml для экземпляра списка. При переименовании экземпляра списка в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] путь развертывания для пользовательского schema.xml изменяется, но значение пути атрибута кустомсчема не обновляется. В результате экземпляр списка не может найти *schema.xml* файл по старому пути, указанному атрибутом кустомсчема при активации компонента.

 Чтобы устранить эту проблему, обновите путь к расположению развертывания файла *schema.xml* в атрибуте кустомсчема.

## <a name="sharepoint-debugging-session-terminated-by-iis"></a>Сеанс отладки SharePoint завершен службами IIS
 Эта проблема возникает, если задать точку останова в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] решении SharePoint, нажать клавишу **F5** , чтобы запустить ее, а затем остаться в точке останова дольше 90 секунд.

### <a name="error-message"></a>Сообщение об ошибке
 Отлаживаемый процесс веб-сервера был прерван службы IIS (IIS). Этого можно избежать, настроив параметры тестового опроса для пула приложений в IIS. Дополнительные сведения см. в справке.

### <a name="resolution"></a>Решение
 По умолчанию пул приложений IIS ожидает в течение 90 секунд ответа приложения перед закрытием приложения. Этот процесс называется «Проверка связи» приложения. Чтобы устранить эту проблему, можно либо увеличить время ожидания, либо полностью отключить проверку связи с приложением.

##### <a name="to-access-the-iis-app-pool-settings"></a>Доступ к параметрам пула приложений IIS

1. Откройте диспетчер служб IIS.

2. В области **подключения** разверните узел SharePoint Server и выберите узел **Пулы приложений** .

3. На странице **Пулы приложений** выберите пул приложений SharePoint (обычно "SharePoint-80"), а затем на панели " **действия** " выберите ссылку **Дополнительные параметры** .

4. Чтобы увеличить время ожидания до истечения времени ожидания IIS, измените значение параметра **проверить максимальное время отклика проверки связи (в секундах)** на значение, превышающее 90 секунд.

5. Чтобы отключить проверку связи IIS, установите для параметра **Проверка связи** **значение false**.

## <a name="auto-retract-leaves-orphaned-list-instance-in-sharepoint"></a>Автоматическое отзыв оставляет потерянный экземпляр списка в SharePoint
 Эта проблема возникает, если выполнить следующие действия.

1. Создайте определение списка с экземпляром списка в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] .

2. Нажмите клавишу **F5** , чтобы запустить решение.

3. Завершите отладку или закройте сайт SharePoint.

4. Снова откройте сайт SharePoint и откройте экземпляр списка.

### <a name="error-message"></a>Сообщение об ошибке
 Ошибка сервера в приложении «/».

### <a name="resolution"></a>Решение
 Это происходит из-за того, что после закрытия сеанса отладки решения SharePoint функция автоматического отзыва отзывает решение. При отзыве определение списка удаляется из SharePoint, но экземпляр списка не удаляется. Экземпляру списка требуется базовое определение списка.

 Чтобы устранить эту проблему, разверните решение, выбрав в строке меню пункт **построить**  >  **развертывание**. (Не отлаживать решение, нажав клавишу **F5** ). Затем удалите экземпляр списка в SharePoint.

## <a name="original-sharepoint-solution-is-replaced-by-an-exported-version"></a>Исходное решение SharePoint заменено экспортированной версией
 Если вы экспортируете решение SharePoint, импортируете решение в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] , а затем развертываете решение обратно на тот же сайт, из которого он был экспортирован, исходное решение SharePoint будет заменено. Эта проблема не возникает при развертывании решения на сервере, на котором не активировано исходное решение.

### <a name="error-message"></a>Сообщение об ошибке
 Отсутствует.

### <a name="resolution"></a>Решение
 Чтобы избежать перезаписи решения на сайте, с которого оно было экспортировано, измените идентификаторы GUID SolutionID и идентификаторы всех компонентов, импортированных в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] проект.

## <a name="error-appears-when-debugging-starts"></a>При запуске отладки появляется сообщение об ошибке
 При запуске отладки решения SharePoint в Visual Studio ошибка сигнализирует о том, что Visual Studio не удалось загрузить файл конфигурации Web.config, поскольку данный ключ отсутствует в словаре.

### <a name="error-message"></a>Сообщение об ошибке
 Не удалось загрузить файл конфигурации Web.config. Проверьте файл на наличие неверно сформированных XML-элементов и повторите попытку. Произошла следующая ошибка: данный ключ отсутствовал в словаре.

### <a name="resolution"></a>Решение
 Для решения проблемы следует убедиться, что значение свойства URL-адреса сайта проекта SharePoint в Visual Studio соответствует URL-адресу, назначенному зоне по умолчанию для сопоставлений альтернативного доступа веб-приложения. Использование для URL-адреса другой зоны, например интрасети, не решит проблему. URL-адрес сайта проекта и URL-адрес зоны по умолчанию должны совпадать. Чтобы получить доступ к альтернативным сопоставлениям доступа, откройте служебную программу центра администрирования SharePoint 2010, выберите ссылку **Управление приложениями** , а затем в разделе **веб-приложения** щелкните ссылку **настроить альтернативные сопоставления доступа** . Дополнительные сведения см. в статье [Создание зон для веб-приложений](/previous-versions/office/sharepoint-2007-products-and-technologies/cc263087(v=office.12)).

## <a name="see-also"></a>См. также раздел

- [Устранение неполадок при упаковке и развертывании SharePoint](../sharepoint/troubleshooting-sharepoint-packaging-and-deployment.md)
- [Сборка и отладка решений SharePoint](../sharepoint/building-and-debugging-sharepoint-solutions.md)
- [Отладка в Visual Studio](../debugger/debugger-feature-tour.md)