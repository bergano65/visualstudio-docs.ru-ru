---
title: 'Пошаговое руководство: Создание пользовательского шага развертывания для проектов SharePoint | Документация Майкрософт'
ms.custom: ''
ms.date: 02/02/2017
ms.technology:
- office-development
ms.topic: conceptual
dev_langs:
- VB
- CSharp
helpviewer_keywords:
- SharePoint commands
- SharePoint development in Visual Studio, extending deployment
author: TerryGLee
ms.author: tglee
manager: douge
ms.workload:
- office
ms.openlocfilehash: c74feaed6c108f9dcfb5f2b374a72c34526134b0
ms.sourcegitcommit: 0a8ac5f2a685270d9ca79bb39d26fd90099bfa29
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/09/2018
ms.locfileid: "51296155"
---
# <a name="walkthrough-create-a-custom-deployment-step-for-sharepoint-projects"></a>Пошаговое руководство: Создание пользовательского шага развертывания для проектов SharePoint
  При развертывании проекта SharePoint, Visual Studio выполняет ряд шагов развертывания в определенном порядке. Visual Studio включает многие встроенные шаги развертывания, но можно также создать свои собственные.  
  
 В этом пошаговом руководстве вы создадите пользовательский шаг развертывания для обновления решений на сервере, на котором выполняется SharePoint. Visual Studio включает встроенные шаги развертывания для многих задач, таких отзыва или добавления решений, но она не включает шага развертывания для обновления решений. По умолчанию при развертывании решения SharePoint, Visual Studio сначала отзывает решение (если она уже развернута) и затем выполняет повторное развертывание всего решения. Дополнительные сведения о встроенные шаги развертывания, см. в разделе [развертывание, публикация и обновление пакетов решений SharePoint](../sharepoint/deploying-publishing-and-upgrading-sharepoint-solution-packages.md).  
  
 В этом пошаговом руководстве описаны следующие задачи.  
  
-   Создание расширения Visual Studio, который выполняет две основные задачи:  
  
    -   Расширение определяет пользовательский шаг развертывания для обновления решений SharePoint.  
  
    -   Модуль создает расширения проекта, в котором определяется новая конфигурация развертывания, который представляет собой набор шагов развертывания, которые выполняются для данного проекта. Новая конфигурация развертывания включает пользовательский шаг развертывания и несколько встроенных шагов развертывания.  
  
-   Создайте две настраиваемые команды SharePoint, которые вызывает сборку расширения. Команды SharePoint представляют собой методы, которые могут быть вызваны для сборки расширений для использования API в серверную объектную модель для SharePoint. Дополнительные сведения см. в разделе [вызова объектной модели SharePoint](../sharepoint/calling-into-the-sharepoint-object-models.md).  
  
-   Построение пакета Visual Studio Extension (VSIX) для развертывания, обе сборки.  
  
-   Тестирование нового шага развертывания.  
  
## <a name="prerequisites"></a>Предварительные требования  
 Необходимы следующие компоненты на компьютере разработчика для выполнения этого пошагового руководства.  
  
- Поддерживаемые версии Windows, SharePoint и Visual Studio.
  
- Visual Studio SDK. В этом пошаговом руководстве использует **проект VSIX** шаблона в пакете SDK для создания пакета VSIX для развертывания расширения. Дополнительные сведения см. в разделе [расширения инструментов SharePoint в Visual Studio](../sharepoint/extending-the-sharepoint-tools-in-visual-studio.md).  
  
  Знание следующие основные понятия будут полезны, но не требуется для выполнения данного пошагового руководства:  
  
- Для SharePoint с помощью объектной модели сервера. Дополнительные сведения см. в разделе [использование объектной модели SharePoint Foundation на сервере](http://go.microsoft.com/fwlink/?LinkId=177796).  
  
- Решения SharePoint. Дополнительные сведения см. в разделе [Обзор решений](http://go.microsoft.com/fwlink/?LinkId=169422).  
  
- Обновление решений SharePoint. Дополнительные сведения см. в разделе [обновление решения](http://go.microsoft.com/fwlink/?LinkId=177802).  
  
## <a name="create-the-projects"></a>Создание проектов
 Для выполнения этого пошагового руководства, необходимо создать три проекта:  
  
- Проект VSIX, чтобы создать пакет VSIX для развертывания расширения.  
  
- Проект библиотеки классов, реализующий расширение. Этот проект должен быть предназначен для .NET Framework 4.5.  
  
- Проект библиотеки классов, который определяет настраиваемые команды SharePoint. Этот проект должен быть предназначен для .NET Framework 3.5.  
  
  Начало выполнения пошагового руководства по созданию проектов.  
  
#### <a name="to-create-the-vsix-project"></a>Создание проекта VSIX  
  
1.  Запустите [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)].  
  
2.  В строке меню выберите **Файл** > **Создать** > **Проект**.  
  
3.  В **новый проект** диалогового окна разверните узел **Visual C#** или **Visual Basic** узлов и нажмите кнопку **расширяемости** узла.  
  
    > [!NOTE]  
    >  **Расширяемости** узел доступен только в том случае, если установить пакет SDK для Visual Studio. Дополнительные сведения см. в разделе "Предварительные требования" ранее в этом разделе.  
  
4.  В верхней части диалоговое окно, выберите **.NET Framework 4.5** в списке версий .NET Framework.  
  
5.  Выберите **проект VSIX** шаблон, имя проекта **UpgradeDeploymentStep**, а затем выберите **ОК** кнопки.  
  
     [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] Добавляет **UpgradeDeploymentStep** проект **обозревателе решений**.  
  
#### <a name="to-create-the-extension-project"></a>Создание проекта расширения  
  
1.  В **обозревателе решений**, откройте контекстное меню узла решения UpgradeDeploymentStep, выберите **добавить**, а затем выберите **новый проект**.  
  
2.  В **новый проект** диалоговое окно последовательно раскройте элементы **Visual C#** или **Visual Basic** узлов, а затем выберите **Windows** узла.  
  
3.  В верхней части диалоговое окно, выберите **.NET Framework 4.5** в списке версий .NET Framework.  
  
4.  Выберите **библиотеки классов** шаблон проекта, присвойте проекту имя **DeploymentStepExtension**, а затем выберите **ОК** кнопки.  
  
     [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] Добавляет **DeploymentStepExtension** проекта в решение и открывает файл кода по умолчанию Class1.  
  
5.  Удалите файл Class1 код из проекта.  
  
#### <a name="to-create-the-sharepoint-command-project"></a>Чтобы создать проект команды SharePoint  
  
1.  В **обозревателе решений**, откройте контекстное меню узла решения UpgradeDeploymentStep, выберите **добавить**, а затем выберите **новый проект**.  
  
2.  В **новый проект** диалогового окна последовательно раскройте элементы **Visual C#** или **Visual Basic**, а затем выберите **Windows** узла.  
  
3.  В верхней части диалоговое окно, выберите **.NET Framework 3.5** в списке версий .NET Framework.  
  
4.  Выберите **библиотеки классов** шаблон проекта, присвойте проекту имя **SharePointCommands**, а затем выберите **ОК** кнопки.  
  
     Visual Studio добавляет **SharePointCommands** проекта в решение и открывает файл кода по умолчанию Class1.  
  
5.  Удалите файл Class1 код из проекта.  
  
## <a name="configure-the-projects"></a>Настройка проектов
 Прежде чем писать код для создания пользовательского шага развертывания, необходимо добавить файлы кода и ссылки на сборки, и необходимо настроить проекты.  
  
#### <a name="to-configure-the-deploymentstepextension-project"></a>Чтобы настроить проект DeploymentStepExtension
  
1.  В **DeploymentStepExtension** , добавьте два файла кода, которые имеют следующие имена:  
  
    -   UpgradeStep  
  
    -   DeploymentConfigurationExtension  
  
2.  Откройте контекстное меню для проекта DeploymentStepExtension, а затем выберите **добавить ссылку**.  
  
3.  На **Framework** вкладке, установите флажок для сборки System.ComponentModel.Composition.  
  
4.  На **расширения** вкладке, установите флажок для сборки Microsoft.VisualStudio.SharePoint и затем выберите **ОК** кнопки.  
  
#### <a name="to-configure-the-sharepointcommands-project"></a>Чтобы настроить проект SharePointCommands
  
1.  В **SharePointCommands** проекта, добавьте файл кода с именем команды.  
  
2.  В **обозревателе решений**, откройте контекстное меню на **SharePointCommands** узел проекта, а затем выберите **добавить ссылку**.  
  
3.  На **расширения** вкладке, установите флажки для следующих сборок и затем нажмите кнопку выбрать **ОК** кнопки  
  
    -   Microsoft.SharePoint  
  
    -   Microsoft.VisualStudio.SharePoint.Commands  
  
## <a name="define-the-custom-deployment-step"></a>Определение пользовательского шага развертывания
 Создайте класс, определяющий шаг развертывания обновления. Чтобы определить шаг развертывания, этот класс реализует <xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep> интерфейс. Реализуйте этот интерфейс, каждый раз, когда вы хотите определить пользовательский шаг развертывания.  
  
#### <a name="to-define-the-custom-deployment-step"></a>Для определения пользовательского шага развертывания  
  
1.  В **DeploymentStepExtension** проекта, откройте файл кода UpgradeStep и вставьте в него следующий код.  
  
    > [!NOTE]  
    >  После добавьте следующий код, проект будет содержать некоторые ошибки компиляции, но они будут исчезнуть при добавлении кода в последующих шагах.  
  
     [!code-csharp[SPExtensibility.ProjectExtension.UpgradeDeploymentStep#1](../sharepoint/codesnippet/CSharp/UpgradeDeploymentStep/deploymentstepextension/upgradestep.cs#1)]
     [!code-vb[SPExtensibility.ProjectExtension.UpgradeDeploymentStep#1](../sharepoint/codesnippet/VisualBasic/upgradedeploymentstep/deploymentstepextension/upgradestep.vb#1)]  
  
## <a name="create-a-deployment-configuration-that-includes-the-custom-deployment-step"></a>Создание конфигурации развертывания, в том числе пользовательского шага развертывания
 Создание расширения проекта для новой конфигурации развертывания, которая включает в себя несколько встроенных шагов развертывания и новый шаг развертывания обновления. Создание этого расширения, позволяет разработчикам SharePoint использование шага развертывания обновления в проектах SharePoint.  
  
 Для создания конфигурации развертывания, этот класс реализует <xref:Microsoft.VisualStudio.SharePoint.ISharePointProjectExtension> интерфейс. Реализуйте этот интерфейс, каждый раз, когда требуется создание расширения проекта SharePoint.  
  
#### <a name="to-create-the-deployment-configuration"></a>Для создания конфигурации развертывания  
  
1.  В **DeploymentStepExtension** проекта, откройте файл кода DeploymentConfigurationExtension и вставьте в него следующий код.  
  
     [!code-csharp[SPExtensibility.ProjectExtension.UpgradeDeploymentStep#2](../sharepoint/codesnippet/CSharp/UpgradeDeploymentStep/deploymentstepextension/deploymentconfigurationextension.cs#2)]
     [!code-vb[SPExtensibility.ProjectExtension.UpgradeDeploymentStep#2](../sharepoint/codesnippet/VisualBasic/upgradedeploymentstep/deploymentstepextension/deploymentconfigurationextension.vb#2)]  
  
## <a name="create-the-custom-sharepoint-commands"></a>Создавать настраиваемые команды SharePoint
 Создайте два пользовательских команд, которые вызывают серверную объектную модель для SharePoint. Одна команда определяет ли уже развертывания решения; Вторая обновляет решение.  
  
#### <a name="to-define-the-sharepoint-commands"></a>Для определения команды SharePoint  
  
1.  В **SharePointCommands** проекта, откройте файл кода команды и вставьте в него следующий код.  
  
     [!code-csharp[SPExtensibility.ProjectExtension.UpgradeDeploymentStep#4](../sharepoint/codesnippet/CSharp/UpgradeDeploymentStep/SharePointCommands/Commands.cs#4)]
     [!code-vb[SPExtensibility.ProjectExtension.UpgradeDeploymentStep#4](../sharepoint/codesnippet/VisualBasic/upgradedeploymentstep/sharepointcommands/commands.vb#4)]  
  
## <a name="checkpoint"></a>Контрольная точка  
 На этом этапе в руководстве весь код пользовательского шага развертывания и команд SharePoint — теперь в проектах. Создавайте их, чтобы убедиться в том, что они компилируется без ошибок.  
  
#### <a name="to-build-the-projects"></a>Для сборки проектов  
  
1.  В **обозревателе решений**, откройте контекстное меню для **DeploymentStepExtension** проекта, а затем выберите **построения**.  
  
2.  Откройте контекстное меню для **SharePointCommands** проекта, а затем выберите **построения**.  
  
## <a name="create-a-vsix-package-to-deploy-the-extension"></a>Создание пакета VSIX для развертывания расширения
 Чтобы развернуть расширение, используйте проекта VSIX в решении для создания пакета VSIX. Во-первых настройте пакет VSIX, изменив файл source.extension.vsixmanifest проекта VSIX. Затем создайте пакет VSIX, построения решения.  
  
#### <a name="to-configure-and-create-the-vsix-package"></a>Настройка и создание пакета VSIX  
  
1.  В **обозревателе решений**в разделе **UpgradeDeploymentStep** проекта, откройте контекстное меню для **source.extension.vsixmanifest** файл, а затем выберите  **Откройте**.  
  
     Visual Studio открывает файл в редакторе манифестов. Файл source.extension.vsixmanifest является основой для файл extension.vsixmanifest, требующий всех пакетов VSIX. Дополнительные сведения об этом файле см. в разделе [Справочник по схеме 1.0 VSIX расширения](https://msdn.microsoft.com/76e410ec-b1fb-4652-ac98-4a4c52e09a2b).  
  
2.  В **название продукта** введите **шаг развертывания обновления для проектов SharePoint**.  
  
3.  В **автор** введите **Contoso**.  
  
4.  В **описание** введите **предоставляет пользовательский шаг развертывания обновления, можно использовать в проектах SharePoint**.  
  
5.  В **активы** вкладка редактора выберите **New** кнопки.  
  
     **Добавить новый актив** откроется диалоговое окно.  
  
6.  В **тип** выберите **Microsoft.VisualStudio.MefComponent**.  
  
    > [!NOTE]  
    >  Это значение соответствует `MefComponent` элемент в файл extension.vsixmanifest. Этот элемент задает имя сборки расширения в пакете VSIX. Дополнительные сведения см. в разделе [MEFComponent элемент (Схема VSX)](/previous-versions/visualstudio/visual-studio-2010/dd393736\(v\=vs.100\)).  
  
7.  В **источника** выберите **проект в текущем решении**.  
  
8.  В **проекта** выберите **DeploymentStepExtension**, а затем выберите **ОК** кнопки.  
  
9. В редакторе манифеста выберите **New** еще раз.  
  
     **Добавить новый актив** откроется диалоговое окно.  
  
10. В **тип** , введите **SharePoint.Commands.v4**.  
  
    > [!NOTE]  
    >  Этот элемент задает пользовательское расширение, которое вы хотите включить в расширение Visual Studio. Дополнительные сведения см. в разделе [активов элемент (Схема VSX)](https://msdn.microsoft.com/9fcfc098-edc7-484b-9d4c-acd17829d737).  
  
11. В **источника** выберите **проект в текущем решении**.  
  
12. В **проекта** выберите **SharePointCommands**, а затем выберите **ОК** кнопки.  
  
13. В строке меню выберите **построения** > **построить решение**и убедитесь, что решение компилируется без ошибок.  
  
14. Убедитесь, что в выходную папку построения для проекта UpgradeDeploymentStep теперь содержит файл UpgradeDeploymentStep.vsix.  
  
     По умолчанию является выходной папке сборки... папку \bin\debug в папке, содержащей файл проекта.  
  
## <a name="prepare-to-test-the-upgrade-deployment-step"></a>Подготовка к тестированию шага развертывания обновления
 Чтобы протестировать шаг развертывания обновления, необходимо сначала развернуть примера решения на сайте SharePoint. Запустите отладку расширения в экспериментальном экземпляре Visual Studio. Затем создайте определение списка и экземпляр списка, чтобы использовать для тестирования на этапе развертывания и затем развернуть их на сайте SharePoint. Затем измените определение списка и экземпляра списка и повторно развернуть их, чтобы продемонстрировать, как процесс развертывания по умолчанию перезаписывает решения на сайте SharePoint.  
  
 Далее в этом пошаговом руководстве вы измените определения списка и экземпляра списка, и вы сможете обновлять их на сайте SharePoint.  
  
#### <a name="to-start-debugging-the-extension"></a>Чтобы начать отладку расширения  
  
1.  Перезапустите Visual Studio от имени администратора и откройте решение UpgradeDeploymentStep.  
  
2.  В проекте DeploymentStepExtension, откройте файл кода UpgradeStep и затем добавьте точку останова в первой строке кода в `CanExecute` и `Execute` методы.  
  
3.  Начать отладку, выбрав **F5** ключа или в строке меню выберите **Отладка** > **начать отладку**.  
  
4.  Visual Studio устанавливает расширение для %UserProfile%\AppData\Local\Microsoft\VisualStudio\11.0Exp\Extensions\Contoso\Upgrade шага развертывания для SharePoint Projects\1.0 и запускает экспериментальный экземпляр Visual Studio. В этом экземпляре Visual Studio протестируем шаг развертывания обновления.  
  
#### <a name="to-create-a-sharepoint-project-with-a-list-definition-and-a-list-instance"></a>Создание проекта SharePoint с помощью определения списка и экземпляра списка  
  
1. В экспериментальном экземпляре Visual Studio в строке меню выберите **файл** > **New** > **проекта**.  
  
2. В **новый проект** диалогового окна разверните узел **Visual C#** узел или **Visual Basic** узел, разверните **SharePoint** узел и нажмите кнопку **2010** узла.  
  
3. Убедитесь, что в верхней части диалогового **.NET Framework 3.5** появится в списке версий .NET Framework.  
  
    Проекты для [!INCLUDE[wss_14_long](../sharepoint/includes/wss-14-long-md.md)] и [!INCLUDE[moss_14_long](../sharepoint/includes/moss-14-long-md.md)] требуется этой версии платформы .NET Framework.  
  
4. В списке шаблонов проектов выберите **проект SharePoint 2010**, назовите проект **EmployeesListDefinition**, а затем выберите **ОК** кнопки.  
  
5. В **мастер настройки SharePoint**, введите URL-адрес сайта, который вы хотите использовать для отладки.  
  
6. В разделе **Какова степень доверия для этого решения SharePoint**, выберите **развернуть как решение фермы** переключатель.  
  
   > [!NOTE]  
   >  Шаг развертывания обновления не поддерживает изолированные решения.  
  
7. Выберите **Готово** кнопки.  
  
    [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] Создает проект EmployeesListDefinition.  
  
8. Откройте контекстное меню для проекта EmployeesListDefinition, выберите **добавить**, а затем выберите **новый элемент**.  
  
9. В **Добавление нового элемента — EmployeesListDefinition** диалоговое окно последовательно раскройте элементы **SharePoint** узел, а затем выберите **2010** узел.  
  
10. Выберите **списка** шаблона элемента, присвойте элементу имя **список сотрудников**и нажмите кнопку **добавить** кнопки.  
  
     Откроется мастер настройки SharePoint  
  
11. На **Выбор параметров списка** странице, проверьте следующие параметры и нажмите кнопку **Готово** кнопки:  
  
    1. **Список сотрудников** отображается в **какое имя вы хотите отобразить списка?** поле.  
  
    2. **Создать настраиваемый список на основе:** переключатель выбирается.  
  
    3. **По умолчанию (пустой)** выбирается в **создать настраиваемый список на основе:** списка.  
  
       [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] Создает элемент списка сотрудников со столбцом заголовка и один пустой экземпляр и откроется конструктор списка.  
  
12. В конструкторе списка на **столбцы** вкладке, выберите **введите имя нового или существующего столбца** строки, а затем добавьте следующие столбцы в **отображаемое имя столбца** списка:  
  
    1.  Имя  
  
    2.  Компания  
  
    3.  Рабочий телефон  
  
    4.  E-Mail  
  
13. Сохраните все файлы, а затем закройте конструктор списка.  
  
14. В **обозревателе решений**, разверните **список сотрудников** узел, а затем разверните **экземпляр списка сотрудников** дочерний узел.  
  
15. В *Elements.xml* файл, замените имя по умолчанию XML-данные в этот файл следующий код XML. Этот XML-код изменяет имя списка, чтобы **сотрудников** и добавляет сведения для сотрудника, который с именем Jim Hance.  
  
    ```xml  
    <?xml version="1.0" encoding="utf-8"?>  
    <Elements xmlns="http://schemas.microsoft.com/sharepoint/">  
      <ListInstance Title="Employees"  
                    OnQuickLaunch="TRUE"  
                    TemplateType="10000"  
                    Url="Lists/Employees"  
                    Description="Simple list to test upgrade deployment step">  
        <Data>  
          <Rows>  
            <Row>  
              <Field Name="Title">Hance</Field>  
              <Field Name="FirstName">Jim</Field>  
              <Field Name="Company">Contoso</Field>  
              <Field Name="Business Phone">555-555-5555</Field>  
              <Field Name="E-Mail">jim@contoso.com</Field>  
            </Row>  
          </Rows>  
        </Data>  
      </ListInstance>  
    </Elements>  
    ```  
  
16. Сохраните и закройте *Elements.xml* файл.  
  
17. Откройте контекстное меню для проекта EmployeesListDefinition, а затем выберите **откройте** или **свойства**.  
  
     Откроется конструктор свойства.  
  
18. На **SharePoint** вкладке Очистить **автоматически отозвать после отладки** флажок, а затем сохранить свойства.  
  
#### <a name="to-deploy-the-list-definition-and-list-instance"></a>Для развертывания определения списка и экземпляра списка  
  
1.  В **обозревателе решений**, выберите **EmployeesListDefinition** узел проекта.  
  
2.  В **свойства** окна, убедитесь, что **активная конфигурация развертывания** свойству **по умолчанию**.  
  
3.  Выберите **F5** ключа, либо в строке меню выберите **Отладка** > **начать отладку**.  
  
4.  Убедитесь, что сборка проекта выполняется успешно, что веб-браузере открывается на сайте SharePoint, **перечислены** содержит новый элемент в панели быстрого запуска **сотрудников** списка и что  **Сотрудники** список содержит запись для Jim Hance.  
  
5.  Закройте веб-браузер.  
  
#### <a name="to-modify-the-list-definition-and-list-instance-and-redeploy-them"></a>Чтобы изменить определение списка и экземпляра списка, а также повторно развернуть их  
  
1.  В проекте EmployeesListDefinition, откройте *Elements.xml* файл, который является дочерним объектом **экземпляр списка сотрудников** элемент проекта.  
  
2.  Удалить `Data` элемент и его дочерние элементы, чтобы удалить запись для Jim Hance из списка.  
  
     Когда вы закончите, файл должен содержать следующий код XML.  
  
    ```xml  
    <?xml version="1.0" encoding="utf-8"?>  
    <Elements xmlns="http://schemas.microsoft.com/sharepoint/">  
      <ListInstance Title="Employees"  
                    OnQuickLaunch="TRUE"  
                    TemplateType="10000"  
                    Url="Lists/Employees"  
                    Description="Simple list to test upgrade deployment step">  
      </ListInstance>  
    </Elements>  
    ```  
  
3.  Сохраните и закройте *Elements.xml* файл.  
  
4.  Откройте контекстное меню для **список сотрудников** элемента проекта, а затем выберите **откройте** или **свойства**.  
  
5.  В конструкторе списка, выберите **представления** вкладки.  
  
6.  В **выбранные столбцы** выберите **вложения**и нажмите кнопку < ключ, чтобы переместить этот столбец в **доступные столбцы** списка.  
  
7.  Повторите предыдущий шаг, чтобы переместить **рабочий телефон** столбец из **выбранные столбцы** список **доступные столбцы** списка.  
  
     Это действие удаляет эти поля из представления по умолчанию для **сотрудников** списка на сайте SharePoint.  
  
8.  Начать отладку, выбрав **F5** ключа или в строке меню выберите **Отладка** > **начать отладку**.  
  
9. Убедитесь, что **конфликтов развертывания** откроется диалоговое окно.  
  
     Это диалоговое окно отображается при попытке развернуть решение (экземпляр списка) Visual Studio на сайте SharePoint, к которому это решение уже развернуто. Это диалоговое окно не будет отображаться при выполнении шага развертывания обновления позже в этом пошаговом руководстве.  
  
10. В **конфликтов развертывания** диалоговое окно, выберите **автоматически устранить** переключатель.  
  
     Visual Studio удаляет экземпляр списка на сайте SharePoint, развертывает элемент списка в проекте и затем открывает сайт SharePoint.  
  
11. В **перечислены** разделе панели быстрого запуска выберите **сотрудников** списке, а затем проверьте следующие сведения:  
  
    -   **Вложения** и **домашний телефон** столбцы не отображаются в этом представлении списка.  
  
    -   Этот список пуст. При использовании **по умолчанию** конфигурации развертывания, чтобы повторно развернуть решение, **сотрудников** список был заменен новым пустым списком в проекте.  
  
## <a name="test-the-deployment-step"></a>Тестирование на этапе развертывания
 Теперь вы готовы для тестирования на этапе развертывания обновления. Во-первых необходимо добавьте элемент в экземпляр списка в SharePoint. Измените определение списка и экземпляра списка, обновлять их на сайте SharePoint и убедитесь, что шаг развертывания обновления не перезаписывает новый элемент.  
  
#### <a name="to-manually-add-an-item-to-the-list"></a>Чтобы вручную добавить элемент в список  
  
1.  На ленте на сайте SharePoint в разделе **Инструменты списка** вкладке, выберите **элементы** вкладки.  
  
2.  В **New** группе, выберите **новый элемент**.  
  
     Кроме того, вы можете **добавить новый элемент** ссылку в сам список элементов.  
  
3.  В **сотрудников — новый элемент** окно в **Title** введите **Manager средства**.  
  
4.  В **имя** введите **Энди**.  
  
5.  В **компании** введите **Contoso**.  
  
6.  Выберите **Сохранить** кнопку, убедитесь, что новый элемент отображается в списке и затем закройте веб-браузера.  
  
     Далее в этом пошаговом руководстве будет использовать этот элемент, чтобы убедиться, что шаг развертывания обновления не перезаписывает содержимое этого списка.  
  
#### <a name="to-test-the-upgrade-deployment-step"></a>Для тестирования на этапе развертывания обновления  
  
1. В экспериментальном экземпляре Visual Studio в **обозревателе решений**, откройте контекстное меню для **EmployeesListDefinition** узел проекта, а затем выберите **свойства**.  
  
    Откроется редактор или конструктор свойств.  
  
2. На **SharePoint** вкладке **активная конфигурация развертывания** свойства **обновление**.  
  
    Эта конфигурация развертывания включает в себя новый шаг развертывания обновления.  
  
3. Откройте контекстное меню для **список сотрудников** элемента проекта, а затем выберите **свойства** или **откройте**.  
  
    Откроется редактор или конструктор свойств.  
  
4. На **представления** вкладке, выберите **электронной почты** столбца и нажмите кнопку **<** клавишу, чтобы переместить этот столбец из **выбранные столбцы**список **доступные столбцы** списка.  
  
    Это действие удаляет эти поля из представления по умолчанию для **сотрудников** списка на сайте SharePoint.  
  
5. Начать отладку, выбрав **F5** ключа или в строке меню выберите **Отладка** > **начать отладку**.  
  
6. Убедитесь, что выполнение кода в другом экземпляре Visual Studio будет приостановлено в точке останова, заданной ранее в `CanExecute` метод.  
  
7. Выберите **F5** ключа еще раз, либо, в строке меню выберите **Отладка** > **Продолжить**.  
  
8. Убедитесь, что выполнение кода будет приостановлено в точке останова, заданной ранее в `Execute` метод.  
  
9. Выберите **F5** ключа, либо в строке меню выберите **Отладка** > **Продолжить** последний раз.  
  
     Веб-браузере откроется сайт SharePoint.  
  
10. В **перечислены** раздел на панели быстрого запуска выберите **сотрудников** списке, а затем проверьте следующие сведения:  
  
    - Элемент, который вы вручную добавлен ранее (для Энди manager средства) является по-прежнему в списке.  
  
    - **Рабочий телефон** и **адрес электронной почты** столбцы не отображаются в этом представлении списка.  
  
      **Обновление** конфигурация развертывания изменяет существующий **сотрудников** экземпляр списка на сайте SharePoint. Если вы использовали **по умолчанию** конфигурации развертывания, а не **обновление** конфигурации, может возникнуть конфликт развертывания. Visual Studio может разрешить конфликт, заменив **сотрудников** списка, а элемент для Энди, управляющую средства будут удалены.  
  
## <a name="clean-up-the-development-computer"></a>Очистка компьютера разработчика
 После завершения тестирования шага развертывания обновления, удалите экземпляр списка и определение списка с сайта SharePoint и удалите расширение шага развертывания из Visual Studio.  
  
#### <a name="to-remove-the-list-instance-from-the-sharepoint-site"></a>Чтобы удалить экземпляр списка на сайте SharePoint  
  
1.  Откройте **сотрудников** список на сайте SharePoint, если список еще не открыто.  
  
2.  На ленте на сайте SharePoint, выберите **Инструменты списка** вкладке, а затем выберите **списка** вкладки.  
  
3.  В **параметры** группе, выберите **параметры списка** элемента.  
  
4.  В разделе **разрешения и управление**, выберите **удалить этот список** команды, выберите **ОК** для подтверждения того, что вы хотите отправить список в корзину, а затем закройте веб-узла Обозреватель.  
  
#### <a name="to-remove-the-list-definition-from-the-sharepoint-site"></a>Чтобы удалить определение списка с сайта SharePoint  
  
1.  В экспериментальном экземпляре Visual Studio в строке меню выберите **построения** > **Retract**.  
  
     Visual Studio отзывается определение списка с сайта SharePoint.  
  
#### <a name="to-uninstall-the-extension"></a>Удаление расширения  
  
1.  В экспериментальном экземпляре Visual Studio в строке меню выберите **средства** > **расширения и обновления**.  
  
     Появится диалоговое окно **Расширения и обновления**.  
  
2.  В список расширений, выберите **шаг развертывания обновления для проектов SharePoint**, а затем выберите **удаления** команды.  
  
3.  В появившемся диалоговом окне, выберите **Да** для подтверждения того, что вы хотите удалить расширение, а затем выберите **Перезагрузить сейчас** для завершения удаления.  
  
4.  Закройте оба экземпляра Visual Studio (экспериментальный экземпляр и экземпляр Visual Studio, в котором открыто решение UpgradeDeploymentStep).  
  
## <a name="see-also"></a>См. также
 [Расширение SharePoint упаковки и развертывания](../sharepoint/extending-sharepoint-packaging-and-deployment.md)  
  
