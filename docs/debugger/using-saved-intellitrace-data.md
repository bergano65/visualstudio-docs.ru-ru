---
title: Использование данных IntelliTrace | Документация Майкрософт
description: Использование файла IntelliTrace (.iTrace) для запуска отладки в определенной точке выполнения. Этот файл содержит сведения, которые функция Intellitrace фиксирует во время работы приложения.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
f1_keywords:
- vs.historicaldebug.norepro
helpviewer_keywords:
- iTrace files
- IntelliTrace, log files
- IntelliTrace log files
- .iTrace files
ms.assetid: 9f2cce86-345a-4e22-84ba-91542d81e67a
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 2c81020b7c1933075f2faee026be17dd0fec4319
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99884446"
---
# <a name="using-saved-intellitrace-data-c-visual-basic-c"></a>Использование данных IntelliTrace (C#, Visual Basic, C++)

Переходите к определенным точкам выполнения приложения при запуске отладки из файла журнала IntelliTrace (.iTrace). Этот файл может содержать события, исключения, потоки, шаги теста, модули и другие системные сведения, которые фиксирует IntelliTrace во время работы приложения.

 Убедитесь в наличии следующих элементов.

- Совпадающие файлы исходного кода и файлы символов (PDB) для кода приложения. В противном случае Visual Studio не удастся разрешить местоположения исходного кода, и отобразится сообщение "Символы не найдены". Дополнительные сведения см. в статьях [Указание файлов символов (.pdb) и файлов с исходным кодом](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md) и [Диагностика проблем в развертывании](../debugger/diagnose-problems-after-deployment.md).

- Visual Studio Enterprise (не Professional и не Community) на компьютере разработчика или на другом компьютере для открытия ITRACE-файлов

- ITRACE-файл из одного из следующих источников:

    |**Источник**|**См. разделы**|
    |----------------|-------------|
    |Сеанс IntelliTrace в Visual Studio Enterprise (но не в выпусках Professional или Community)|[Возможности IntelliTrace](../debugger/intellitrace-features.md)|
    |Microsoft Monitoring Agent либо отдельно, либо вместе с System Center 2012 R2 Operations Manager для веб-приложений ASP.NET и приложений SharePoint, работающих в развертывании|-   [Диагностика проблем после развертывания](../debugger/diagnose-problems-after-deployment.md)<br />-   [Новые возможности для System Center 2012 R2 Operations Manager](/previous-versions/system-center/system-center-2012-R2/dn249700(v=sc.12))|

## <a name="what-do-you-want-to-do"></a><a name="GetStarted"></a> Выберите действие

- [Открытие журнала IntelliTrace](#Open)

- [Изучение журнала IntelliTrace](#Understand)

- [Запуск отладки из журнала IntelliTrace](#StartDebugging)

## <a name="open-an-intellitrace-log"></a><a name="Open"></a> Открытие журнала IntelliTrace
 Откройте ITRACE-файл на компьютере с Visual Studio Enterprise.

- Двойным щелчком откройте ITRACE-файл вне Visual Studio или откройте его из Visual Studio.

     \- или -

- Если ITRACE-файл прикреплен к рабочему элементу Team Foundation Server, выполните следующие действия в рабочем элементе.

  - В разделе **Все ссылки** найдите ITRACE-файл. Откройте его.

    \- или -

  - В разделе **Шаги для воспроизведения** выберите ссылку **IntelliTrace** .

> [!TIP]
> Если файл IntelliTrace был закрыт во время отладки, его можно легко открыть снова. Перейдите в меню **Отладка** и выберите **IntelliTrace**, **Показать сводку журнала**. Можно также выбрать **Показать сводку журнала** в окне **IntelliTrace** . Эта команда доступна только при отладке с помощью IntelliTrace.

## <a name="understand-the-intellitrace-log"></a><a name="Understand"></a> Изучение журнала IntelliTrace
 Некоторые из следующих разделов в ITRACE-файле отображаются только в том случае, если данные собраны из определенного источника, например приложений SharePoint.

|**Раздел**|**Содержит**|**Источник сбора**|
|-----------------|------------------|---------------------------|
|[Нарушения производительности](#Performance)|События производительности с вызовами функций, превышающими заданный порог|Microsoft Monitoring Agent (изолированный сборщик или с System Center 2012 R2 Operations Manager для веб-приложений ASP.NET, размещенных в IIS)|
|[Данные исключения](#ExceptionData)|Исключения, включая полный стек вызова для каждого исключения|Все источники|
|[Анализ](#Analysis)|Только для приложений SharePoint 2010 и SharePoint 2013. Выполнение диагностики событий IntelliTrace и SharePoint, например событий отладчика, событий ULS, необработанных исключений и других данных, записанных Microsoft Monitoring Agent.|Microsoft Monitoring Agent (изолированный сборщик или с System Center 2012 R2 Operations Manager)|
|[Сведения о системе](#SystemInfo)|Параметры и спецификации системы размещения|Все источники|
|[Список потоков](#ThreadsList)|Потоки, которые выполнялись во время сбора|Все источники|
|[Модули](#Modules)|Модули, которые целевой процесс загрузил в порядке их загрузки.|Все источники|
|[Веб-запрос](#Modules)|Данные веб-запросов для веб-приложений IIS в рабочей среде, а также SharePoint 2010 и SharePoint 2013|Microsoft Monitoring Agent и изолированный сборщик|

 Ниже приведены некоторые рекомендации, помогающие найти сведения в каждом разделе.

- Для сортировки данных нажмите заголовок столбца.

- Используйте поле поиска для фильтрации данных. Поиск в виде обычного текста работает во всех столбцах за исключением столбцов времени. Можно также фильтровать поиск по конкретным столбцам с применением одного фильтра на столбец. Введите имя столбца без пробелов, с двоеточием ( **:** ) и значением для поиска. После него введите точку с запятой ( **;** ), чтобы добавить другой столбец и искомое значение.

     Например, для поиска событий производительности, которые содержат слово "медленный" в столбце **Описание** введите:

     `Description:slow`

## <a name="start-debugging-from-an-intellitrace-log"></a><a name="StartDebugging"></a> Запуск отладки из журнала IntelliTrace

### <a name="performance-violations"></a><a name="Performance"></a> Нарушения производительности
 Просмотрите события производительности, записанные для приложения. Можно скрывать события, которые происходят нечасто.

##### <a name="to-start-debugging-from-a-performance-event"></a>Запуск отладки из события производительности

1. В области **Нарушения производительности** просмотрите записанные события производительности, значения их полного времени выполнения и другие данные о событиях. Затем более глубоко проанализируйте методы, вызванные во время конкретного события производительности.

     ![Просмотр сведений о событии производительности](../debugger/media/ffr_itsummarypageperformance.png "FFR_ITSummaryPagePerformance")

     Можно также просто открыть событие двойным щелчком.

2. На странице событий проверьте время исполнения этих вызовов. Найдите медленный вызов в дереве выполнения.

     Самые медленные вызовы отображаются в отдельном разделе, если имеется несколько вызовов, вложенных друг в друга или размещенных иначе.

3. Разверните этот вызов, чтобы просмотреть все вложенные вызовы и значения параметров, которые были записаны в тот момент времени.

     (Клавиатура: для отображения и сворачивания вложенного вызова нажмите клавишу **Стрелка вправо** или **Стрелка влево**, соответственно. Для отображения и скрытия значений параметров для вложенного вызова нажмите клавишу **Пробел** .)

     Запустите отладку из этого вызова.

     ![Начало отладки с вызова метода](../debugger/media/ffr_itsummarypageperformancemethodscalled.png "FFR_ITSummaryPagePerformanceMethodsCalled")

     Также можно двойным щелчком открыть вызов или нажать клавишу **Ввод** .

     Если метод находится в коде приложения, Visual Studio перейдет к этому методу.

     ![Переход к коду приложения из события производительности](../debugger/media/ffr_itsummarypageperformancegotocode.png "FFR_ITSummaryPagePerformanceGoToCode")

     Теперь можно просмотреть другие записанные значения, стек вызова, выполнить пошаговый обход кода или использовать окно **IntelliTrace** для [перемещения вперед или назад "по времени" между другими методами](../debugger/intellitrace.md) , которые вызывались в ходе этого события производительности.

### <a name="exception-data"></a><a name="ExceptionData"></a> Данные исключения
 Просмотрите исключения, возникшие в приложении и записанные для него. Можно группировать исключения с тем же типом и стеком вызова, чтобы видеть только самое последнее исключение.

##### <a name="to-start-debugging-from-an-exception"></a>Запуск отладки из исключения

1. В области **Данные исключения** просмотрите записанные события исключения, их типы, сообщения и время возникновения исключений. Чтобы глубже изучить код, начните отладку из последнего события в группе исключений.

     ![Начало отладки с события исключения](../debugger/media/ffr_itsummarypageexception.png "FFR_ITSummaryPageException")

     Можно также просто открыть событие двойным щелчком. Если события не сгруппированы, выберите **Отладить это событие**.

     Если исключение возникло в коде приложения, Visual Studio переходит туда, где произошло исключение.

     ![Переход к коду приложения из события исключения](../debugger/media/ffr_itsummarypageexceptiongotocode.png "FFR_ITSummaryPageExceptionGoToCode")

     Теперь можно просмотреть другие записанные значения, стек вызова или использовать окно **IntelliTrace** для [перемещения вперед или назад "по времени" между различными записанными событиями](../debugger/intellitrace.md), по связанному с ними коду и значениям, записанным в эти моменты времени.

    |**Столбец**|**Отображает**|
    |----------------|-------------------|
    |**Тип**|Тип исключения .NET|
    |**Последнее сообщение** для группированных исключений или **Сообщение** для несгруппированных исключений|Сообщение, передаваемое исключением|
    |**Число** для сгруппированных исключений|Количество возникновений исключения|
    |**Идентификатор потока** для несгруппированных исключений|Идентификатор потока, вызвавшего исключение|
    |**Последнее время события** или **Время события**|Отметка времени, записанная при создании исключения|
    |**Стек вызовов**|Стек вызовов для исключения.<br /><br /> Чтобы просмотреть стек вызовов, выберите исключение в списке. Стек вызовов отображается под списком исключений.|

### <a name="analysis"></a><a name="Analysis"></a> Анализ
 Проводите диагностику проблем с приложениями SharePoint 2010 и SharePoint 2013, используя идентификатор корреляции SharePoint, или просматривайте все необработанные исключения, обнаруженные Microsoft Monitoring Agent.

- Используйте идентификатор корреляции SharePoint для поиска соответствующего ему веб-запроса и событий. Выберите событие и затем запустите отладку в точке и в момент наступления события.

- Если Microsoft Monitoring Agent обнаружил необработанные исключения, выберите исключение и затем запустите отладку в точке и в момент возникновения исключения.

##### <a name="start-debugging-with-a-sharepoint-correlation-id"></a>Запуск отладки с идентификатором корреляции SharePoint

1. Скопируйте идентификатор корреляции SharePoint из его источника.

    Пример:

    ![IntelliTrace — ошибка SharePoint — корреляционный идентификатор](../debugger/media/sharepointerror_intellitrace.png "SharePointError_IntelliTrace")

2. Откройте ITRACE-файл, затем перейдите в меню **Анализ** и введите идентификатор корреляции SharePoint для просмотра соответствующего веб-запроса и записанных событий.

    ![Журнал IntelliTrace — ввод корреляционного идентификатора SharePoint](../debugger/media/entersharepointcorrelationid.png "EnterSharePointCorrelationID")

3. Просмотрите события в разделе **События запроса**. События отображаются сверху вниз в порядке, в котором они произошли.

   1. Выберите событие для просмотра подробных сведений о нем.

   2. Выберите **Начать отладку** , чтобы начать отладку в точке, где произошло событие.

      ![Файл журнала IntelliTrace — просмотр веб-запросов и событий](../debugger/media/entersharepointcorrelationid2.png "EnterSharePointCorrelationID2")

   Можно просмотреть эти типы событий SharePoint вместе с событиями IntelliTrace:

- **События профиля пользователя**

     Эти события происходят при загрузке SharePoint профиля пользователя, а также при считывании или изменении свойств профиля пользователя.

- **События унифицированной системы ведения журнала (ULS)**

     Microsoft Monitoring Agent записывает подмножество событий SharePoint ULS и этих полей:

    |**Поле IntelliTrace**|**Поле SharePoint ULS**|
    |----------------------------|------------------------------|
    |**ID**|**EventID**|
    |**Уровень**|**Уровень**|
    |**Идентификатор категории**|**Идентификатор категории**|
    |**Категория**|**Категория**|
    |**Область**|**Продукт**|
    |**Выходные данные**|**Сообщение**|
    |**Идентификатор корреляции**|**Идентификатор корреляции**|

##### <a name="start-debugging-from-an-unhandled-exception"></a>Запуск отладки из необработанного исключения

1. Выберите идентификатор корреляции SharePoint для исключения. Исключения группируются по типу и стеку вызовов.

2. (Необязательно) Разверните узел **Стек вызовов** , чтобы просмотреть стек вызовов для группы исключений.

3. Выберите **Исключение отладки** , чтобы начать отладку в точке и в момент возникновения исключения.

    ![Журнал IntelliTrace — необработанные исключения SharePoint](../debugger/media/sharepointunhandledexceptions_intellitrace.png "SharePointUnhandledExceptions_IntelliTrace")

   Пошаговые инструкции см. в статье [Пошаговое руководство. Отладка приложения SharePoint с помощью IntelliTrace](../sharepoint/walkthrough-debugging-a-sharepoint-application-by-using-intellitrace.md). Типы данных, регистрируемых агентом, см. в статье [Возможности IntelliTrace](../debugger/intellitrace-features.md).

### <a name="threads-list"></a><a name="ThreadsList"></a> Список потоков
 Изучите записанные потоки, которые работали в целевом процессе. Можно начать отладку с первого допустимого события IntelliTrace в выделенном потоке.

##### <a name="to-start-debugging-from-a-specific-thread"></a>Запуск отладки из конкретного потока

1. Выберите поток в разделе **Список потоков**.

2. В нижней части раздела **Список потоков** выберите **Начать отладку**. Можно также выбрать поток двойным щелчком.

    Чтобы начать отладку из места начала приложения, двойным щелчком выберите **Основной поток**. См. статью [Возможности IntelliTrace](../debugger/intellitrace-features.md).

   Данные потока, созданного пользователем, могут быть более полезными, чем потоки, создаваемые и управляемые сервером для размещенных в IIS веб-приложений.

|**Столбец**|**Отображает**|
|----------------|-------------------|
|**ID**|Идентификационный номер потока|
|**Name**|Имя потока. Безымянные потоки отображаются как "\<No Name>".|
|**Время начала**|Время создания потока|
|**Время окончания**|Время завершения выполнения потока|

##### <a name="to-start-debugging-from-a-specific-test-step"></a>Запуск отладки из конкретного шага тестирования

1. Разверните раздел **Сетка шагов теста**. Выберите шаг теста.

2. В нижней части раздела **Сетка шагов тестирования** выберите **Начать отладку**. Можно также двойным щелчком выбрать шаг теста.

     Это запускает отладку из первого допустимого события IntelliTrace после выбранного шага теста.

     Если тестовые данные существуют, IntelliTrace пытается разрешить связанную сборку Team Foundation Server, которая использовалось для выполнения тестового запуска. Если сборка найдена, связанные символы для приложения разрешаются автоматически.

|**Поле**|**Отображает**|
|---------------|-------------------|
|**Сеанс тестирования**|Записанные сеансы тестирования. Обычно существует только один такой сеанс. Этот список пуст, если тестовые данные были созданы с использованием произвольного тестирования вручную.|
|**Тестовый случай**|Тестовые случаи из выбранного сеанса тестирования. Этот список пуст, если тестовые данные были созданы с использованием произвольного тестирования вручную.|
|**Сетка шагов теста**|Шаги теста, которые были записаны с результатом тестирования "пройден" или "не пройден"|

### <a name="system-info"></a><a name="SystemInfo"></a> Сведения о системе
 В этом разделе приводятся сведения о системе, в которой размещено приложение, например сведения об оборудовании, операционной системе, сведения, характерные для среды и процесса.

### <a name="modules"></a><a name="Modules"></a> Модули
 В этом разделе перечислены модули, загруженные целевым процессом. Модули отображаются в порядке их загрузки.

|**Столбец**|**Отображает**|
|----------------|-------------------|
|**Имя модуля**|Имя файла модуля|
|**Путь к модулю**|Расположение на диске, где был загружен модуль|
|**Идентификатор модуля**|Уникальный идентификатор модуля, характерный для конкретной версии и соответствующий файлам символов (PDB). См. раздел [Finding symbol (.pdb) files and source files](specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).|

### <a name="where-can-i-get-more-information"></a>Где можно получить дополнительные сведения?
 [Использование автономного сборщика данных IntelliTrace](../debugger/using-the-intellitrace-stand-alone-collector.md)

 [Возможности IntelliTrace](../debugger/intellitrace-features.md)

 [Сбор дополнительных данных диагностики в ручных тестах](/azure/devops/test/mtm/collect-more-diagnostic-data-in-manual-tests?view=vsts&preserve-view=true)

 [IntelliTrace](../debugger/intellitrace.md)

#### <a name="forums"></a>Форумы
 [Отладчик Visual Studio](https://social.msdn.microsoft.com/Forums/en-US/home)

#### <a name="guidance"></a>Руководство
 [Тестирование при непрерывной доставке с использованием Visual Studio 2012, глава 6, "Средства тестирования"](/previous-versions/msp-n-p/jj159337(v=pandp.10))
