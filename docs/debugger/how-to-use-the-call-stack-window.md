---
title: Просмотр стека вызовов в отладчике | Документация Майкрософт
description: Использование окна "Стек вызовов" для просмотра вызовов функций и процедур, которые в данный момент находятся в стеке, в Visual Studio.
ms.custom: SEO-VS-2020, seodec18
ms.date: 10/29/2018
ms.topic: how-to
f1_keywords:
- vs.debug.callstack
dev_langs:
- CSharp
- VB
- FSharp
- C++
- JScript
- SQL
- aspx
helpviewer_keywords:
- threading [Visual Studio], displaying calls to or from
- functions [debugger], viewing code on call stack
- disassembly code
- breakpoints, Call Stack window
- debugging [Visual Studio], switching to another stack frame
- debugging [Visual Studio], Call Stack window
- Call Stack window, viewing source code for functions on the call stack
- stack, switching stack frames
- Call Stack window, viewing disassembly code for functions on the call stack
ms.assetid: 5154a2a1-4729-4dbb-b675-db611a72a731
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: adb56ddfa53356c00224082c2460137b3f2b3751
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99841020"
---
# <a name="view-the-call-stack-and-use-the-call-stack-window-in-the-debugger"></a>Просмотр стека вызовов и использование окна "Стек вызовов" в отладчике

С помощью окна **Стек вызовов** можно просматривать вызовы функций и процедур, которые в данный момент находятся в стеке. В окне **Стек вызовов** показан порядок вызова методов и функций. Стек вызовов хорошо подходит для изучения и анализа потока выполнения приложения.

Если [символы отладки](#bkmk_symbols) недоступны для части стека вызовов, в окне **Стек вызовов** может не получиться отобразить правильные сведения об этой части стека вызовов. Вместо них будет отображаться следующая информация.

`[Frames below may be incorrect and/or missing, no symbols loaded for name.dll]`

> [!NOTE]
> Окно **Стек вызовов** аналогично перспективе "Отладка" в некоторых интегрированных средах разработки, например Eclipse.

> [!NOTE]
> Отображаемые диалоговые окна и команды меню могут отличаться от описанных здесь в зависимости от текущих параметров или выпуска. Чтобы изменить параметры, выберите в меню **Сервис** пункт **Импорт и экспорт параметров**.  См. раздел [Сброс параметров](../ide/environment-settings.md#reset-settings).

## <a name="view-the-call-stack-while-in-the-debugger"></a>Просмотр стека вызовов в отладчике

- Во время отладки в меню **Отладка** выберите **Окна > Стек вызовов**.

  ![Окно стека вызовов](../debugger/media/dbg_basics_callstack_window.png "CallStackWindow")

Желтая стрелка указывает на кадр стека, в котором находится указатель выполнения. По умолчанию это кадр стека, сведения которого отображаются в окнах: исходного кода, **Локальные**, **Контрольные значения**, **Видимые** и **Дизассемблированный код**. Чтобы изменить контекст отладчика на другой кадр стека, [переключитесь на другой кадр стека](#bkmk_switch).

## <a name="display-non-user-code-in-the-call-stack-window"></a>Отображение непользовательского кода в окне "Стек вызовов"

- Щелкните правой кнопкой мыши в окне **Стек вызовов** и выберите в контекстном меню пункт **Показать внешний код**.

Непользовательский код — это любой код, который не отображается при включении режима [Только мой код](../debugger/just-my-code.md). В управляемом коде кадры непользовательского кода скрыты по умолчанию. Вместо кадров непользовательского кода отображается следующая запись.

`[<External Code>]`

## <a name="switch-to-another-stack-frame-change-the-debugger-context"></a><a name="bkmk_switch"></a> Переключение на другой кадр стека (изменение контекста отладчика)

1. В окне **Стек вызовов** щелкните правой кнопкой кадр стека, код и данные которого нужно просмотреть.

    Или можно дважды щелкнуть кадр в окне **Стек вызовов**, чтобы переключиться на этот кадр.

2. Выберите пункт **Перейти к кадру**.

     Рядом с выбранным кадром стека появится зеленая стрелка с фигурным концом. Указатель выполнения остается в исходном кадре, который по-прежнему отмечен желтой стрелкой. При выборе команд **Шаг** или **Продолжить** в меню **Отладка** выполнение продолжится с исходного, а не с выбранного кадра.

## <a name="view-the-source-code-for-a-function-on-the-call-stack"></a>Просмотр исходного кода функции в стеке вызовов

- В окне **Стек вызовов** щелкните правой кнопкой мыши функцию, исходный код которой нужно увидеть, и выберите пункт **К исходному коду**.

## <a name="run-to-a-specific-function-from-the-call-stack-window"></a>Выполнение кода до определенной функции из окна "Стек вызовов"

- В окне **Стек вызовов** выберите функцию, щелкните ее правой кнопкой мыши и выберите команду **Выполнить до курсора**.

## <a name="set-a-breakpoint-on-the-exit-point-of-a-function-call"></a>Установка точки останова в точке выхода вызова функции

- См. раздел [Установка точки останова в функции стека вызовов](../debugger/using-breakpoints.md#BKMK_Set_a_breakpoint_from_debugger_windows).

## <a name="display-calls-to-or-from-another-thread"></a>Отображение вызовов в другой поток или из него

- Щелкните правой кнопкой мыши в окне **Стек вызовов** и выберите пункт **Включить вызовы между потоками**.

## <a name="visually-trace-the-call-stack"></a>Визуальная трассировка стека вызовов

В Visual Studio Enterprise (только) можно просматривать карты кода для стека вызовов во время отладки.

- В окне **Стек вызовов** откройте контекстное меню. Выберите **Показать стек вызовов на карте кода** (**CTRL** + **SHIFT** +  **`** ).

    Дополнительные сведения см. в статье [Создание визуальной карты стека вызовов при отладке](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md).

![Отображение стека вызовов на карте кода](../debugger/media/dbg_basics_show_call_stack_on_code_map.gif "ShowCallStackOnCodeMap")

## <a name="view-the-disassembly-code-for-a-function-on-the-call-stack-c-c-visual-basic-f"></a>Просмотр дизассемблированного кода функции в стеке вызовов (C#, C++, Visual Basic, F#)

- В окне **Стек вызовов** щелкните правой кнопкой мыши функцию, дизассемблированный код которой нужно увидеть, и выберите пункт **К дизассемблированному коду**.

## <a name="change-the-optional-information-displayed"></a>Включение или отключение отображения дополнительных сведений

- Щелкните правой кнопкой мыши в окне **Стек вызовов** и установите или снимите флажок **Показать\<**_the information that you want_**>** .

## <a name="load-symbols-for-a-module-c-c-visual-basic-f"></a><a name="bkmk_symbols"></a> Загрузка символов для модуля (C#, C++, Visual Basic, F#)

В окне **Стек вызовов** можно загружать символы отладки для кода, для которого в данный момент нет загруженных отладочных символов. Это могут быть символы платформы .NET или системные символы, загруженные с общедоступных серверов символов корпорации Майкрософт, или символы в каталоге символов на компьютере, на котором производится отладка.

См. статью [Указание файлов символов (.pdb) и файлов с исходным кодом в отладчике Visual Studio](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).

### <a name="to-load-symbols"></a>Чтобы загрузить символы

1. В окне **Стек вызовов** щелкните правой кнопкой какой-либо кадр стека, для которого не загружены символы. Кадр затеняется.

2. Укажите на параметр **Загрузить символы**, а затем выберите **Серверы символов (Майкрософт)** (если доступно) или перейдите по пути к символам.

### <a name="to-set-the-symbol-path"></a>Установка пути к символам

1. В окне **Стек вызовов** выберите пункт **Параметры символов** из контекстного меню.

     Появится диалоговое окно **Параметры**, открытое на странице **Символы**.

2. Выберите **Параметры символов**.

3. В диалоговом окне **Параметры** щелкните значок "Папка".

     В поле **Места размещения файлов символов (.pdb)** появится курсор.

4. Введите путь к каталогу с символами на компьютере, на котором производится отладка. При локальной и удаленной отладке это путь на локальном компьютере.

5. Нажмите кнопку **OK**, чтобы закрыть диалоговое окно **Параметры**.

## <a name="see-also"></a>См. также

- [Смешанный код и отсутствующие данные в окне стека вызовов](../debugger/mixed-code-and-missing-information-in-the-call-stack-window.md)
- [Просмотр данных в отладчике](../debugger/viewing-data-in-the-debugger.md)
- [Указание файлов символов (PDB) и файлов с исходным кодом](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)
- [Использование точек останова](../debugger/using-breakpoints.md)