---
title: Отладка нескольких процессов | Документация Майкрософт
ms.date: 11/20/2018
ms.topic: conceptual
f1_keywords:
- vs.debug.programs
- vs.debug.processes.attaching
- vs.debug.activeprogram
- vs.debug.attaching
- vs.debug.attachedprocesses
dev_langs:
- CSharp
- VB
- FSharp
- C++
ms.assetid: bde37134-66af-4273-b02e-05b3370c31ab
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 160e219b6fc2ab314f8d0dd91043c18101f2c3a5
ms.sourcegitcommit: 1fc6ee928733e61a1f42782f832ead9f7946d00c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2019
ms.locfileid: "60097145"
---
# <a name="debug-multiple-processes-c-visual-basic-c"></a>Отладка нескольких процессов (C#, Visual Basic, C++)

Visual Studio поддерживает отладку решение, включающее несколько процессов. Можно запустить и переключения между процессами, прервать, по-прежнему и пошаговое выполнение исходного, остановить отладку и end или отсоединение от отдельных процессов.

## <a name="start-debugging-with-multiple-processes"></a>Начать отладку с использованием нескольких процессов

При более одного проекта в решении Visual Studio может выполняться независимо друг от друга, можно выбрать проект запускается отладчик. Текущий запускаемый проект отображается в полужирным шрифтом в **обозревателе решений**.

Чтобы сменить запускаемый проект, в **обозревателе решений**, щелкните правой кнопкой мыши другой проект и выберите **Назначить запускаемым проектом**.

Чтобы начать отладку проекта из **обозревателе решений** без внесения запускаемого проекта, щелкните правой кнопкой мыши проект и выберите **Отладка** > **запустить новый экземпляр** или **шаг с заходом в новый экземпляр**.

**Чтобы установить запускаемый проект или несколько проектов из решения свойства:**

1. Выберите решение в **обозревателе решений** , а затем выберите **свойства** значок в панели инструментов или щелкните правой кнопкой мыши решение и выберите **свойства**.

1. На **свойства** выберите **общие свойства** > **запускаемым проектом**.

   ![Изменение типа запуска для проекта](../debugger/media/dbg_execution_startmultipleprojects.png "DBG_Execution_StartMultipleProjects")

1. Выберите **текущее выделение**, **один запускаемый проект** и файл проекта или **несколько запускаемых проектов**.

   При выборе **несколько запускаемых проектов**, вы можете изменить порядок запуска и действие, выполняемое для каждого проекта: **Запуск**, **Запуск без отладки**, или **None**.

1. Выберите **применить**, или **ОК** применить и закрыть диалоговое окно.

### <a name="BKMK_Attach_to_a_process"></a> Присоединение к процессу

Отладчик может также *присоединить* к приложениям, выполняемым в процессах вне Visual Studio, включая на удаленных устройствах. После присоединения к приложению, можно использовать отладчик Visual Studio. Функции отладки может быть ограничена. Это зависит ли оно было создано с отладочной информацией, имеется ли доступ к исходному коду приложения и отслеживает ли JIT-компилятор отладочную информацию.

Дополнительные сведения см. в разделе [присоединение к выполняемым процессам](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md).

**Присоединение к выполняющемуся процессу:**

1. С запущенным приложением, выберите **Отладка** > **присоединение к процессу**.

   ![Присоединение к процессу-диалоговое окно](../debugger/media/dbg_attachtoprocessdlg.png "присоединение к процессу-диалоговое окно")

1. В **присоединение к процессу** диалоговое окно, выберите процесс, из **доступные процессы** , а затем выберите **Attach**.

>[!NOTE]
>Отладчик не присоединяется автоматически к дочернему процессу, который запущен отлаживаемым процессом, даже если дочерний проект находится в том же решении. Чтобы отладить дочерний процесс, присоединить к дочернему процессу после ее запуска, либо настроить редактор реестра Windows для запуска дочернего процесса в новом экземпляре отладчика.

### <a name="BKMK_Automatically_start_an_process_in_the_debugger"></a> Используйте редактор реестра на автоматический запуск процесса в отладчике

В некоторых случаях может потребоваться отладить код автозагрузки для приложения, которое запускается другим процессом. К ним относятся службы и действия пользовательской настройки. Может иметь отладчик запустится и автоматически подключится к приложению.

1. Запустите редактор реестра Windows, выполнив *regedit.exe*.

1. В редакторе реестра перейдите к **HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Image File Execution Options**.

1. Выберите папку приложения, которое требуется запустить в отладчике.

   Если приложение отсутствует в списке как дочерняя папка, щелкните правой кнопкой мыши **Image File Execution Options**выберите **New** > **ключ**и введите имя приложения. Или щелкните правой кнопкой мыши новый ключ в дереве выберите **Переименовать**, а затем введите имя приложения.

1. Щелкните правой кнопкой мыши новый ключ в виде дерева и выберите **New** > **строковое значение**.

1. Измените имя нового значения с **New Value #1** для `debugger`.

1. Щелкните правой кнопкой мыши **отладчик** и выберите **изменить**.

   ![Изменить строку](../debugger/media/dbg_execution_automaticstart_editstringdlg.png "диалоговое окно редактирования строки")

1. В **Изменение строкового** диалоговом окне `vsjitdebugger.exe` в **значение** поле, а затем выберите **ОК**.

   ![Запись автоматического запуска отладчика в regedit.exe](../debugger/media/dbg_execution_automaticstart_result.png "запись автоматического запуска отладчика в regedit.exe")

## <a name="BKMK_Switch_processes__break_and_continue_execution__step_through_source"></a> Отладка с использованием нескольких процессов
<a name="BKMK_Configure_the_execution_behavior_of_multiple_processes"></a>

При отладке приложения с несколькими процессами, команд отладчика критических, пошагового выполнения и возобновление влияют на все процессы по умолчанию. Например если процесс приостанавливается в точке останова, выполнение всех остальных процессов также приостанавливается. Можно изменить это принимаемое по умолчанию поведение, чтобы обрести больший контроль над целевыми объектами команд выполнения.

**Чтобы изменить режим, приостанавливаются все процессы при прерывании одного:**

- В разделе **средства** (или **Отладка**) > **параметры** > **отладки** > **Общие**установите или снимите **прерывать все процессы при прерывании одного** "флажок".

### <a name="BKMK_Break__step__and_continue_commands"></a> Команды прерывания, пошагового выполнения и продолжения выполнения

В следующей таблице описаны поведения отладки команды при **прерывать все процессы при прерывании одного** флажок является выделением или отменой выделения:

|**Команда**|Selected|Выбор отменен|
|-|-|-|
|**Отладка**  > **прервать все**|Все процессы приостанавливаются.|Все процессы приостанавливаются.|
|**Отладка** > **продолжить**|Все процессы возобновляются.|Все приостановленные процессы возобновляются.|
|**Отладка** > **шаг с заходом**, **шаг с обходом**, или **шаг с выходом**|Во время выполнения шага текущего процесса все процессы выполняются. <br />Затем все процессы приостанавливаются.|Текущий процесс выполняется пошагово. <br />Приостановленные процессы возобновляются. <br />Выполняемые процессы продолжают выполняться.|
|**Отладка** > **шаг с заходом в текущем процессе**, **шаг с обходом текущего процесса**, или **шаг с выходом текущего процесса**|Н/Д|Текущий процесс выполняется пошагово.<br />Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|
|Окно источника **точки останова**|Все процессы приостанавливаются.|Приостанавливается только процесс окна исходного кода.|
|Окно источника **выполнить до курсора**<br />Окно исходного кода должно находиться в текущем процессе.|Все процессы выполняются, а процесс в окне исходного кода выполняется до курсора и приостанавливается.<br />После этого приостанавливаются все остальные процессы.|Процесс в окне исходного кода выполняется до курсора.<br />Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|
|**Процессы** окна > **остановить процесс**|Н/Д|Выбранный процесс приостанавливается.<br />Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|
|**Процессы** окна > **продолжить процесс**|Н/Д|Выбранный процесс возобновляется.<br />Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|

### <a name="BKMK_Find_the_source_and_symbol___pdb__files"></a> Поиск исходных файлов и файлов символов (PDB)
Чтобы перейти в исходный код процесса, отладчику требуется доступ к его исходные файлы и файлы символов. Дополнительные сведения см. в разделе [Указание файлов символов (PDB) и исходных файлов](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).

Если не удается получить доступ к файлам процесса, можно перемещаться с помощью **Дизассемблированный код** окна. Дополнительные сведения см. в разделе [Как использовать окно дизассемблирования](../debugger/how-to-use-the-disassembly-window.md).

### <a name="BKMK_Switch_between_processes"></a> Переключение между процессами

Вы можете подключиться к нескольким процессам, при отладке, но только один будет активным в отладчике в любой момент времени. Активный или *текущий* процесс можно выбрать с помощью панели инструментов **Место отладки** или в окне **Процессы**. Для переключения между процессами оба процесса должны находиться в режиме приостановки выполнения.

**Чтобы задать текущий процесс на панели инструментов Место отладки:**

1. Чтобы открыть **место отладки** панели инструментов, выберите **представление** > **панелей инструментов** > **место отладки**.

1. Во время отладки в **место отладки** панели инструментов, выберите процесс, необходимо задать в качестве текущего процесса из **процесс** раскрывающегося списка.

   ![Переключение между процессами](../debugger/media/dbg_execution_switchbetweenmodules.png "DBG_Execution_SwitchBetweenModules")

**Чтобы задать текущий процесс из окна "процессы":**

1. Чтобы открыть **процессы** окне во время отладки, выберите **Отладка** > **Windows** > **процессов**.

1. В **процессы** окно текущего процесса отмечается желтой стрелкой. Дважды щелкните процесс, который требуется задать в качестве текущего процесса.

   ![Окно процессов](../debugger/media/dbg_processeswindow.png "DBG_ProcessesWindow")

Переключение к процессу устанавливается в качестве текущего процесса для целей отладки. Окна отладчика показывают состояние для текущего процесса, а команды пошагового выполнения влияют только на текущий процесс.

## <a name="stop-debugging-with-multiple-processes"></a>Остановить отладку с использованием нескольких процессов

По умолчанию при выборе **Отладка** > **остановить отладку**, отладчик завершает или отсоединяет все процессы.

- Если текущий процесс был запущен в отладчике, процесс будет завершен.

- Если отладчик был присоединен к текущему процессу, отладчик отсоединяется от процесса, не прекращая его выполнение.

Если запустить отладку некоторого процесса из решения Visual Studio, затем подключить к другой процесс, который уже выполняется, а затем выберите **остановить отладку**, завершается сеанс отладки. Завершает процесс, который был запущен в Visual Studio, пока процесс, который вы подключили к продолжает работать.

Для управления способом, **остановить отладку** влияет на отдельный процесс, в **процессы** окно, щелкните правой кнопкой мыши процесс, а затем установите или снимите **отсоединиться при остановке отладки** "флажок".

>[!NOTE]
>**Прерывать все процессы при прерывании одного** параметр отладчика не влияет на остановку, завершение или отсоединение от процессов.

### <a name="stop-terminate-and-detach-commands"></a>Команды остановки, окончания и отсоединения

В следующей таблице описаны поведение остановки отладчика, окончания и отсоединения команды с использованием нескольких процессов:

|**Команда**|**Описание**|
|-|-|
|**Отладка** > **остановить отладку**|Если поведение изменено в **процессы** окна, завершаются процессы, запущенные отладчиком, а присоединенные процессы отсоединяются.|
|**Отладка** > **завершить все**|Все процессы завершаются.|
|**Отладка** > **отсоединить все**|Отладчик отсоединяется от всех процессов.|
|**Процессы** окна > **отсоединить процесс**|Отладчик отсоединяется от выбранного процесса.<br />Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|
|**Процессы** окна > **завершить процесс**|Выбранный процесс завершается.<br />Остальные процессы сохраняют свое текущее состояние (остаются приостановленными или продолжают выполняться).|
|**Процессы** окна > **отсоединиться при остановке отладки**|Если флажок установлен, **Отладка** > **остановить отладку** отсоединяется от выбранного процесса. <br />Если не выбран, **Отладка** > **остановить отладку** выбранный процесс завершается. |

## <a name="see-also"></a>См. также

- [Указание файлов символов (PDB) и файлов с исходным кодом](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)
- [Подключение к выполняющимся процессам](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)
- [Навигация по коду с помощью отладчика](../debugger/navigating-through-code-with-the-debugger.md)
- [JIT-отладка](../debugger/just-in-time-debugging-in-visual-studio.md)
- [Отладка многопоточных приложений](../debugger/debug-multithreaded-applications-in-visual-studio.md)