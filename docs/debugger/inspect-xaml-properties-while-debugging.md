---
title: "Просмотр свойств XAML во время отладки | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "FSharp"
  - "VB"
  - "CSharp"
  - "C++"
ms.assetid: 390edde4-7b8d-4c89-8d69-55106b7e6b11
caps.latest.revision: 3
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
caps.handback.revision: 3
---
# Просмотр свойств XAML во время отладки
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Вы можете получить представление о выполнении кода XAML в режиме реального времени с помощью **динамического визуального дерева** и **динамического обозревателя свойств**.  Эти средства обеспечивают представление элементов пользовательского интерфейса выполняющегося приложения XAML в виде дерева, а также отображение свойств среды выполнения любого выбранного элемента интерфейса.  
  
 Эти средства можно использовать в следующих конфигурациях.  
  
|Тип приложения|Операционная система и средства|  
|--------------------|-------------------------------------|  
|Приложения Windows Presentation Foundation \(4.0 и более поздних версий\)|Windows 7 и более поздних версий|  
|Приложения для Магазина Windows и Windows Phone 8.1|Windows 10 и более поздних версий с [пакетом SDK для Windows 10](https://dev.windows.com/en-us/downloads/windows-10-sdk)|  
|Универсальные приложения Windows|Windows 10 и более поздних версий с [пакетом SDK для Windows 10](https://dev.windows.com/en-us/downloads/windows-10-sdk)|  
  
## Просмотр элементов в динамическом визуальном дереве  
 Начнем с очень простого приложения WPF со списком и кнопкой.  При каждом нажатии кнопки в список добавляется еще один элемент.  Четные элементы показаны серым, а нечетные — желтым цветом.  
  
 Создайте новое приложение WPF C\# \("Файл"\/"Создать"\/"Проект", затем выберите C\# и найдите приложение WPF\).  Назовите его TestXAML.  
  
 Измените файл MainWindow.xaml следующим образом.  
  
```xaml  
<Window x:Class="WpfApplication1.MainWindow"  
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"  
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"  
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"  
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"  
    xmlns:local="clr-namespace:WpfApplication1"  
    mc:Ignorable="d"  
     Title="MainWindow" Height="350" Width="525">  
    <Grid>  
        <Button x:Name="button" Background="LightBlue" Content="Add Item" HorizontalAlignment="Left" Margin="216,206,0,0" VerticalAlignment="Top" Width="75" Click="button_Click"/>  
        <ListBox x:Name="listBox" HorizontalAlignment="Left" Height="100" VerticalAlignment="Top" Width="100" Margin="205,80,0,0"/>  
    </Grid>  
</Window>  
```  
  
 Добавьте следующий обработчик команд в файл MainWindow.xaml.cs:  
  
```c#  
private void button_Click(object sender, RoutedEventArgs e)  
{  
    ListBoxItem item = new ListBoxItem();  
    item.Content = "Item" + ++count;  
    if (count % 2 == 0)  
    {  
        item.Background = Brushes.LightGray;  
    }  
    else  
    {  
        item.Background = Brushes.LightYellow;  
    }  
    listBox.Items.Add(item);  
}  
```  
  
 Выполните сборку решения и запустите отладку.  \(В качестве конфигурации сборки нужно выбрать отладку, а не выпуск.  Дополнительные сведения о конфигурациях сборки см. в разделе [Общие сведения о конфигурациях построения](../ide/understanding-build-configurations.md).\)  
  
 Когда появится окно, нажмите кнопку **Add Item** несколько раз.  Результат должен быть примерно таким:  
  
 ![Главное окно приложения](../debugger/media/livevisualtree-app.png "LiveVIsualTree\-App")  
  
 Теперь откройте окно **динамического визуального дерева** \(**Отладка\/Windows\/Динамическое визуальное дерево** или найдите его в левой части IDE\).  Перетащите его из закрепленного положения, чтобы можно было видеть это окно и окно **Динамические свойства** рядом друг с другом.  В окне **динамического визуального дерева** разверните узел **ContentPresenter**.  Он должен содержать узлы для кнопки и списка.  Разверните список \(а затем**ScrollContentPresenter** и **ItemsPresenter**\), чтобы найти элементы списка.  Окно должно выглядеть следующим образом:  
  
 ![Элементы ListBoxItems в динамическом визуальном дереве](../debugger/media/livevisualtree-listboxitems.png "LiveVisualTree\-ListBoxItems")  
  
 Вернитесь в окно приложения и добавьте еще несколько элементов.  В **динамическом визуальном дереве** появится больше элементов списка.  
  
 Теперь взглянем на свойства одного из элементов списка.  Выберите первый элемент списка в **динамическом визуальном дереве** и щелкните значок **Показать свойства** на панели инструментов.  Должно появиться окно **динамического обозревателя свойств**.  Обратите внимание, что значение поля **Содержимое** — Item1, а поля **Фон** — **\#FFFFFFE0** \(светло\-желтый\).  Вернитесь в **динамическое визуальное дерево** и выберите второй элемент списка.  В **динамическом обозревателе свойств** должно отображаться значение поля **Содержимое** — Item2 и значение поля **Фон** — **\#FFD3D3D3** \(светло\-серый\).  
  
 Фактическая структура XAML\-кода содержит много элементов, которые, возможно, не будут интересовать вас напрямую, и в случае не слишком хорошего знания кода навигация по дереву может быть затруднительной.  Поэтому **динамическое визуальное дерево** обеспечивает несколько способов, которые позволяют использовать пользовательский интерфейс приложения для поиска элемента, который вы хотите изучить.  
  
 **Включение выделения в работающем приложении**.  Вы можете включить этот режим, выбрав крайнюю левую кнопку на панели инструментов **динамического визуального дерева**.  Когда этот режим включен, можно выбрать элемент пользовательского интерфейса в приложении и данные **динамического визуального дерева** \(а также **динамического обозревателя свойств**\) автоматически обновятся: на экран будет выведен узел в дереве, соответствующий этому элементу, и его свойства.  
  
 **Отображение графических элементов макета в работающем приложении**.  Этот режим можно включить при нажатии кнопки, расположенной справа от кнопки включения выделения.  Если установлен флажок **Отображение графических элементов макета**, в окне приложения отображаются горизонтальные и вертикальные линии вдоль границ выбранного объекта, чтобы можно было видеть, относительно чего он выровнен. Кроме того, отображаются прямоугольники, показывающие поля.  Например, включите оба режима **Разрешить выделение** и **Отображать макет** и выберите текстовый блок **Формат вывода** в приложении.  В **динамическом визуальном дереве** должен появиться узел блока текста, а в **динамическом обозревателе свойств** — свойства блока текста, а также горизонтальные и вертикальные линии на его границах.  
  
 ![LivePropertyViewer в DisplayLayout](../debugger/media/livevisualtreelivepropertyviewer-displaylayout.png "LiveVisualTreeLivePropertyViewer\-DisplayLayout")  
  
 **Предварительный просмотр выбора**.  Этот режим можно включить, нажав третью кнопка слева на панели инструментов динамического визуального дерева.  Этот режим показывает XAML\-код, где был объявлен элемент, если имеется доступ к исходному коду приложения.  Выберите **Разрешить выделение** и **Предварительный просмотр выбора**, а затем нажмите кнопку в тестируемом приложении.  Файл MainWindow.xaml откроется в Visual Studio и курсор будет находится в строке, где определена кнопка.  
  
## Использование средств XAML с работающими приложениями  
 Эти средства XAML можно использовать даже при отсутствии исходного кода.  При подключении к выполняющемуся приложению XAML вы также можете использовать **динамическое визуальное дерево** для элементов пользовательского интерфейса этого приложения.  Ниже приведен пример, в котором используется то же тестовое приложение WPF, что и ранее.  
  
1.  Запустите приложение TestXaml в конфигурации выпуска.  Подключиться к процессу, который выполняется в конфигурации **отладки**, нельзя.  
  
2.  Откройте второй экземпляр Visual Studio и щелкните **Отладка\/Присоединение к процессу**.  Найдите **TestXaml.exe** в списке доступных процессов и нажмите кнопку **Присоединить**.  
  
3.  Начнется выполнение приложения.  
  
4.  Во втором экземпляре Visual Studio откройте **динамическое визуальное дерево** \(**Отладка\/Окна\/Динамическое визуальное дерево**\).  Вы должны увидеть элементы пользовательского интерфейса TestXaml и иметь возможность изменять их, как во время отладки приложения напрямую.