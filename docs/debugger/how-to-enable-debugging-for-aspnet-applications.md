---
title: Включение отладки для приложений ASP.NET | Документация Майкрософт
ms.custom: H1HackMay2017
ms.date: 09/21/18
ms.topic: conceptual
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- debugging ASP.NET Web applications
- Web.config configuration file, debug mode
- debugging [Visual Studio], ASP.NET
ms.assetid: 3beed819-cece-4864-8184-bd410000973a
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- aspnet
ms.openlocfilehash: b87a8415bf2df2b8848b4fb619964d981e31ffcf
ms.sourcegitcommit: 2193323efc608118e0ce6f6b2ff532f158245d56
ms.translationtype: MTE95
ms.contentlocale: ru-RU
ms.lasthandoff: 01/25/2019
ms.locfileid: "55035254"
---
# <a name="debug-aspnet-or-aspnet-core-apps-in-visual-studio"></a>Отладка приложений ASP.NET или ASP.NET Core в Visual Studio

Можно выполнять отладку приложений ASP.NET и ASP.NET Core в Visual Studio. Процесс отличается между ASP.NET и ASP.NET Core, а также при выполнении в IIS Express или локального сервера IIS. 

>[!NOTE]
>Следующие шаги и параметры применяются только к отладке приложения на локальном сервере. Отладка приложений на удаленном сервере IIS server использует **присоединение к процессу**и игнорирует эти параметры. Дополнительные сведения и инструкции по удаленная отладка приложений ASP.NET в IIS, см. в разделе [удаленная отладка ASP.NET на компьютере со службами IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md) или [удаленная отладка ASP.NET Core на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-computer.md).

Встроенный сервер IIS Express входит в состав Visual Studio. IIS Express является сервером отладки по умолчанию для проектов ASP.NET и ASP.NET Core и предварительно настроен. Это самый простой способ отладки, которая идеально подходит для первоначальной отладки и тестирования. 

Кроме того, можно выполнять отладку ASP.NET или ASP.NET Core приложение на локальном сервере IIS (версии 8.0 или более поздней версии), настроенный для запуска приложения. Отладка на локальный сервер IIS, должны соответствовать следующим требованиям: 

<a name="iis"></a>
- Выберите **поддержка IIS во время разработки** при установке Visual Studio. (При необходимости перезапустите установщик Visual Studio, выберите **изменить**и добавьте этот компонент.)
- Запустить Visual Studio с правами администратора. 
- Установить и правильно настроить IIS в соответствующие версии среды ASP.NET и ASP.NET Core. Дополнительные сведения и инструкции см. в разделе [IIS 8.0 с ASP.NET 3.5 и ASP.NET 4.5](/iis/get-started/whats-new-in-iis-8/iis-80-using-aspnet-35-and-aspnet-45) или [размещение ASP.NET Core в Windows со службами IIS](https://docs.microsoft.com/aspnet/core/host-and-deploy/iis/index).
- Убедитесь, что приложение выполняется в IIS без ошибок.

## <a name="debug-aspnet-apps"></a>Отладка приложений ASP.NET 

IIS Express используется по умолчанию и предварительно настроен. Если выполняется отладка на локальный сервер IIS, убедитесь, что вы выполнили [требования для локальной отладки IIS](#iis). 

1. Выберите проект ASP.NET в Visual Studio **обозревателе решений** и нажмите кнопку **свойства** значок, нажмите клавишу **Alt**+**ввод**, или щелкните правой кнопкой мыши и выберите **свойства**.
   
1. Выберите **Web** вкладки.
   
1. В **свойства** панели в разделе **серверы**, 
   - Для IIS Express, выберите **IIS Express** из раскрывающегося списка.
   - Для локальных служб IIS
     1. Выберите **локальный сервер IIS** из раскрывающегося списка.
     1. Рядом с полем **URL-адрес проекта** выберите **создать виртуальный каталог**, если вы еще не настроили приложение в IIS.
   
1. В разделе **отладчики**выберите **ASP.NET**.
   
   ![Параметры отладчика ASP.NET](media/dbg-aspnet-enable-debugging2.png "параметров отладчика в ASP.NET")
   
1. Используйте **файл** > **сохранить выбранные элементы** или **Ctrl**+**S** для сохранения любых изменений. 
   
1. Отладка приложения, в проекте, задайте точки останова на некоторый код. На панели инструментов Visual Studio, убедитесь, что задана конфигурация **Отладка**, и требуется браузер будет иметь вид в **IIS Express (\<имя браузера >)** или **локальный сервер IIS (\< Имя браузера >)** в поле эмулятора. 
   
1. Чтобы начать отладку, выберите **IIS Express (\<имя браузера >)** или **локальный сервер IIS (\<имя браузера >)** на панели инструментов выберите **начать отладку**из **Отладка** меню или нажмите клавишу **F5**. Отладчик останавливается на точки останова. Если отладчик не может задавать точки останова, см. в разделе [Устранение неполадок отладки](#troubleshoot-debugging).

## <a name="debug-aspnet-core-apps"></a>Отладка приложений ASP.NET Core 

IIS Express используется по умолчанию и предварительно настроен. Если выполняется отладка на локальный сервер IIS, убедитесь, что вы выполнили [требования для локальной отладки IIS](#iis). 

1. Выберите проект ASP.NET Core в Visual Studio **обозревателе решений** и нажмите кнопку **свойства** значок, нажмите клавишу **Alt**+**ввод**, или щелкните правой кнопкой мыши и выберите **свойства**.

1. Выберите вкладку **Отладка**.
   
1. В **свойства** панели, рядом с полем **профиль**, 
   - Для IIS Express, выберите **IIS Express** из раскрывающегося списка.
   - Для локальных служб IIS, выберите имя приложения из раскрывающегося списка или выберите **New**, создайте новое имя профиля и выберите **ОК**.
   
1. Рядом с полем **запуска**, выберите пункт **IIS Express** или **IIS** из раскрывающегося списка. 
   
1. Убедитесь, что **браузер** выбран.
   
1. В разделе **переменные среды**, убедитесь, что **ASPNETCORE_ENVIRONMENT** присутствует со значением **разработки**. Если это не так, выберите **добавить** и добавьте его.
   
   ![Параметры отладчика в ASP.NET Core](../debugger/media/dbg-aspnet-enable-debugging3.png "параметров отладчика в ASP.NET Core")
   
1. Используйте **файл** > **сохранить выбранные элементы** или **Ctrl**+**S** для сохранения любых изменений. 
   
1. Отладка приложения, в проекте, задайте точки останова на некоторый код. На панели инструментов Visual Studio, убедитесь, что задана конфигурация **Отладка**и либо **IIS Express**, или имя нового профиля IIS, отображается в поле эмулятора. 
   
1. Чтобы начать отладку, выберите **IIS Express** или  **\<имя профиля IIS >** на панели инструментов выберите **начать отладку** из **Отладка** меню или нажмите клавишу **F5**. Отладчик останавливается на точки останова. Если отладчик не может задавать точки останова, см. в разделе [Устранение неполадок отладки](#troubleshoot-debugging).

## <a name="troubleshoot-debugging"></a>Устранение неполадок отладки

Если локальная отладка IIS не могут выполняться до точки останова, выполните следующие действия для устранения неполадок. 

1. Запустите веб-приложения из служб IIS и убедитесь, что он работает правильно. Оставьте веб-приложения под управлением.
   
2. В Visual Studio последовательно выберите **Отладка > присоединение к процессу** или нажмите клавишу **Ctrl**+**Alt**+**P**, и подключение к процессу ASP.NET или ASP.NET Core (обычно **w3wp.exe** или **dotnet.exe**). Дополнительные сведения см. в разделе [присоединение к процессу](attach-to-running-processes-with-the-visual-studio-debugger.md) и [поиск имени процесса ASP.NET](how-to-find-the-name-of-the-aspnet-process.md).

Если можно подключиться и достигнута точка останова с помощью **присоединение к процессу**, но не с помощью **Отладка** > **начать отладку** или **F5**, он, возможно, неверно указаны в свойствах проекта. Если используется файл HOSTS, убедитесь, что оно также настроено правильно.

## <a name="configure-debugging-in-the-webconfig-file"></a>Настроить отладку в файле web.config  

Проекты ASP.NET имеют *web.config* файлов по умолчанию, которые содержат оба configuration и launch сведения о приложении, включая параметры отладки. *Web.config* файлы должны быть правильно настроены для отладки. **Свойства** параметров в предыдущих разделах обновления *web.config* файлы, но можно также настроить их вручную. 

> [!NOTE]
> Проекты ASP.NET Core изначально не имеют *web.config* файлы, однако использование *appsettings.json* и *launchSettings.json* файлы конфигурации приложения и запуска сведения. Развертывание приложения создает *web.config* файл или файлы в проекте, но они обычно не содержат сведения об отладке.

> [!TIP]
> Процесс развертывания может обновлять *web.config* параметры, поэтому перед попыткой выполнить отладку, убедитесь, что *web.config* настроен для отладки.
  
**Чтобы вручную настроить *web.config* файл для отладки:**

1. В Visual Studio откройте проект ASP.NET *web.config* файл.  
  
2. *Web.config* — это файл XML, поэтому он содержит вложенные разделы, помеченные тегами. Найдите раздел `configuration/system.web/compilation`. (Если `compilation` элемент не существует, создайте его.)
  
3. Убедитесь, что `debug` атрибут в `compilation` элементу присваивается `true`. (Если `compilation` элемент не содержит `debug` атрибута, добавьте его и присвойте ему значение `true`.) 
  
   Если вы используете локальный сервер IIS вместо IIS Express сервера по умолчанию, убедитесь, что `targetFramework` значение в атрибута `compilation` элемент соответствует framework на сервере IIS.
  
   `compilation` Элемент *web.config* файл должен выглядеть как в следующем примере:

   > [!NOTE]
   > В этом примере является частичным *web.config* файл. Обычно дополнительных разделов XML в `configuration` и `system.web` элементов и `compilation` элемент также может содержать другие элементы или атрибуты.
  
   ```xml
   <configuration>  
      ...  
      <system.web>  
          <compilation  debug="true"  targetFramework="4.6.1" ... > 
             ...  
          </compilation>  
      </system.web>  
   </configuration>  
   ```

[!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] автоматически обнаруживает изменения в файлах *web.config* и применяет новые параметры конфигурации. Не нужно перезагружать компьютер или сервер IIS, чтобы изменения вступили в силу.  
  
Веб-сайт может содержать несколько виртуальных каталогов и подкаталогов, *web.config* файлов в каждом из них. [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] приложения наследуют параметры конфигурации из *web.config* файлы на более высоких уровнях URL-пути. Иерархическое *web.config* файл параметры применяются ко всем [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] приложений под ними в иерархии. Установка на другую конфигурацию в *web.config* более низкого уровня в иерархии файла переопределяют параметры в файле более поздней версии.  
  
Например, если указать `debug="true"` в <em>www.microsoft.com/aaa/web.config</em>, любое приложение в *aaa* папку или в любом подкаталоге *aaa* наследует эту настройку Кроме того, если один из этих приложений переопределяет параметр с собственным *web.config* файл.  
  
## <a name="publish-in-debug-mode-using-the-file-system"></a>Публикация в режиме отладки, в файловой системе

Существуют различные способы публикации приложений в IIS. Ниже показано, как создать и развернуть отладочную профиль публикации, в файловой системе. Чтобы сделать это, необходимо использовать Visual Studio с правами администратора. 

> [!IMPORTANT]
> При изменении кода или перестроение, необходимо повторить эти действия, чтобы повторно опубликовать. 

1. В Visual Studio щелкните проект правой кнопкой мыши и выберите **публикации**.

3. Выберите **IIS, FTP, д** и нажмите кнопку **публикации**.

    ![Публикация в IIS](media/dbg-aspnet-local-iis.png "публикация в IIS")

4. В **CustomProfile** диалоговом окне для **метод публикации**, выберите **файловая система**.

5. Для **целевое расположение**выберите **Обзор** (**...** ).
   
   - Для ASP.NET, выберите **локальный сервер IIS**, выберите веб-сайт, созданный для приложения, а затем выберите **откройте**.
     
     ![Публикация в ASP.NET в IIS](media/dbg-aspnet-local-iis1.png "публикации ASP.NET в IIS")
     
   - ASP.NET Core, выберите **файловой системы**, выберите папку для приложения, а затем выберите **откройте**.

1. Выберите **Далее**. 

1. В разделе **конфигурации**выберите **Отладка** из раскрывающегося списка.

1. Нажмите кнопку **Сохранить**.

1. В **публикации** диалоговое окно, убедитесь, что **CustomProfile** (или имя профиля, который вы только что создали) появляется, и **LastUsedBuildConfiguration** присваивается  **Отладка**. 

1. Нажмите **Публиковать**.

    ![Публикация в IIS](media/dbg-aspnet-local-iis-select-site.png "публикация в IIS")

> [!IMPORTANT]
> Режим отладки значительно снижает производительность приложения. Для наилучшей производительности значение `debug="false"` в *web.config* и указание сборки выпуска при развертывании рабочего приложения или оценкой его производительности.  

## <a name="see-also"></a>См. также  
[Отладка ASP.NET: системные требования](aspnet-debugging-system-requirements.md)   
[Практическое руководство. Выполнение рабочего процесса с учетной записью пользователя](how-to-run-the-worker-process-under-a-user-account.md)   
[Практическое руководство. Поиск имени процесса ASP.NET](how-to-find-the-name-of-the-aspnet-process.md)   
[Отладка развернутых веб-приложений](debugging-deployed-web-applications.md)   
[Пошаговое руководство: Отладка веб-формы](walkthrough-debugging-a-web-form.md)   
[Практическое руководство. Отладка исключений ASP.NET](how-to-debug-aspnet-exceptions.md)   
[Отладка веб-приложений: ошибки и устранение неполадок](debugging-web-applications-errors-and-troubleshooting.md)
