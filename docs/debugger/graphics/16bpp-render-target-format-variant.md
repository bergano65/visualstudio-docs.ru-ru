---
title: Вариант формата однобуферной прорисовки 16 бит/пкс | Документация Майкрософт
description: Примените вариант формата однобуферной прорисовки 16 бит на пиксель (bpp), задав для всех целей преобразования и буферов фона для формата пикселей значение DXGI_FORMAT_B5G6R5_UNORM.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: 24b22ad9-5ad0-4161-809a-9b518eb924bf
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 6d0f43e2b004272b6882ff4a19e62fa99c998e53
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99874630"
---
# <a name="16-bpp-render-target-format-variant"></a>Вариант формата однобуферной прорисовки 16 бит/пкс
Для всех целевых объектов отрисовки и буферов фона задается формат пикселей DXGI_FORMAT_B5G6R5_UNORM.

## <a name="interpretation"></a>Интерпретация
 Для целевого объекта отрисовки или буфера фона, как правило, используется формат с глубиной цвета 32 бита (32 бита на пиксель), например B8G8R8A8_UNORM. Форматы с глубиной цвета 32 бита могут использовать большой объем памяти. Так как формат B5G6R5_UNORM имеет глубину цвета 16 бит, что вдвое меньше, чем у форматов с глубиной цвета 32 бита, он позволяет уменьшить нагрузку на память за счет снижения точности цветовоспроизведения.

 Если этот вариант дает значительный прирост производительности, это с большой вероятностью указывает на то, что приложение потребляет слишком много пропускной способности памяти. Повышение производительности может быть существенным, особенно если в профилированном кадре много перекрытий или большой объем альфа-смешения.

16-битный формат целевого объекта отрисовки позволяет сократить объем памяти, если использовать его в приложении со следующими характеристиками:
- Не требуется высокое качество воспроизведения цвета.
- Не требуется использование альфа-канала.
- Не часто используются плавные градиенты (которые создают заметные полосы при снижении точности цвета).

Вот еще несколько стратегий для уменьшения нагрузки на память:
- Старайтесь обойтись без перерисовки и альфа-смешения.
- Снижайте размеры буфера кадров.
- Снижайте размеры ресурсов текстур.
- Не применяйте компрессию для ресурсов текстур.

Как обычно, необходимо учитывать потери в плане качества изображения, связанные с этими оптимизациями.

Приложения, которые входят в цепочку буферов, используют формат заднего буфера (DXGI_FORMAT_B5G6R5_UNORM), который не поддерживает глубину цвета 16 бит/пкс. Для создания цепочек буферов используются `D3D11CreateDeviceAndSwapChain` и `IDXGIFactory::CreateSwapChain`. Чтобы обойти это ограничение, выполните следующие действия:
1. Создайте целевой объект отрисовки в формате B5G6R5_UNORM с помощью `CreateTexture2D` и выполняйте отрисовку в нем.
2. Скопируйте целевой объект отрисовки в буфер фона цепочки буферов, нарисовав полноэкранный квадрант с целевым объектом отрисовки в качестве исходной текстуры.
3. Вызовите метод Present в цепочке буферов.

   Если эта стратегия освободит больше памяти, чем требуется для копирования целевого объекта отрисовки в задний буфер цепочки буферов, то производительность отрисовки увеличится.

   Для архитектур GPU, в которых применяются плиточные методы отрисовки, может значительно повыситься производительность за счет использования формата буфера кадров с глубиной цвета 16 бит/пкс. Это улучшение связано с тем, что большая часть буфера кадров сможет помещаться в локальном кэше буфера кадров каждой плитки Архитектуры с плиточной отрисовкой иногда встречаются в GPU для мобильных телефонов и планшетов. За пределами этого сегмента они практически не применяются.

## <a name="remarks"></a>Примечания
 Формат целевого объекта отрисовки DXGI_FORMAT_B5G6R5_UNORM устанавливается при каждом вызове метода `ID3D11Device::CreateTexture2D`, который создает целевой объект отрисовки. В частности, формат переопределяется, когда объект D3D11_TEXTURE2D_DESC, передаваемый в параметре pDesc, описывает целевой объект отрисовки, то есть:

- Для члена BindFlags установлен флаг D3D11_BIND_REDNER_TARGET.

- Для члена BindFlags снят флаг D3D11_BIND_DEPTH_STENCIL.

- Для члена Usage установлен флаг D3D11_USAGE_DEFAULT.

## <a name="restrictions-and-limitations"></a>Ограничения
 Так как формат B5G6R5 не имеет альфа-канала, альфа-содержимое не сохраняется при использовании этого варианта. Если приложение требует наличия альфа-канала в целевом объекте отрисовки, можно переключиться на формат B5G6R5.

## <a name="example"></a>Пример
 Вариант **Формат целевого объекта отрисовки с глубиной цвета 16 бит/пкс** можно воспроизвести для целевых объектов отрисовки, созданных методом `CreateTexture2D`, с помощью следующего кода:

```cpp
D3D11_TEXTURE2D_DESC target_description;

target_description.BindFlags = D3D11_BIND_RENDER_TARGET;
target_description.Format = DXGI_FORMAT_B5G6R5_UNORM;
d3d_device->CreateTexture2D(&target_description, nullptr, &render_target);
```
