---
title: 'Ошибка: не удалось задать точку останова в данных | Документация Майкрософт'
ms.date: 12/3/2019
ms.topic: error-reference
f1_keywords:
- vs.debug.error.unable_to_set_data_breakpoint
dev_langs:
- CSharp
helpviewer_keywords:
- debugging [Visual Studio], managed
- debugging managed code, data breakpoint
ms.assetid: b06b5d65-424b-490f-bf58-97583cd7006a
author: wardengnaw
ms.author: waan
manager: caslan
ms.workload:
- multiple
ms.openlocfilehash: dab5e146d510601c6e93582b6b128abcd964b4a7
ms.sourcegitcommit: 66f31cc4ce1236e638ab58d2f70d3646206386fa
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/27/2020
ms.locfileid: "85459939"
---
# <a name="troubleshooting-data-breakpoint-errors"></a>Устранение неполадок точек останова в данных
На этой странице приведены пошаговые инструкции по устранению распространенных ошибок, возникающих при использовании команды "Прервать выполнение при изменении значения".

## <a name="diagnosing-unable-to-set-data-breakpoint-errors"></a>Диагностика ошибок "Не удалось задать точку останова в данных"
> [!IMPORTANT]
> Управляемые точки останова в данных поддерживаются в .NET Core 3.0 и более поздних версиях. Скачать последнюю версию можно [здесь](https://dotnet.microsoft.com/download).

Ниже приведен список ошибок, которые могут возникнуть при использовании управляемых точек останова в данных. Он содержит дополнительные пояснения о причинах ошибок и возможные решения или обходные пути для их устранения.

- *"Используемая целевым процессом версия .NET не поддерживает точки останова в данных. Для них требуется .NET Core 3.0+ на платформе x86 или x64."*

    - Управляемые точки останова в данных начали поддерживаться в .NET Core 3.0. В настоящее время они не поддерживаются в .NET Framework или версиях .NET Core ниже 3.0. 
    
    - **Решение** Решением этой проблемы является обновление проекта до версии .NET Core 3.0.

- *"Не удается найти значение в управляемой куче и отследить его".*
    - Переменная объявлена в стеке.
        - Установка точек останова в данных для переменных, созданных в стеке, не поддерживается, так как такая переменная станет недействительной после выхода из функции.
        - **Инструкции по решению**: Устанавливайте точки останова в строках, где используется переменная.

    - Команда "Прервать выполнение при изменении значения" выполняется для переменной, которая отсутствует в раскрывающемся списке.
        - Объект, содержащий подлежащее отслеживанию поле, должен быть известен отладчику. Сборщик мусора может перемещать объект в куче, поэтому отладчик должен знать, какой объект содержит подлежащую отслеживанию переменную. 
        - **Инструкции по решению**: Если вы находитесь в методе объекта, в котором нужно установить точку останова в данных, перейдите на один кадр вверх и используйте окно `locals/autos/watch`, чтобы развернуть объект и установить точку останова в нужном поле.

- *"Точки останова в данных не поддерживаются для статических полей и статических свойств".*
    
    - Статические поля и свойства в настоящее время не поддерживаются. Если вам нужна эта функция, отправьте [отзыв](#provide-feedback).

- *"Отслеживание полей и свойств структур невозможно".*

    - Поля и свойства структур в настоящее время не поддерживаются. Если вам нужна эта функция, отправьте [отзыв](#provide-feedback).

- *"Значение свойства изменилось, и его больше нельзя отслеживать".*

    - Способ вычисления свойства может измениться во время выполнения. В этом случае число переменных, от которых зависит свойство, увеличивается и может превысить аппаратное ограничение. Ознакомьтесь с `"The property is dependent on more memory than can be tracked by the hardware."` ниже.

- *"Свойство зависит от большего объема памяти, чем может отследить оборудование".*
    
    - Каждая архитектура имеет определенное поддерживаемое количество байтов и аппаратных точек останова, а свойство, для которого требуется установить точку останова, превышает это ограничение. Сведения о том, сколько точек останова в данных и байтов поддерживается аппаратно для используемой архитектуры, см. в таблице [Аппаратные ограничения на количество точек останова в данных](#data-breakpoint-hardware-limitations). 
    - **Инструкции по решению**: Установите точку останова для значения, которое может измениться в свойстве.

- *"Точки останова в данных не поддерживаются при использовании устаревшего вычислителя выражений C#".*

    - Точки останова в данных поддерживаются только при использовании актуального вычислителя выражений C#. 
    - **Решение** Чтобы отключить устаревший вычислитель выражений C#, перейдите в `Debug -> Options`, а затем в раздел `Debugging -> General` снимите флажок `"Use the legacy C# and VB expression evaluators"`.

## <a name="data-breakpoint-hardware-limitations"></a>Аппаратные ограничения на количество точек останова в данных

Архитектура (конфигурация платформы), в которой выполняется программа, имеет ограниченное количество точек останова в данных, поддерживаемое аппаратно. В таблице ниже указано, сколько регистров можно использовать в той или иной архитектуре.

| Архитектура | Число точек останова в данных, поддерживаемых аппаратно | Максимальный размер в байтах|
| :-------------: |:-------------:| :-------------:|
| x86 | 4 | 4 |
| X64 | 4 | 8 |
| ARM | 1 | 4 |
| ARM64 | 2 | 8 |

## <a name="provide-feedback"></a>Предоставление отзыва
Чтобы сообщить нам о проблемах при работе с этой функцией или высказать свои предложения, воспользуйтесь функцией "Справка" > "Отправить отзыв" > [Сообщить о проблеме](../ide/how-to-report-a-problem-with-visual-studio.md) в интегрированной среде разработки или опубликуйте сообщение в [сообществе разработчиков](https://developercommunity.visualstudio.com/).

## <a name="see-also"></a>См. также
- [Использование команды "Прервать выполнение при изменении значения" в .NET Core 3.0](using-breakpoints.md#BKMK_set_a_data_breakpoint_native_cplusplus)
- [Блог разработчиков. Прервать выполнение при изменении значения: точки останова в данных для .NET Core в Visual Studio 2019](https://devblogs.microsoft.com/visualstudio/break-when-value-changes-data-breakpoints-for-net-core-in-visual-studio-2019/)
