---
title: Часто задаваемые вопросы по отладке моментальных снимков | Документация Майкрософт
ms.date: 11/07/2017
ms.topic: reference
helpviewer_keywords:
- debugger
ms.assetid: 944f1eb0-a74b-4d28-ae2b-a370cd869add
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 7ea593ad5f88ba29f6b1c0d7c64a129b8f71c7f5
ms.sourcegitcommit: 509fc3a324b7748f96a072d0023572f8a645bffc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/02/2019
ms.locfileid: "58857078"
---
# <a name="frequently-asked-questions-for-snapshot-debugging-in-visual-studio"></a>Вопросы и ответы по отладке моментальных снимков в Visual Studio

Ниже приведен список вопросов, связанных с отладкой работающих приложений Azure с помощью Snapshot Debugger.

#### <a name="what-is-the-performance-cost-of-taking-a-snapshot"></a>Как выполнение моментальных снимков влияет на производительность?

Когда для выполнения моментальных снимков приложения используется Snapshot Debugger, он блокирует процесс приложения и приостанавливает ответвленную копию. При отладке моментального снимка вы выполняете отладку в ответвленной копии процесса. Это занимает 10–20 мс. Данный процесс не копирует полных сведений о приложении. Вместо этого он копирует только таблицу страниц и присваивает страницам атрибуты копирования при записи. Если некоторые объекты приложения, которые находятся в куче, будут изменены, то будут скопированы те страницы, которые им соответствуют. Таким образом, каждый из моментальных снимков занимает мало места в памяти (для большинства приложений этот размер соответствует порядка сотни килобайт).

#### <a name="what-happens-if-i-have-a-scaled-out-azure-app-service-multiple-instances-of-my-app"></a>Что произойдет при работе с масштабной Службой приложений Azure (несколькими экземплярами приложения)?

При наличии нескольких экземпляров приложения точки моментальных снимков будут применены к каждому из них. А моментальный снимок будет создан только в той точке моментальных снимков, которая первой будет соответствовать всем условиям. Для создания последующих моментальных снимков при наличии нескольких точек моментальных снимков будет использоваться тот же экземпляр, из которого создавался первый моментальный снимок. Точки ведения журнала, отправленные в окно вывода, отобразят сообщения только для одного экземпляра, в то время как точки ведения журнала, отправленные в журналы приложений, отправят сообщения из каждого экземпляра.

#### <a name="how-does-the-snapshot-debugger-load-symbols"></a>Как выполняется загрузка символов в Snapshot Debugger?

Для работы расширения Snapshot Debugger требуются соответствующие символы приложения, которые должны быть развернуты в Службе приложений Azure или находиться на локальном компьютере. (Внедренные PDB-файлы сейчас не поддерживаются.) Snapshot Debugger выполнит загрузку символов из Службы приложений Azure автоматически. Начиная с Visual Studio 2017 версии 15.2, при развертывании в Службе приложений Azure также будут развернуты символы вашего приложения.

#### <a name="does-the-snapshot-debugger-work-against-release-builds-of-my-application"></a>Работает ли Snapshot Debugger в сборках выпуска приложения?

Да. Snapshot Debugger предназначен для работы в сборках выпуска. Когда точка моментальных снимков помещается в функцию, она перекомпилируется до отладочной версии, что делает ее доступной для отладки. Остановка работы Snapshot Debugger приведет к возвращению функции к версии сборки выпуска.

#### <a name="can-logpoints-cause-side-effects-in-my-production-application"></a>Могут ли точки ведения журнала привести к побочным эффектам в рабочем приложении?

Нет. Любые сообщения журнала, добавленные в приложение, оцениваются виртуально. Они не создают побочных эффектов в приложении. Тем не менее некоторые из их свойств могут быть недоступны при использовании точек ведения журнала.

#### <a name="does-the-snapshot-debugger-work-if-my-server-is-under-load"></a>Работает ли Snapshot Debugger, когда сервер находится под нагрузкой?

Да, он может работать, когда сервер находится под нагрузкой. Snapshot Debugger выполняет проверку, и в ситуации, когда на сервере отсутствует свободная память, он не делает моментальных снимков.

#### <a name="how-do-i-uninstall-the-snapshot-debugger"></a>Как выполнить удаление Snapshot Debugger?

Чтобы удалить расширение сайта Snapshot Debugger в Службе приложений, выполните следующие действия.

1. С помощью Cloud Explorer отключите Службу приложений в Visual Studio или на портале Azure.
1. Последовательно перейдите к сайту Kudu Службы приложений (то есть yourappservice.**scm**.azurewebsites.net), а затем к пункту **Расширения сайта**.
1. Чтобы его удалить, в расширении сайта Snapshot Debugger нажмите кнопку со значком "X".

#### <a name="why-are-ports-opened-during-a-snapshot-debugger-session"></a>Почему во время сеанса Snapshot Debugger открываются порты?

Чтобы выполнить отладку моментальных снимков, сделанных в Azure, расширению Snapshot Debugger необходимо открыть набор портов. Это те же порты, которые требуются для удаленной отладки. Список портов приведен в [этой](../debugger/remote-debugger-port-assignments.md) статье.

## <a name="see-also"></a>См. также

- [Отладка в Visual Studio](../debugger/index.md)
- [Отладка работающих приложений ASP.NET Azure с помощью Snapshot Debugger](../debugger/debug-live-azure-applications.md)
- [Отладка работающих приложений ASP.NET на Виртуальных машинах Azure и Масштабируемых наборах виртуальных машин Azure с помощью Snapshot Debugger](../debugger/debug-live-azure-virtual-machines.md)
- [Отладка работающей службы Azure Kubernetes ASP.NET с помощью Snapshot Debugger](../debugger/debug-live-azure-kubernetes.md)
- [Устранение неполадок и известные проблемы отладки моментальных снимков](../debugger/debug-live-azure-apps-troubleshooting.md)