---
title: Отладка .NET Core в Linux
description: Отладка .NET Core в Linux с помощью Secure Shell (SSH) путем присоединения к процессу. Подготовка приложения к отладке. Создание и развертывание приложения. Подключение отладчика.
ms.custom: SEO-VS-2020
ms.date: 02/26/2020
ms.topic: conceptual
helpviewer_keywords:
- remote debugging, linux
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 99bfd1df6d977830e5b8e332efa3d0af653d3aec
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99934615"
---
# <a name="debug-net-core-on-linux-using-ssh-by-attaching-to-a-process"></a>Отладка .NET Core в Linux с помощью SSH путем присоединения к процессу

Начиная с Visual Studio 2017 можно присоединяться к процессам .NET Core, запущенным в локальном или удаленном развертывании Linux, по протоколу SSH. В этой статье описывается настройка и выполнение процесса отладки. Сценарии отладки с использованием контейнеров Docker см. в статьях [Присоединение к процессу, выполняющемуся в контейнере Docker](../debugger/attach-to-process-running-in-docker-container.md) и об [инструментах для работы с контейнерами](../containers/edit-and-refresh.md). Сведения об отладке Linux в WSL 2 из Visual Studio (без присоединения к процессу) см. в [этой статье](../debugger/debug-dotnet-core-in-wsl-2.md).

## <a name="prerequisites"></a>Предварительные требования

- На компьютере Visual Studio необходимо установить рабочую нагрузку **ASP.NET и разработка веб-приложений** или **Кроссплатформенная разработка .NET Core**.

- На сервере Linux необходимо установить SSH-сервер (распакуйте и установите его с помощью curl или wget). Например, в Ubuntu это можно сделать, запустив:

  ``` cmd
  sudo apt-get install openssh-server unzip curl
  ```

- На сервере Linux [установите среду выполнения .NET для Linux](/dotnet/core/install/linux) и найдите страницу, соответствующую вашему дистрибутиву Linux (например, Ubuntu). Пакет SDK для .NET не требуется.

- Подробные инструкции для ASP.NET Core см. в статьях [Размещение ASP.NET Core в Linux с помощью Nginx](/aspnet/core/host-and-deploy/linux-nginx) и [Размещение ASP.NET Core в Linux с помощью Apache](/aspnet/core/host-and-deploy/linux-apache).

## <a name="prepare-your-application-for-debugging"></a>Подготовка приложения к отладке

Подготовка приложения для отладки

- При сборке приложения рассмотрите возможность использования конфигурации "Отладка". Отладка кода, скомпилированного для розничного выпуска (конфигурация "Выпуск"), намного сложнее, чем отладка кода, скомпилированного для отладочного выпуска. Если необходимо использовать конфигурацию "Выпуск", сначала отключите режим "Только мой код". Чтобы отключить этот параметр, последовательно выберите **Сервис** > **Параметры** > **Отладка**, а затем снимите флажок **Включить только мой код**.

- Убедитесь, что проект настроен на создание [переносимых PDB-файлов](https://github.com/OmniSharp/omnisharp-vscode/wiki/Portable-PDBs) (параметр по умолчанию) и что PDB-файлы находятся в том же расположении, что и библиотека DLL. Чтобы выполнить эту настройку в Visual Studio, щелкните проект правой кнопкой мыши, затем выберите **Свойства** > **Сборка** > **Дополнительно** > **Отладочная информация**.

## <a name="build-and-deploy-the-application"></a>Создание и развертывание приложения.

Для развертывания приложения перед отладкой можно использовать несколько методов. Например, с их помощью можно выполнять следующее.

- Скопируйте источники на целевой компьютер и выполните сборку с помощью ```dotnet build``` на компьютере Linux.

- Выполните сборку приложения в Windows, а затем перенесите артефакты сборки на компьютер Linux. (Артефакты сборки включают само приложение, переносимые PDB-файлы, любые библиотеки среды выполнения, от которых может зависеть приложение, и файл *.deps.json*.)

При развертывании приложения запустите приложение.

## <a name="attach-the-debugger"></a>Подключение отладчика

После запуска приложения на компьютере с Linux можно подключить отладчик.

1. В Visual Studio последовательно выберите пункты **Отладка** > **Присоединиться к процессу...** .

1. В списке **Тип подключения** выберите **SSH**.

1. В поле **Цель подключения** укажите IP-адрес или имя узла целевого компьютера.

   Если вы еще не указали учетные данные, вам будет предложено ввести пароль и (или) указать файл закрытого ключа.

   Настраивать порты не требуется, за исключением порта, на котором выполняется сервер SSH.

1. Найдите процесс, который нужно отладить.

   Код выполняется в процессе с уникальным именем или в процессе с именем dotnet. Чтобы найти требуемый процесс, просмотрите столбец **Заголовок**, в котором отображаются аргументы командной строки для процесса.

   В следующем примере показан список процессов на удаленном компьютере Linux, подключенных по протоколу SSH, отображаемых в диалоговом окне **Присоединение к процессу**.

   ![Присоединение к процессу Linux](media/remote-debug-linux-over-ssh-attach.png)

1. Выберите **Присоединиться**.

1. В появившемся диалоговом окне выберите тип кода для отладки. Выберите **Управляемый (.NET Core для Unix)** .

1. Используйте функции отладки Visual Studio для отладки приложения.

   В следующем примере отладчик Visual Studio остановлен в точке останова в коде, выполняющемся на удаленном компьютере Linux.

   ![Попадание в точку останова](media/remote-debug-linux-over-ssh-hit-breakpoint.png)