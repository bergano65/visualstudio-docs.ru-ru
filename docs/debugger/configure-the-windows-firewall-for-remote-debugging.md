---
title: Настройка брандмауэра Windows для удаленной отладки | Документация Майкрософт
ms.date: 10/31/2018
ms.technology: vs-ide-debug
ms.topic: conceptual
ms.assetid: 66e3230a-d195-4473-bbce-8ca198516014
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: da505c6193dd7d05cc10a8e7cec8383f8ee3adfc
ms.sourcegitcommit: 708f77071c73c95d212645b00fa943d45d35361b
ms.translationtype: MTE95
ms.contentlocale: ru-RU
ms.lasthandoff: 12/07/2018
ms.locfileid: "53058601"
---
# <a name="configure-windows-firewall-for-remote-debugging"></a>Настройка брандмауэра Windows для удаленной отладки

В сети, защищенных брандмауэром Windows необходимо настроить брандмауэр, чтобы разрешить удаленную отладку. Visual Studio и инструментов удаленной отладки отладки при попытке открыть необходимые порты брандмауэра во время установки или запуска, но может также потребоваться открывать порты или разрешить приложениям вручную. 

В этом разделе описываются способы настройки брандмауэра Windows, чтобы включить удаленную отладку в Windows 10, 8, Windows 8.1 и 7; и компьютеров Windows Server 2012 R2, 2012 и 2008 R2. Visual Studio и удаленном компьютере нет необходимости работать под управлением одной операционной системы. Например, на компьютере с Visual Studio может использоваться Windows 10, а на удаленном компьютере — Windows Server 2012 R2.      
  
>[!NOTE]
>Инструкции по настройке брандмауэра Windows немного различаются в различных операционных системах, а также для более старых версиях Windows. Параметры Windows 8 и 8.1, Windows 10 и Windows Server 2012, используйте слово *приложения*, тогда как Windows 7 и Windows Server 2008 используется слово *программы*.  

## <a name="configure-ports-for-remote-debugging"></a>Настройка портов для удаленной отладки  

Попробуйте открыть необходимые порты во время установки или запуска Visual Studio и удаленным отладчиком. Однако в некоторых сценариях, например сторонний брандмауэр, может потребоваться открыть порты вручную. 

**Открытие порта:**
  
1. В Windows **запустить** меню найдите и откройте **брандмауэр Windows в режиме повышенной безопасности**. В Windows 10, это **брандмауэр Защитника Windows в режиме повышенной безопасности**.
   
1. Для нового входящего порта, выберите **правила для входящих подключений** , а затем выберите **новое правило**. Исходящее правило, выберите **правила для исходящих подключений** вместо этого.

1. В **мастера**выберите **порт**, а затем выберите **Далее**. 
   
1. Выберите либо **TCP** или **UDP**, в зависимости от номер порта из приведенных ниже таблиц.
   
1. В разделе **определенные локальные порты**, введите номер порта из следующих таблиц и выберите **Далее**.
   
1. Выберите **разрешить подключение**, а затем выберите **Далее**.
   
1. Выберите один или несколько типов сетей, чтобы включить, включая тип сети для удаленного подключения, а затем выберите **Далее**.
   
1. Добавьте имя для правила (например, **msvsmon**, **IIS**, или **веб-развертывания**), а затем выберите **Готово**.

   Новое правило появится и выбрать в **правила для входящих подключений** или **правила для исходящих подключений** списка.

### <a name="ports-on-the-remote-computer-that-enable-remote-debugging"></a>Порты на удаленном компьютере, обеспечивающие удаленную отладку

Удаленная отладка, следующие порты должны быть открыты на удаленном компьютере:

|**Порты**|**Входящий или исходящий**|**Протокол**|**Описание**|   
|-|-|-|-|
|4022|Входящий|TCP|Для Visual Studio 2017. Номер порта, возрастает по 2 для каждой версии Visual Studio. Более подробную информацию см. в разделе [Назначение портов удаленного отладчика Visual Studio](../debugger/remote-debugger-port-assignments.md).|  
|4023|Входящий|TCP|Для Visual Studio 2017. Номер порта, возрастает по 2 для каждой версии Visual Studio. Этот порт является только используется для удаленной отладки 32-разрядного процесса из 64-разрядной версии удаленного отладчика. Более подробную информацию см. в разделе [Назначение портов удаленного отладчика Visual Studio](../debugger/remote-debugger-port-assignments.md).| 
|3702|Исходящий|UDP|(Необязательно) Требуется для обнаружения удаленного отладчика.|    
  
При выборе **режим совместимости управляемого** под **средства** > **параметры** > **Отладка**откройте Эти порты дополнительных удаленный отладчик. Режим совместимости управляемого кода отладчик позволяет прежних версий, версия отладчика в Visual Studio 2010. 

|**Порты**|**Входящий или исходящий**|**Протокол**|**Описание**|  
|-|-|-|-|  
|135, 139, 445|Исходящий|TCP|Обязательный.|  
|137, 138|Исходящий|UDP|Обязательный.|  

Если политика домена требует связи по сети осуществляться по протоколу IPSec, необходимо открыть дополнительные порты как на Visual Studio, так и на удаленных компьютерах. Для отладки на удаленном веб-сервере IIS, откройте порт 80 на удаленном компьютере.

|**Порты**|**Входящий или исходящий**|**Протокол**|**Описание**|  
|-|-|-|-|  
|500, 4500|Исходящий|UDP|Требуется, если в соответствии с политикой домена обмен данными по сети должен осуществляться по протоколу IPSec.|  
|80|Исходящий|TCP|Требуется для отладки веб-сервера.|

Чтобы разрешить конкретные приложения через брандмауэр Windows, см. в разделе [настроить удаленную отладку через брандмауэр Windows](#configure-remote-debugging-through-windows-firewall). 

## <a name="configure-remote-debugging-through-windows-firewall"></a>Настроить удаленную отладку через брандмауэр Windows

Можно установить средства удаленной отладки на удаленном компьютере или запускать их из общей папки. В любом случае необходимо правильно настроить брандмауэр удаленного компьютера. 

На удаленном компьютере средства удаленной отладки находятся в:  
  
*\<Каталог установки Visual Studio\>\\Common7\\IDE\\удаленный отладчик\\\<x86*, *x64*, или  *AppX*\> 
  
### <a name="allow-and-configure-the-remote-debugger-through-windows-firewall"></a>Разрешить и настроить удаленную отладку через брандмауэр Windows 
  
1. В Windows **запустить** меню найдите и откройте **брандмауэра Windows**, или **брандмауэра Защитника Windows**. 
  
1. Выберите **разрешить приложению через брандмауэр Windows**.  
  
1.  Если **удаленный отладчик** или **удаленный отладчик Visual Studio** не отображается в разделе **Разрешенные программы и компоненты**выберите **изменить параметры**, а затем выберите **разрешить другое приложение**. 

1.  Если приложение удаленный отладчик по-прежнему не отображается в **Добавление веб-приложения** диалоговом окне выберите **Обзор**и перейдите к  *\<каталог установки Visual Studio\> \\Common7\\IDE\\удаленный отладчик\\\<x86*, *x64*, или *Appx* \> , в зависимости от соответствующей архитектуры для вашего приложения. Выберите *msvsmon.exe*, а затем выберите **добавить**.  
    
1.  В **приложений** выберите **удаленный отладчик** , вы только что добавили. Выберите **типы сетей**, а затем выберите один или несколько типов сетей, включая тип сети для подключения к удаленному. 
    
1.  Выберите **добавить**, а затем выберите **ОК**.

## <a name="troubleshooting"></a>Устранение неполадок с подключением для удаленной отладки
  
Если не удается подключить к приложению с удаленным отладчиком, убедитесь, что удаленной отладки порты брандмауэра, протоколы, типы сетей и параметров приложения выбраны правильные. 

- В Windows **запустить** меню найдите и откройте **брандмауэра Windows**и выберите **разрешить приложению через брандмауэр Windows**. Убедитесь, что **удаленный отладчик** или **удаленный отладчик Visual Studio** отображается в **Разрешенные программы и компоненты** список с установленным флажком и типы правильная сеть выбран. В противном случае [добавьте правильных приложений и параметры](#configure-remote-debugging-through-windows-firewall).
  
- В Windows **запустить** меню найдите и откройте **брандмауэр Windows в режиме повышенной безопасности**. Убедитесь, что **удаленный отладчик** или **удаленный отладчик Visual Studio** подчеркивается **правила для входящих подключений** (и при необходимости **правила для исходящих подключений**) с зеленым флажком и что все параметры заданы правильно. 
  
  - Чтобы просмотреть или изменить параметры правил, щелкните правой кнопкой мыши **удаленный отладчик** приложения в списке и выберите **свойства**. Используйте **свойства** вкладок, чтобы включить или отключить правило или изменить порт номеров, протоколы и типы сетей. 
  - Если приложение удаленного отладчика не отображается в списке правил [добавьте и настройте необходимые порты](#configure-ports-for-remote-debugging). 

## <a name="see-also"></a>См. также  
[Удаленная отладка](../debugger/remote-debugging.md)

[Назначение портов удаленного отладчика Visual Studio](../debugger/remote-debugger-port-assignments.md)
