---
title: "Визуализация событий EventSource как маркеров | Документы Майкрософт"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-debug
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 3a10022a-5c37-48b1-a833-dd35902176b6
caps.latest.revision: "10"
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: f282d74f59970b3a0366d4576b0c88cae746a5f5
ms.sourcegitcommit: f40311056ea0b4677efcca74a285dbb0ce0e7974
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2017
---
# <a name="visualizing-eventsource-events-as-markers"></a>Визуализация событий EventSource как маркеров
Визуализатор параллелизма может отображать события EventSource в качестве маркеров и предоставляет возможность настройки того, как должны отображаться эти маркеры. Чтобы просмотреть маркеры EventSource, зарегистрируйте GUID поставщика трассировки событий Windows с помощью диалогового окна [Дополнительные параметры](../profiling/advanced-settings-dialog-box-concurrency-visualizer.md). У визуализатора параллелизма по умолчанию есть соглашения по представлению события EventSource как [маркеров флагов](../profiling/flag-markers.md), [маркеров интервалов](../profiling/span-markers.md) и [маркеров сообщений](../profiling/message-markers.md). Вы можете настраивать то, как отображаются события EventSource, путем добавления пользовательских полей в события. Дополнительные сведения о маркерах см. в разделе [Маркеры визуализатора параллелизма](../profiling/concurrency-visualizer-markers.md). Дополнительные сведения о событиях EventSource см. в разделе <xref:System.Diagnostics.Tracing>.  
  
## <a name="default-visualization-of-eventsource-events"></a>Визуализация событий EventSource по умолчанию  
 По умолчанию визуализатор параллелизма использует указанные ниже соглашения по представлению событий EventSource.  
  
### <a name="marker-type"></a>Тип маркера  
  
1.  События с [кодом](http://msdn.microsoft.com/en-us/d97953df-669b-4c55-b1a8-925022b339b7) win:Start или win:Stop рассматриваются как начало или конец интервала соответственно.  Вложенные или перекрывающиеся интервалы не могут отображаться. Пары событий, которые начинаются в одном потоке и заканчиваются в другом, также не могут отображаться.  
  
2.  Событие, код которого отличен от win:Start и win:Stop, рассматривается как флаг маркера, если оно не имеет [уровень](http://msdn.microsoft.com/en-us/dfa4e0a9-4d89-4f50-aef9-1dae0dc11726) (поле EVENT_RECORD.EVENT_HEADER.EVENT_DESCRIPTOR) win:Verbose или выше.  
  
3.  Во всех остальных случаях это событие обрабатывается как сообщение.  
  
### <a name="importance"></a>Важность  
 В приведенной ниже таблице определяется способ сопоставления уровня события и важности маркера.  
  
|Уровень трассировки событий Windows|Важность в визуализаторе параллелизма|  
|---------------|---------------------------------------|  
|win:LogAlways|Норм.|  
|win:Critical|Critical|  
|win:Error|Critical|  
|win:Warning|High|  
|win:Informational|Норм.|  
|win:Verbose|Low|  
|Выше, чем win:verbose|Low|  
  
### <a name="series-name"></a>Имя ряда  
 Имя задачи события используется для имени ряда. Имя ряда остается пустым, если для данного события не указана задача.  
  
### <a name="category"></a>Категория  
 Если уровень — win:Critical или win:Error, то категория — Alert (–1). В противном случае категория имеет значение по умолчанию (0).  
  
### <a name="text"></a>Text  
 Если для события определено сообщение форматированного текста (как для функции printf), то оно отображается в качестве описания маркера. В противном случае описанием будет имя события и значение каждого поля полезных данных.  
  
## <a name="customizing-visualization-of-eventsource-events"></a>Настройка визуализации событий EventSource  
 Вы можете настраивать параметры отображения событий EventSource, добавляя соответствующие поля к событию, как описано в следующих разделах.  
  
### <a name="marker-type"></a>Тип маркера  
 Используйте поле `cvType` типа byte для управления типом маркера, который используется для представления события. Ниже приведены доступные значения для cvType.  
  
|Значение cvType|Итоговый тип маркера|  
|------------------|---------------------------|  
|0|Сообщение|  
|1|Начало интервала|  
|2|Конец интервала|  
|3|Flag|  
|Все остальные значения|Сообщение|  
  
### <a name="importance"></a>Важность  
 Вы можете использовать поле `cvImportance` типа byte, чтобы управлять параметром важности для события EventSource. Однако рекомендуется управлять представляемой важностью события с помощью его уровня.  
  
|Значение cvImportance|Важность в визуализаторе параллелизма|  
|------------------------|---------------------------------------|  
|0|Норм.|  
|1|Critical|  
|2|High|  
|3|High|  
|4|Норм.|  
|5|Low|  
|Все остальные значения|Low|  
  
### <a name="series-name"></a>Имя ряда  
 Используйте строковое поле события `cvSeries`, чтобы управлять именем ряда, которое визуализатор параллелизма назначает событию EventSource.  
  
### <a name="category"></a>Категория  
 Используйте поле `cvCategory` типа byte, чтобы управлять категорией, которую визуализатор параллелизма назначает событию EventSource.  
  
### <a name="text"></a>Text  
 Используйте строковое поле `cvTextW`, чтобы управлять описанием, которое визуализатор параллелизма назначает событию EventSource.  
  
### <a name="spanid"></a>SpanID  
 Используйте поле cvSpanId типа int, чтобы сопоставлять пары событий. Значение для каждой пары событий start — stop, представляющей интервал, должно быть уникальным. Обычно для параллельного кода это требует использования примитивов синхронизации, таких как <xref:System.Threading.Interlocked.Exchange%2A>, для обеспечения правильности ключа (значения, которое используется для CvSpanID).  
  
> [!NOTE]
>  Не поддерживается использование SpanID для вложения интервалов, их частичного перекрытия в одном потоке, а также обеспечения ситуации, когда интервал начинается в одном потоке, а завершается в другом.  
  
## <a name="see-also"></a>См. также  
 [Маркеры визуализатора параллелизма](../profiling/concurrency-visualizer-markers.md)