---
title: Диагностика сбоев задач | Документация Майкрософт
description: Узнайте, как диагностировать сбои задач MSBuild путем определения задачи, завершающейся сбоем, имени средства и других сведений.
ms.custom: SEO-VS-2020
ms.date: 09/25/2019
ms.topic: troubleshooting
f1_keywords:
- MSBuild.ToolTask.ToolCommandFailed
dev_langs:
- VB
- CSharp
- C++
- jsharp
author: ghogen
ms.author: ghogen
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 33aa8787144f185b5bcd2e26df5e7fa90ce3213f
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99877243"
---
# <a name="diagnosing-task-failures"></a>Диагностика сбоев задач

`MSB6006` вызывается, когда класс, производный от <xref:Microsoft.Build.Utilities.ToolTask>, выполняет процесс средства, возвращающий ненулевой код выхода, если задача не зарегистрировала более конкретную ошибку.

## <a name="identifying-the-failing-task"></a>Определение задачи, завершающейся сбоем

При возникновении ошибки задачи в первую очередь нужно определить задачу, которая завершается сбоем.

В тексте ошибки указывается имя инструмента (понятное имя, предоставленное реализацией задачи <xref:Microsoft.Build.Utilities.ToolTask.ToolName>, или имя исполняемого файла) и числовой код выхода. Например, в

```text
error MSB6006: "custom tool" exited with code 1.
```

Имя инструмента — `custom tool`, а код выхода — `1`.

### <a name="command-line-builds"></a>Сборки командной строки

Если сборка настроена для включения сводки (по умолчанию), то сводка будет выглядеть следующим образом:

```text
Build FAILED.

"S:\MSB6006_demo\MSB6006_demo.csproj" (default target) (1) ->
(InvokeToolTask target) ->
  S:\MSB6006_demo\MSB6006_demo.csproj(19,5): error MSB6006: "custom tool" exited with code 1.
```

Этот результат указывает, что ошибка произошла в задаче, определенной в строке 19 файла `S:\MSB6006_demo\MSB6006_demo.csproj`, в целевом объекте с именем `InvokeToolTask` в проекте `S:\MSB6006_demo\MSB6006_demo.csproj`.

### <a name="in-visual-studio"></a>В Visual Studio

Те же сведения доступны в списке ошибок Visual Studio в столбцах `Project`, `File` и `Line`.

## <a name="finding-more-failure-information"></a>Поиск дополнительных сведений об ошибках

Эта ошибка возникает, если задача не регистрирует определенную ошибку. Сбой регистрации ошибки часто возникает, так как в задаче не предусмотрено распознавание формата ошибки, генерируемой средством, которое она вызывает.

Правильно работающие средства обычно выдают некоторые контекстные сведения или сведения об ошибках в стандартный вывод или поток ошибок, а задачи записывают эти сведения по умолчанию. Просмотрите записи журнала до возникновения ошибки, чтобы получить дополнительные сведения. Для сохранения этих сведений может потребоваться перезапустить сборку с более высоким уровнем ведения журнала.

## <a name="next-steps"></a>Дальнейшие действия

Надеемся, что дополнительный контекст или ошибки, обнаруженные в журнале, позволят выявить основную причину проблемы.

В противном случае может потребоваться сократить возможные причины, изучив свойства и элементы, которые являются входными данными для задачи, вызвавшей сбой.
