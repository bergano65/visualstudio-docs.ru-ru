---
title: Задача ResolveAssemblyReference | Документы Майкрософт
description: Сведения об использовании задачи ResolveAssemblyReference в MSBuild для определения всех сборок, зависящих от указанных сборок.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- http://schemas.microsoft.com/developer/msbuild/2003#ResolveAssemblyReference
- MSBuild.ResolveAssemblyReference.TurnOnAutoGenerateBindingRedirects
- MSBuild.ResolveAssemblyReference.FoundConflict
- MSBuild.ResolveAssemblyRedirects.SuggestedRedirects
dev_langs:
- VB
- CSharp
- C++
- jsharp
helpviewer_keywords:
- ResolveAssemblyReference task [MSBuild]
- MSBuild, ResolveAssemblyReference task
ms.assetid: 4d56d848-b29b-4dff-86a2-0a96c9e4a170
author: ghogen
ms.author: ghogen
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 9209fcffed9a15ce51e1aa079bd3efd5ff0bb384
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99912658"
---
# <a name="resolveassemblyreference-task"></a>ResolveAssemblyReference - задача

Определяет все сборки, которые зависят от указанных сборок, включая зависимости второго и `n`-го порядка.

## <a name="parameters"></a>Параметры

 В следующей таблице приводятся параметры задачи `ResolveAssemblyReference` .

|Параметр|Описание|
|---------------|-----------------|
|`AllowedAssemblyExtensions`|Необязательный параметр `String[]`.<br /><br /> Расширения имен файлов сборки для использования при разрешении ссылок. Расширения имен файлов по умолчанию: *.exe* и *.dll*.|
|`AllowedRelatedFileExtensions`|Необязательный параметр `String[]`.<br /><br /> Расширения имен файлов для поиска файлов, связанных друг с другом. Расширения по умолчанию: *.pdb* и *.xml*.|
|`AppConfigFile`|Необязательный параметр `String`.<br /><br /> Указывает файл *app.config*, из которого анализируются и извлекаются сопоставления bindingRedirect. Если этот параметр указан, параметр `AutoUnify` должен иметь значение `false`.|
|`Assemblies`|Необязательный параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` .<br /><br /> Указывает элементы, для которых следует идентифицировать полные пути и зависимости. Имена этих элементов могут быть как простыми, например "System", так и строгими, например "System, Version=2.0.3500.0, Culture=neutral, PublicKeyToken=b77a5c561934e089".<br /><br /> Элементы, переданные в этот параметр, могут дополнительно иметь метаданные следующего элемента:<br /><br /> -   `Private`: значение `Boolean` . Если значение `true`, элемент копируется локально. Значение по умолчанию — `true`.<br />-   `HintPath`: значение `String` . Указывает путь и имя файла для использования в качестве ссылки. Это значение метаданных используется, если в параметре `SearchPaths` указано значение {HintPathFromItem}. Значение по умолчанию - пустая строка.<br />-   `SpecificVersion`: значение `Boolean` . Если значение `true`, имя, указанное в атрибуте `Include` , должно в точности совпадать. Если значение `false`, подойдет любая сборка с таким же простым именем. Если значение `SpecificVersion` не указано, задача проверяет значение в атрибуте `Include` элемента. Если атрибут является простым именем, он ведет себя, как если бы параметр `SpecificVersion` имел значение `false`. Если атрибут является строгим именем, он ведет себя, как если бы параметр `SpecificVersion` имел значение `true`.<br />     При использовании типа элемента ссылки атрибут `Include` должен быть полным фьюжн-именем сборки, которую необходимо разрешить. Сборка разрешается, только если фьюжн точно совпадает с атрибутом `Include` .<br />     Если проект предназначен для определенной версии .NET Framework и ссылается на сборку, скомпилированную для более поздней версии .NET Framework, ссылка разрешается, только если для `SpecificVersion` задано значение `true`.<br />     Если проект предназначен для определенного профиля и ссылается на сборку, которой нет в профиле, ссылка разрешается, только если для `SpecificVersion` задано значение `true`.<br />-   `ExecutableExtension`: значение `String` . Если параметр присутствует, у разрешенной сборки должно быть это расширение. Если параметр отсутствует, сначала рассматривается библиотека *.dll*, а затем файл *.exe* для каждого проверенного каталога.<br />-   `SubType`: значение `String` . Только элементы с пустыми метаданными SubType будут разрешены в путях полной сборки. Элементы с непустыми метаданными SubType пропускаются.<br />-   `AssemblyFolderKey`: значение `String` . Эти метаданные поддерживаются для обратной совместимости. Они указывают пользовательский раздел реестра, такой как **hklm\\\<VendorFolder>** , который следует использовать `Assemblies` для разрешения ссылок на сборки.|
|`AssemblyFiles`|Необязательный параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` .<br /><br /> Указывает список полных сборок, для которых необходимо найти зависимости.<br /><br /> Элементы, переданные в этот параметр, могут дополнительно иметь метаданные следующего элемента:<br /><br /> -   `Private`: необязательное значение `Boolean` . Если задано значение true, элемент копируется локально.<br />-   `FusionName`: необязательные метаданные `String` . Указывает простое или строгое имя для этого элемента. Если этот атрибут присутствует, он может сэкономить время, так как для получения имени не нужно открывать файл сборки.|
|`AutoUnify`|Необязательный параметр `Boolean`.<br /><br /> Этот параметр используется для создания сборок, таких как библиотеки DLL, которые не могут содержать обычный файл *App.Config*.<br /><br /> Если задано значение `true`, полученная схема зависимостей автоматически обрабатывается, как если бы файл *App.Config* был передан в параметр AppConfigFile. Этот виртуальный файл *App.Config* содержит запись bindingRedirect для каждого конфликтующего набора сборок таким образом, что выбирается сборка самой последней версии. Вследствие этого предупреждение о конфликтующих сборках никогда не появляется, так как каждый конфликт разрешается.<br /><br /> Если задано значение `true`, каждое отдельное повторное сопоставление вызывает комментарий с высоким приоритетом, в котором показаны старая и новая версии и то, что параметр `AutoUnify` имел значение `true`.<br /><br /> Если задано значение `true`, параметр AppConfigFile должен быть пустым.<br /><br /> Если задано значение `false`, повторное сопоставление версий сборки не происходит автоматически. При наличии двух версий сборки возникает предупреждение.<br /><br /> Если задано значение `false`, каждый отдельный конфликт между двумя версиями одной сборки приводит к комментарию с высоким приоритетом. После этих комментариев следует одно предупреждение. Предупреждение содержит уникальный код ошибки и следующий текст: «Обнаружены конфликты между различными версиями ссылочной и зависимой сборок».<br /><br /> Значение по умолчанию — `false`.|
|`CandidateAssemblyFiles`|Необязательный параметр `String[]`.<br /><br /> Указывает список сборок, используемых в процессе поиска и разрешения. Значения, переданные в этот параметр, должны быть абсолютными именами файлов или именами файлов проекта.<br /><br /> Сборки в этом списке учитываются, если параметр `SearchPaths` содержит {CandidateAssemblyFiles} в качестве одного из рассматриваемых путей.|
|`CopyLocalDependenciesWhenParentReferenceInGac`|Необязательный параметр <xref:System.Boolean>.<br /><br /> Если задано значение true, для определения того, следует ли копировать зависимость локально, проверяется, заданы ли в родительской ссылке в файле проекта частные метаданные. Если значение задано, частное значение используется в качестве зависимости.<br /><br /> Если метаданные не заданы, зависимость проходит те же проверки, что и родительская ссылка. Одна из этих проверок выполняется, чтобы узнать, находится ли ссылка в глобальном кэше сборок. Если ссылка находится в глобальном кэше сборок, она не копируется локально, так как предполагается, что она находится в глобальном кэше сборок на целевом компьютере. Это применяется только к конкретной ссылке, а не к ее зависимостям.<br /><br /> Например, ссылка в файле проекта, которая находится в глобальном кэше сборок, не копируется локально, но ее зависимости копируются, так как они не находятся в глобальном кэше сборок.<br /><br /> Если задано значение false, проверяется присутствие ссылок на файл проекта в глобальном кэше сборок и они копируются локально.<br /><br /> Проверяется присутствие зависимостей в глобальном кэше сборок, а также то, находится ли родительская ссылка из файла проекта в глобальном кэше сборок.<br /><br /> Если родительская ссылка из файла проекта находится в глобальном кэше сборок, зависимость не копируется локально.<br /><br /> Независимо от того, имеет ли этот параметр значение true или false, при наличии нескольких родительских ссылок, не находящихся в глобальном кэше сборок, все они копируются локально.|
|`CopyLocalFiles`|Необязательный выходной параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` , доступный только для чтения.<br /><br /> Возвращает каждый файл в параметрах `ResolvedFiles`, `ResolvedDependencyFiles`, `RelatedFiles`, `SatelliteFiles`и `ScatterFiles` , который содержит метаданные элемента `CopyLocal` со значением `true`.|
|`FilesWritten`|Необязательный выходной параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` .<br /><br /> Содержит элементы, записанные на диск.|
|`FindDependencies`|Необязательный параметр `Boolean`.<br /><br /> Если значение `true`, выполняется поиск зависимостей. В противном случае выполняется поиск только первичных ссылок. Значение по умолчанию — `true`.|
|`FindRelatedFiles`|Необязательный параметр `Boolean`.<br /><br /> Если значение `true`, выполняется поиск связанных файлов, таких как файлы *.pdb* и файлы *.xml*. Значение по умолчанию — `true`.|
|`FindSatellites`|Необязательный параметр `Boolean`.<br /><br /> Если значение `true`, выполняется поиск вспомогательных сборок. Значение по умолчанию — `true.`|
|`FindSerializationAssemblies`|Необязательный параметр `Boolean`.<br /><br /> Если значение `true`, задача ищет сборки сериализации. Значение по умолчанию — `true`.|
|`FullFrameworkAssemblyTables`|Необязательный параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` .<br /><br /> Указывает элементы, которые содержат метаданные FrameworkDirectory для связи списка redist с определенным каталогом платформы. Если связь не установлена, регистрируется ошибка. Логика разрешения ссылки на сборку (RAR) использует каталог целевой платформы, если значение FrameworkDirectory не задано.|
|`FullFrameworkFolders`|Необязательный параметр <xref:System.String?displayProperty=fullName>`[]` .<br /><br /> Указывает папки, содержащие каталог RedistList. Этот каталог представляет полную платформу для заданного клиентского профиля, например *%programfiles%\reference assemblies\microsoft\framework\v4.0*.|
|`FullTargetFrameworkSubsetNames`|Необязательный параметр `String[]`.<br /><br /> Содержит список имен подсети целевой платформы. Если имя подсети в списке совпадает с именем в свойстве имени `TargetFrameworkSubset` , система исключает эту подсеть целевой платформы во время сборки.|
|`IgnoreDefaultInstalledAssemblyTables`|Необязательный параметр `Boolean`.<br /><br /> Если значение `true`, задача ищет и использует дополнительные установленные таблицы сборок (или "списки Redist"), которые находятся в каталоге *\RedistList* в разделе `TargetFrameworkDirectories`. Значение по умолчанию — `false.`|
|`IgnoreDefaultInstalledAssemblySubsetTables`|Необязательный параметр `Boolean`.<br /><br /> Если значение `true`, задача ищет и использует дополнительные установленные таблицы подмножеств сборки (или "списки подмножеств"), которые находятся в каталоге *\SubsetList* в разделе `TargetFrameworkDirectories`. Значение по умолчанию — `false.`|
|`InstalledAssemblySubsetTables`|Необязательный параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` .<br /><br /> Содержит список XML-файлов, которые указывают сборки, ожидающиеся в целевой подсети.<br /><br /> В качестве альтернативного варианта элементы в этом списке могут указать метаданные FrameworkDirectory для связи `InstalledAssemblySubsetTable`<br /><br /> с каталогом определенной платформы.<br /><br /> Если существует только один элемент `TargetFrameworkDirectories` , любые элементы в этом списке, у которых не хватает метаданных FrameworkDirectory, обрабатываются, как если бы для них было задано уникальное значение, передаваемое в `TargetFrameworkDirectories`.|
|`InstalledAssemblyTables`|Необязательный параметр `String`.<br /><br /> Содержит список XML-файлов, указывающих сборки, которые должны быть установлены на целевом компьютере.<br /><br /> Если задано значение `InstalledAssemblyTables` , более ранние версии сборок в списке объединяются в более новые версии, перечисленные в XML-файле. Кроме того, сборки с параметром InGAC='true' считаются необходимыми компонентами и имеют значение CopyLocal='false', если только это явно не переопределено.<br /><br /> В качестве альтернативного варианта элементы в этом списке могут указывать метаданные FrameworkDirectory для связи `InstalledAssemblyTable` с каталогом определенной платформы.  Однако этот параметр пропускается, если имя Redist не начинается с<br /><br /> Microsoft-Windows-CLRCoreComp.<br /><br /> Если существует только один элемент `TargetFrameworkDirectories` , любые элементы в этом списке, у которых не хватает метаданных FrameworkDirectory, обрабатываются, как если бы для них было задано уникальное значение, передаваемое<br /><br /> делегата `TargetFrameworkDirectories`.|
|`LatestTargetFrameworkDirectories`|Необязательный параметр `String[]`.<br /><br /> Указывает список каталогов, которые содержат списки redist для новейшей платформы, которая может выступать в качестве целевой на компьютере. Если это значение не задано, то используется платформа наибольшей версии, установленная на компьютере для указанного идентификатора целевой платформы.|
|`ProfileName`|Необязательный параметр `String`.<br /><br /> — Указывает имя целевого профиля платформы. Например, клиент, Интернет или сеть.|
|`RelatedFiles`|Необязательный выходной параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` , доступный только для чтения.<br /><br /> Содержит связанные файлы, такие как XML и *.pdb* файлы с таким же базовым именем, что и у ссылки.<br /><br /> Файлы, перечисленные в этом параметре, могут содержать следующие метаданные элемента:<br /><br /> -   `Primary`: значение `Boolean` . Если значение `true`, элемент файла был передан в массив с использованием параметра `Assemblies` . Значение по умолчанию — `false`.<br />-   `CopyLocal`: значение `Boolean` . Указывает, следует ли копировать указанную ссылку в выходной каталог.|
|`ResolvedDependencyFiles`|Необязательный выходной параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` , доступный только для чтения.<br /><br /> Содержит пути *n*-го порядка для зависимостей. Этот параметр не включает первичные ссылки первого порядка, которые содержатся в параметре `ResolvedFiles` .<br /><br /> Элементы в этом параметре могут содержать следующие метаданные элемента:<br /><br /> -   `CopyLocal`: значение `Boolean` . Указывает, следует ли копировать указанную ссылку в выходной каталог.<br />-   `FusionName`: значение `String` . Указывает имя для этой зависимости.<br />-   `ResolvedFrom`: значение `String` . Указывает путь поиска литерала, из которого был разрешен этот файл.|
|`ResolvedFiles`|Необязательный выходной параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` , доступный только для чтения.<br /><br /> Содержит список всех первичных ссылок, разрешенных в полные пути.<br /><br /> Элементы в этом параметре могут содержать следующие метаданные элемента:<br /><br /> -   `CopyLocal`: значение `Boolean` . Указывает, следует ли копировать указанную ссылку в выходной каталог.<br />-   `FusionName`: значение `String` . Указывает имя для этой зависимости.<br />-   `ResolvedFrom`: значение `String` . Указывает путь поиска литерала, из которого был разрешен этот файл.|
|`SatelliteFiles`|Необязательный выходной параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` , доступный только для чтения.<br /><br /> Указывает все найденные вспомогательные файлы. Значение CopyLocal=true, если ссылка или зависимость, вызвавшая этот элемент, имеет значение CopyLocal=true.<br /><br /> Элементы в этом параметре могут содержать следующие метаданные элемента:<br /><br /> -   `CopyLocal`: значение `Boolean` . Указывает, следует ли копировать указанную ссылку в выходной каталог. Это значение равно `true` , если ссылка или зависимость, вызвавшая этот элемент, имеет значение `CopyLocal` , равное `true`.<br />-   `DestinationSubDirectory`: значение `String` . Указывает относительный конечный каталог, в который копируется этот элемент.|
|`ScatterFiles`|Необязательный выходной параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` , доступный только для чтения.<br /><br /> Содержит точечные файлы, связанные с одной из заданных сборок.<br /><br /> Элементы в этом параметре могут содержать следующие метаданные элемента:<br /><br /> -   `CopyLocal`: значение `Boolean` . Указывает, следует ли копировать указанную ссылку в выходной каталог.|
|`SearchPaths`|Обязательный параметр `String[]` .<br /><br /> Указывает каталоги или специальные расположения, в которых выполняется поиск на диске файлов, представляющих сборки. Порядок, в котором перечислены пути поиска, имеет значение. Для каждой сборки поиск по списку путей выполняется слева направо. Когда файл, представляющий сборку, найден, этот поиск останавливается, и начинается поиск для следующей сборки.<br /><br /> Этот параметр принимает разделенный точками с запятой список значений, которые могут быть либо путями к каталогам, либо специальными литеральными значениями из следующего перечня:<br /><br /> -   `{HintPathFromItem}`: указывает, что задача проверит метаданные `HintPath` базового элемента.<br />-   `{CandidateAssemblyFiles}`: указывает, что задача проверит файлы, переданные через параметр `CandidateAssemblyFiles`.<br />-   `{Registry:` \<AssemblyFoldersBase>, \<RuntimeVersion>, \<AssemblyFoldersSuffix>`}`: указывает, что задача выполнит поиск в дополнительных папках, указанных в реестре. \<AssemblyFoldersBase>, \<RuntimeVersion> и \<AssemblyFoldersSuffix> нужно заменить на конкретные значения для расположения в реестре, где требуется искать. Спецификация по умолчанию для общих целевых — {Registry:$(FrameworkRegistryBase), $(TargetFrameworkVersion), $(AssemblyFoldersSuffix), $(AssemblyFoldersExConditions)}.<br />-   `{AssemblyFolders}`: указывает, что задача будет использовать схему поиска сборок из реестра Visual Studio.NET 2003.<br />-   `{GAC}`: указывает, что задача будет выполнять поиск в глобальном кэше сборок.<br />-   `{RawFileName}`: указывает, что задача будет рассматривать значение `Include` элемента в качестве точного пути и имени файла.|
|`SerializationAssemblyFiles`|Необязательный выходной параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` , доступный только для чтения.<br /><br /> Содержит все найденные сборки сериализации XML. Эти элементы помечаются как CopyLocal=true, только если ссылка или зависимость, вызвавшая этот элемент, имеет значение CopyLocal=true.<br /><br /> Свойство CopyLocal метаданных `Boolean` указывает, следует ли копировать указанную ссылку в выходной каталог.|
|`Silent`|Необязательный параметр `Boolean`.<br /><br /> Если значение `true`, сообщения не регистрируются. Значение по умолчанию — `false`.|
|`StateFile`|Необязательный параметр `String`.<br /><br /> Задает имя файла, указывающее, где следует сохранить промежуточное состояние сборки для этой задачи.|
|`SuggestedRedirects`|Необязательный выходной параметр <xref:Microsoft.Build.Framework.ITaskItem>`[]` , доступный только для чтения.<br /><br /> Содержит один элемент для каждого отдельного конфликтующего удостоверения сборки независимо от значения параметра `AutoUnify` . Сюда входят все языки и региональные параметры и найденные PKT, у которых не было подходящей записи bindingRedirect в файле конфигурации приложения.<br /><br /> Каждый элемент может содержать следующие сведения.<br /><br /> -   Атрибут `Include`: содержит полное имя семейства сборок со значением поля "Версия", равным 0.0.0.0.<br />-   Метаданные элемента `MaxVersion`: содержат максимальный номер версии.|
|`TargetedRuntimeVersion`|Необязательный параметр `String`.<br /><br /> Указывает целевую версию среды выполнения, например 2.0.57027 или v2.0.57027.|
|`TargetFrameworkDirectories`|Необязательный параметр `String[]`.<br /><br /> Указывает путь каталога целевой платформы. Этот параметр требуется для определения состояния CopyLocal полученных элементов.<br /><br /> Если этот параметр не указан, никакие полученные элементы не будут иметь значение CopyLocal, равное `true`, если только для них явно не задано значение метаданных `Private`, равное `true` в исходном элементе.|
|`TargetFrameworkMoniker`|Необязательный параметр `String`.<br /><br /> Параметр TargetFrameworkMoniker для отслеживания при его наличии. Используется для ведения журнала.|
|`TargetFrameworkMonikerDisplayName`|Необязательный параметр `String`.<br /><br /> Отображаемое имя TargetFrameworkMoniker для отслеживания при его наличии. Используется для ведения журнала.|
|`TargetFrameworkSubsets`|Необязательный параметр `String[]`.<br /><br /> Содержит список имен подсети целевой платформы для поиска в каталогах целевой платформы.|
|`TargetFrameworkVersion`|Необязательный параметр `String`.<br /><br /> Версия целевой платформы проекта. Значение по умолчанию пустое, что означает, что фильтрация по целевой платформе для ссылок не выполняется.|
|`TargetProcessorArchitecture`|Необязательный параметр `String`.<br /><br /> Предпочитаемая архитектура целевого процессора. Используется для разрешения ссылок на глобальный кэш сборок (GAC).<br /><br /> Этот параметр может иметь значение `x86`, `IA64` или `AMD64`.<br /><br /> Если этот параметр отсутствует, задача сначала учитывает сборки, соответствующие архитектуре выполняющегося процесса. Если не удалось найти сборку, задача учитывает сборки в глобальном кэше сборок, имеющие значение `ProcessorArchitecture` , равное `MSIL` , или не имеющие значение `ProcessorArchitecture` .|

## <a name="warnings"></a>Предупреждения

 Регистрируются следующие предупреждения:

- `ResolveAssemblyReference.TurnOnAutoGenerateBindingRedirects`

- `ResolveAssemblyReference.SuggestedRedirects`

- `ResolveAssemblyReference.FoundConflicts`

- `ResolveAssemblyReference.AssemblyFoldersExSearchLocations`

- `ResolveAssemblyReference.UnifiedPrimaryReference`

- `ResolveAssemblyReference.PrimaryReference`

- `ResolveAssemblyReference.UnifiedDependency`

- `ResolveAssemblyReference.UnificationByAutoUnify`

- `ResolveAssemblyReference.UnificationByAppConfig`

- `ResolveAssemblyReference.UnificationByFrameworkRetarget`

## <a name="remarks"></a>Примечания

 Помимо перечисленных выше параметров, эта задача наследует параметры от класса <xref:Microsoft.Build.Tasks.TaskExtension>, который, в свою очередь, наследует от класса <xref:Microsoft.Build.Utilities.Task>. Список этих дополнительных параметров и их описания см. в статье [Базовый класс TaskExtension](../msbuild/taskextension-base-class.md).

## <a name="see-also"></a>См. также раздел

- [Задачи](../msbuild/msbuild-tasks.md)
- [Справочные сведения о задачах](../msbuild/msbuild-task-reference.md)
