---
title: Указание времени и места применения примечания
ms.date: 11/04/2016
ms.prod: visual-studio-dev15
ms.topic: conceptual
f1_keywords:
- _Group_
- _At_
- _When_
- _At_buffer_
ms.assetid: 8e4f4f9c-5dfa-4835-87df-ecd1698fc650
author: mikeblome
ms.author: mblome
manager: wpickett
ms.workload:
- multiple
ms.openlocfilehash: 4ebdc8592d26c124f98ff9d390e173b6675f09d9
ms.sourcegitcommit: 37fb7075b0a65d2add3b137a5230767aa3266c74
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/02/2019
ms.locfileid: "53863307"
---
# <a name="specifying-when-and-where-an-annotation-applies"></a>Указание времени и места применения примечания
Если примечание условно, оно может требовать, чтобы другие примечания указали на это анализатору.  Например, если функция имеет переменную, которая может быть синхронным или асинхронным, то функция ведет себя следующим образом: В синхронном режиме она всегда завершается успешно, но в асинхронном случае она сообщает об ошибке, если не может завершиться сразу. Когда функция вызывается синхронно, проверка значения результата не представляет никакого значения для анализатора кода, поскольку оно не было возвращено.  Однако если функция вызывается асинхронно и результат функции не проверяется, может возникнуть серьезная ошибка. Этот пример иллюстрирует ситуацию, в которой можно использовать примечание `_When_` для включения проверки, как описано далее в этой статье.

## <a name="structural-annotations"></a>Структурные заметки
 Для того, чтобы контролировать, когда и в каких местах применяются примечания, используйте следующие структурные примечания.

|Комментарий|Описание:|
|----------------|-----------------|
|`_At_(expr, anno-list)`|`expr` является выражением, которое предоставляет lvalue. Заметки в `anno-list` применяются к объекту с именем `expr`. Для каждого примечания в `anno-list`, `expr` интерпретируется в предусловии, если примечание интерпретируется в предусловии, и в постусловии, если примечание интерпретируется в постусловии.|
|`_At_buffer_(expr, iter, elem-count, anno-list)`|`expr` является выражением, которое предоставляет lvalue. Заметки в `anno-list` применяются к объекту с именем `expr`. Для каждого примечания в `anno-list`, `expr` интерпретируется в предусловии, если примечание интерпретируется в предусловии, и в постусловии, если примечание интерпретируется в постусловии.<br /><br /> `iter` — имя переменной с областью видимости в примечании (включая `anno-list`). `iter` имеет неявный тип `long`. С одинаковыми именами переменных в любой внешней области видимости скрыты от оценки.<br /><br /> `elem-count` представляет собой выражение, результатом которого является целым числом.|
|`_Group_(anno-list)`|Примечания в `anno-list` рассматриваются как имеющие любой квалификатор, который применяется к групповому примечанию, применяемому к каждому примечанию.|
|`_When_(expr, anno-list)`|`expr` выражение, которое может быть преобразован в `bool`. Если он не равен нулю (`true`), то примечания, определенные в `anno-list`, считаются применимыми.<br /><br /> По умолчанию для каждого примечания в `anno-list`, `expr` интерпретируется с использованием входных значений, если это примечание с предусловием, и выходных значений, если это примечание с постусловием. Чтобы переопределить настройки по умолчанию, вы можете использовать встроенный `_Old_` для проверки постусловия, чтобы указать, что должны использоваться входные значения. **Примечание.**  Другие примечания могут быть включены как следствие использования `_When_`, если задействовано изменяемое значение, например, `*pLength`, поскольку результат проверки `expr` в предусловии может отличаться от результата, полученного в постусловии.|

## <a name="see-also"></a>См. также

- [Использование аннотаций SAL для уменьшения количества дефектов в коде C/C++](../code-quality/using-sal-annotations-to-reduce-c-cpp-code-defects.md)
- [Основные сведения о языке SAL](../code-quality/understanding-sal.md)
- [Создание примечаний к параметрам и возвращаемым значениям функций](../code-quality/annotating-function-parameters-and-return-values.md)
- [Аннотация поведения функций](../code-quality/annotating-function-behavior.md)
- [Аннотация структур и классов](../code-quality/annotating-structs-and-classes.md)
- [Аннотация поведения блокировки](../code-quality/annotating-locking-behavior.md)
- [Встроенные функции](../code-quality/intrinsic-functions.md)
- [Рекомендации и примеры](../code-quality/best-practices-and-examples-sal.md)