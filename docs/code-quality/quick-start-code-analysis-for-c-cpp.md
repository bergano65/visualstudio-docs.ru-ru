---
title: "Краткое руководство: Анализ кода для C/C++ | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-code-analysis
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- C/C++ code analysis
- code analysis,C/C++
ms.assetid: 6110b8ba-0af6-4acd-b1ba-bb0551f90e44
caps.latest.revision: "8"
author: mikeblome
ms.author: mblome
manager: ghogen
ms.openlocfilehash: 33080a55043f9c88fa8e44a71a863e3a62ab3a1b
ms.sourcegitcommit: fb751e41929f031d1a9247bc7c8727312539ad35
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/15/2017
---
# <a name="quick-start-code-analysis-for-cc"></a>Краткое руководство. Анализ кода для C/C++
Качество приложения можно улучшить путем регулярного выполнения анализа кода C или C++. Это может помочь найти распространенные проблемы, нарушения рекомендаций по программированию или ошибки, которые трудно обнаружить в процессе тестирования. Предупреждения функции анализа кода отличаются от ошибок и предупреждений компилятора, поскольку функция анализа кода выполняет поиск конкретных шаблонов кода, которые являются допустимыми, но тем не менее могут вызвать проблемы при использовании кода.  
  
## <a name="in-this-topic"></a>Содержание раздела  
  
-   [Настройка наборов правил для проекта](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_ConfigureRuleSets)  
  
-   [Запуск анализа кода](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Run)  
  
-   [Анализ и устранение предупреждений анализа кода](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Analyze)  
  
-   [Подавление предупреждений анализа кода](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Suppress)  
  
-   [Создание предупреждения при анализе рабочих элементов для кода](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Creating_work_items_for_code_analysis_warnings)  
  
-   [Поиск и фильтрация результатов анализа кода](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Search)  
  
##  <a name="BKMK_ConfigureRuleSets"></a>Настройка наборов правил для проекта  
  
1.  В **обозревателе решений**, откройте контекстное меню для имени проекта и нажмите кнопку **свойства**.  
  
2.  Следующие действия необязательны.  
  
    1.  В **конфигурации** и **платформы** списки, выберите конфигурацию построения и целевую платформу.  
  
    2.  По умолчанию функция анализа кода выдает предупреждения, связанные с кодом, автоматически созданным внешними средствами. Чтобы просмотреть предупреждения из созданного кода, снимите **исключить результаты из созданного кода** флажок.  
  
        > [!NOTE]
        >  Этот параметр не отключает ошибки и предупреждения из созданного кода, если ошибки и предупреждения появляются в формах и шаблонах. Вы можете просматривать и обслуживать исходный код для формы или шаблона.  
  
3.  Чтобы запустить анализ кода при каждом построении проекта с использованием выбранной конфигурации, выберите **включить анализ кода для C/C++ при сборке** флажок. Можно также выполнить анализ кода вручную, открыв **анализ** меню и затем выбрав **выполнить анализ кода в** *ProjectName*.  
  
4.  В **выполнить этот набор правил** выполните одно из следующих действий:  
  
    -   Выберите набор правил, который хотите использовать.  
  
    -   Выберите  **\<Обзор... >** , чтобы указать существующий настраиваемый набор правил, нет в списке.  
  
    -   Определите настраиваемый набор правил.  
  
         Дополнительные сведения см. в разделе [Создание настраиваемых наборов правил](../code-quality/creating-custom-code-analysis-rule-sets.md).  
  
### <a name="standard-cc-rule-sets"></a>Стандартные наборы правил C/C++  
 Visual Studio включает два стандартных набора правил для машинного кода.  
  
|Набор правил|Описание|  
|--------------|-----------------|  
|Минимально рекомендуемые корпорацией Майкрософт правила для машинного кода|Этот набор правил ориентирован на наиболее важные проблемы в машинном коде, включая возможные уязвимости безопасности и случаи аварийного завершения работы приложений. Этот набор правил можно включить в любой настраиваемый набор правил, созданный для собственных проектов машинного кода.|  
|Рекомендуемые Майкрософт правила для машинного кода|Этот набор правил охватывает широкий спектр проблем. Он включает все правила из набора "Минимально рекомендуемые корпорацией Майкрософт правила для машинного кода".|  
  
##  <a name="BKMK_Run"></a>Запуск анализа кода  
 На странице "Анализ кода" свойств проекта можно настроить выполнение анализа кода при каждой сборке проекта. Кроме того, можно запустить анализ кода вручную.  
  
 Чтобы запустить анализ кода для решения, выполните следующие действия.  
  
-   В меню **Сборка** выберите **Выполнить анализ кода в решении**.  
  
 Чтобы запустить анализ кода для проекта, выполните следующие действия.  
  
-   В обозревателе решений выберите имя проекта.  
  
-   На **построения** меню, выберите **выполнить анализ кода в** *имя проекта*.  
  
 Будет выполнена компиляция проекта или решения и запуск анализа кода. Результаты выводятся в окне "Анализ кода".  
  
##  <a name="BKMK_Analyze"></a>Анализ и устранение предупреждений анализа кода  
 Чтобы проанализировать конкретное предупреждение, выберите заголовок предупреждения в окне "Анализ кода". Предупреждение будет развернуто для отображения дополнительных сведений о проблеме. По возможности функция анализа кода выводит на экран номера строк и логику анализа, вызвавшие предупреждение. Чтобы получить подробные сведения о предупреждении, включая возможные решения проблемы, выберите идентификатор предупреждения, чтобы вывести на экран раздел справки в библиотеке MSND для данного сообщения.  
  
 При развертывании предупреждения вызвавшая его строка кода выделяется в редакторе кода Visual Studio.  
  
 Изучив и поняв причину проблемы, можно разрешить ее в коде. После этого повторно запустите анализ кода, чтобы убедиться, что предупреждение больше не отображается в окне анализа кода и исправление не привело к появлению новых предупреждений.  
  
> [!TIP]
>  Повторно запустить анализ кода можно из окна "Анализ кода". Выберите **анализ** кнопку и выберите область анализа. Можно повторно запустить анализ для всего решения или для выбранного проекта.  
  
##  <a name="BKMK_Suppress"></a> Подавление предупреждений анализа кода  
 В некоторых случаях разработчик может принять решение не разрешать предупреждение анализа кода. Возможно, разрешение предупреждения требует слишком значительного переписывания кода в сравнении с вероятностью того, что проблема проявит себя в какой-либо реальной его реализации. Или, например, разработчик может посчитать, что используемая в предупреждении логика анализа не соответствует данному контексту. Можно подавить отдельные предупреждения, чтобы они больше не отображались в окне "Анализа кода".  
  
 Чтобы отключить предупреждение, выполните следующие действия.  
  
1.  Если подробные сведения не отображаются, выберите заголовок предупреждения, чтобы развернуть его.  
  
2.  Выберите ссылку **Действия** внизу предупреждения.  
  
3.  Выберите **подавить сообщение** и выберите **в исходном**.  
  
 Функция подавления сообщения вставляет идентификатор `#pragma warning (disable:`*WarningId*`)`, который отключает предупреждение для строки кода.  
  
##  <a name="BKMK_Creating_work_items_for_code_analysis_warnings"></a>Создание предупреждения при анализе рабочих элементов для кода  
 Для регистрации ошибок в журнале из среды Visual Studio можно использовать возможность отслеживания рабочих элементов. Чтобы использовать эту возможность, необходимо подключиться к экземпляру Team Foundation Server.  
  
 **Для создания рабочего элемента для одного или нескольких предупреждений кода C/C++**  
  
1.  В окне "Анализ кода" разверните и выберите предупреждения.  
  
2.  В контекстном меню для предупреждений выберите **создать рабочий элемент**, а затем выберите тип рабочего элемента.  
  
3.  Visual Studio создает один рабочий элемент для выбранных предупреждений и отображает рабочий элемент в окне документа интегрированной среды разработки.  
  
4.  Добавьте любые дополнительные сведения, а затем выберите **сохранить рабочий элемент**.  
  
##  <a name="BKMK_Search"></a> Поиск и фильтрация результатов анализа кода  
 Можно выполнять поиск в длинных списках предупреждений, а также фильтровать предупреждения в решениях, состоящих из нескольких проектов.  
  
1.  **Для фильтрации предупреждений по заголовку или идентификатору предупреждения**: Введите ключевое слово в **фильтра** текстовое поле.  
  
2.  **Для фильтрации предупреждений по проекту**: В решении несколько проектов, выберите один или несколько проектов в списке в верхней правой части окна анализа кода. Выберите имя решения, чтобы отобразить все предупреждения.  
  
3.  **Для фильтрации предупреждений по уровню серьезности**: по умолчанию сообщениям функции анализа кода назначается уровень из **предупреждение**. Можно назначить одно или несколько сообщений, как серьезность **ошибка** элементом пользовательского набора правил. Выберите либо **предупреждение** или **ошибка** для отображения только сообщений, которым назначен соответствующий уровень серьезности. Выберите **все** для отображения всех сообщений.