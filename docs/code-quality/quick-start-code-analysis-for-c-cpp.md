---
title: Краткое руководство. Анализ кода для C/C++
ms.date: 11/04/2016
ms.prod: visual-studio-dev15
ms.technology: vs-ide-code-analysis
ms.topic: conceptual
helpviewer_keywords:
- C/C++ code analysis
- code analysis,C/C++
author: mikeblome
ms.author: mblome
manager: wpickett
ms.workload:
- cplusplus
ms.openlocfilehash: 74d613a5f6fe6470e16c86baa4189b46c6f2727f
ms.sourcegitcommit: e13e61ddea6032a8282abe16131d9e136a927984
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="quickstart-code-analysis-for-cc"></a>Краткое руководство: Анализ кода для C/C++

Качество приложения можно улучшить путем регулярного выполнения анализа кода C или C++. Это может помочь найти распространенные проблемы, нарушения рекомендаций по программированию или ошибки, которые трудно обнаружить в процессе тестирования. Предупреждения, возникающие в ходе анализа кода, отличаются от ошибок и предупреждений компилятора, потому что при анализе кода выполняется поиск конкретных шаблонов кода, которые являются допустимыми, но, тем не менее, могут вызвать проблемы при использовании кода вами или другими специалистами.

## <a name="configure-rule-sets-for-a-project"></a>Настройка наборов правил для проекта

1. В **обозревателе решений**, откройте контекстное меню для имени проекта и нажмите кнопку **свойства**.

2. Следующие действия необязательны.

    1. В **конфигурации** и **платформы** списки, выберите конфигурацию построения и целевую платформу.

    2. По умолчанию функция анализа кода выдает предупреждения, связанные с кодом, автоматически созданным внешними средствами. Чтобы просмотреть предупреждения из созданного кода, снимите **исключить результаты из созданного кода** флажок.

        > [!NOTE]
        > Этот параметр не отключает ошибки и предупреждения из созданного кода, если ошибки и предупреждения появляются в формах и шаблонах. Вы можете просматривать и обслуживать исходный код для формы или шаблона.

3. Чтобы запустить анализ кода при каждом построении проекта с использованием выбранной конфигурации, выберите **включить анализ кода для C/C++ при сборке** флажок. Можно также выполнить анализ кода вручную, открыв **анализ** меню и затем выбрав **выполнить анализ кода в** *ProjectName*.

4. В **выполнить этот набор правил** выполните одно из следующих действий:

    - Выберите набор правил, который хотите использовать.

    - Выберите  **\<Обзор... >** , чтобы указать существующий настраиваемый набор правил, нет в списке.

    - Определение [настраиваемый набор правил](../code-quality/how-to-create-a-custom-rule-set.md).

### <a name="standard-cc-rule-sets"></a>Стандартные наборы правил C/C++

Visual Studio включает два стандартных набора правил для машинного кода.

|Набор правил|Описание|
|--------------|-----------------|
|Минимально рекомендуемые корпорацией Майкрософт правила для машинного кода|Этот набор правил ориентирован на наиболее важные проблемы в машинном коде, включая возможные уязвимости безопасности и случаи аварийного завершения работы приложений. Этот набор правил можно включить в любой настраиваемый набор правил, созданный для собственных проектов машинного кода.|
|Рекомендуемые Майкрософт правила для машинного кода|Этот набор правил охватывает широкий спектр проблем. Он включает все правила из набора "Минимально рекомендуемые корпорацией Майкрософт правила для машинного кода".|

## <a name="run-code-analysis"></a>Запуск анализа кода

На странице "Анализ кода" свойств проекта можно настроить выполнение анализа кода при каждой сборке проекта. Кроме того, можно запустить анализ кода вручную.

Чтобы запустить анализ кода для решения, выполните следующие действия.

- В меню **Сборка** выберите **Выполнить анализ кода в решении**.

 Чтобы запустить анализ кода для проекта, выполните следующие действия.

- В обозревателе решений выберите имя проекта.

- На **построения** меню, выберите **выполнить анализ кода в** *имя проекта*.

 Будет выполнена компиляция проекта или решения и запуск анализа кода. Результаты отображаются в списке ошибок.

## <a name="analyze-and-resolve-code-analysis-warnings"></a>Анализ и устранение предупреждений функции анализа кода

Чтобы проанализировать конкретное предупреждение, выберите заголовок предупреждения в списке ошибок. Предупреждение будет развернуто для отображения дополнительных сведений о проблеме. По возможности функция анализа кода выводит на экран номера строк и логику анализа, вызвавшие предупреждение. Дополнительные сведения о предупреждении, включая возможные решения проблемы выберите идентификатор предупреждения, чтобы отобразить его соответствующего раздела справки в Интернете.

При выборе предупреждение строку кода, которая вызвала предупреждение, выделяется в редакторе кода Visual Studio.

Поняв, в чем заключается проблема, можно разрешить ее в коде. Затем повторно запустите анализ кода, чтобы убедиться в том, что предупреждение больше не отображается в списке ошибок и что исправление не привело к появлению все новые предупреждения.

## <a name="suppress-code-analysis-warnings"></a>Отключение предупреждений анализа кода

В некоторых случаях разработчик может принять решение не разрешать предупреждение анализа кода. Возможно, разрешение предупреждения требует слишком значительного переписывания кода в сравнении с вероятностью того, что проблема проявит себя в какой-либо реальной его реализации. Или, например, разработчик может посчитать, что используемая в предупреждении логика анализа не соответствует данному контексту. Можно подавить отдельные предупреждения, чтобы они больше не отображались в списке ошибок.

Чтобы подавить предупреждение, выполните следующие действия.

1. Если подробные сведения не отображаются, выберите заголовок предупреждения, чтобы развернуть его.

2. Выберите ссылку **Действия** внизу предупреждения.

3. Выберите **подавить сообщение** и выберите **в исходном**.

 Функция подавления сообщения вставляет идентификатор `#pragma warning (disable:`*WarningId*`)`, который отключает предупреждение для строки кода.

## <a name="create-work-items-for-code-analysis-warnings"></a>Создание предупреждения при анализе рабочих элементов для кода

Для регистрации ошибок в журнале из среды Visual Studio можно использовать возможность отслеживания рабочих элементов. Чтобы использовать эту возможность, необходимо подключиться к экземпляру Team Foundation Server.

**Для создания рабочего элемента для одного или нескольких предупреждений кода C/C++**

1. В списке ошибок разверните и выберите предупреждения.

2. В контекстном меню для предупреждений выберите **создать рабочий элемент**, а затем выберите тип рабочего элемента.

3. Visual Studio создает один рабочий элемент для выбранных предупреждений и отображает рабочий элемент в окне документа интегрированной среды разработки.

4. Добавьте любые дополнительные сведения, а затем выберите **сохранить рабочий элемент**.

## <a name="search-and-filter-code-analysis-results"></a>Поиск и фильтрация результатов анализа кода

Можно выполнять поиск в длинных списках предупреждений, а также фильтровать предупреждения в решениях, состоящих из нескольких проектов.

- **Для фильтрации предупреждений по заголовку или идентификатору предупреждения**: Введите ключевое слово в поле поиска.

- **Для фильтрации предупреждений по уровню серьезности**: по умолчанию сообщениям функции анализа кода назначается уровень из **предупреждение**. Можно назначить одно или несколько сообщений, как серьезность **ошибка** элементом пользовательского набора правил. На **серьезность** столбец **список ошибок**, выберите стрелку раскрывающегося списка, а затем значок фильтра. Выберите **предупреждение** или **ошибка** для отображения только сообщений, которым назначен соответствующий уровень серьезности. Выберите **выделить все** для отображения всех сообщений.

## <a name="see-also"></a>См. также

[Анализ кода для C/C++](../code-quality/code-analysis-for-c-cpp-overview.md)