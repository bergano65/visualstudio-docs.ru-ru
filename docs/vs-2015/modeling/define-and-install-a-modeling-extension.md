---
title: Определение и Установка расширения моделирования | Документация Майкрософт
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-tfs-dev14
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- UML - extending
- UML model, extending
ms.assetid: 82a58dc5-c7cf-4521-a6da-7ff09cd0de9d
caps.latest.revision: 39
author: alexhomer1
ms.author: gewarren
manager: douge
ms.openlocfilehash: c6ed7f72a8125d2307b91cd829bd6f474145fa78
ms.sourcegitcommit: 240c8b34e80952d00e90c52dcb1a077b9aff47f6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2018
ms.locfileid: "49827484"
---
# <a name="define-and-install-a-modeling-extension"></a>Определение и установка расширения моделирования
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

В Visual Studio можно определять расширения для схем моделирования. Таким образом можно адаптировать схемы и модели под свои потребности. Например, можно определить команды меню, профили UML, ограничения проверки и элементы панели элементов. В одном расширении можно определить несколько компонентов. Можно также предоставить эти расширения другим пользователям Visual Studio в виде [Visual Studio Integration Extension (VSIX)](http://go.microsoft.com/fwlink/?LinkId=160780). Расширение VSIX можно создать с помощью проекта VSIX в Visual Studio.  
  
## <a name="requirements"></a>Требования  
 См. раздел [Требования](../modeling/extend-uml-models-and-diagrams.md#Requirements).  
  
 Чтобы узнать, какие версии Visual Studio поддерживают эту функцию, см. раздел [Version support for architecture and modeling tools](../modeling/what-s-new-for-design-in-visual-studio.md#VersionSupport).  
  
## <a name="creating-a-modeling-extension-solution"></a>Создание решения расширения моделирования  
 Чтобы определить расширение моделирования, необходимо создать решение, содержащее перечисленные ниже проекты.  
  
- Проект [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] Integration Extension (VSIX). Он создает файл, который выступает в качестве установщика для компонентов расширения.  
  
- Проект библиотеки классов, необходимый для компонентов, включающих в себя код программы.  
  
  Если вы хотите создать расширение, которое содержит несколько компонентов, их можно разрабатывать в одном решении. Требуется только один проект VSIX.  
  
  Компоненты, которые не требуют кода, например пользовательские элементы, панели элементов и пользовательские профили UML, можно добавить непосредственно в проект VSIX без использования отдельных проектов библиотеки классов. Компоненты, которым требуется программный код, проще определить в отдельном проекте библиотеки классов. Компоненты, которым требуется код, включают в себя обработчики жестов, команды меню и код проверки.  
  
#### <a name="to-create-a-class-library-project-for-menu-commands-gesture-handlers-or-validation"></a>Создание проекта библиотеки классов для команд меню, обработчиков жестов или проверки  
  
1.  В меню **Файл** последовательно выберите пункты **Создать**и **Проект**.  
  
2.  В разделе **Установленные шаблоны**выберите узел **Visual C#** или **Visual Basic**, а затем выберите пункт **Библиотека классов**.  
  
#### <a name="to-create-a-vsix-project"></a>Создание проекта VSIX  
  
1.  При создании компонента с кодом проще сначала создать проект библиотеки классов. Вы добавите код в этот проект.  
  
2.  Создайте проект VSIX.  
  
    1.  В контекстном меню решения в **обозревателе решений**выберите пункт **Добавить**, а затем **Новый проект**.  
  
    2.  В разделе **Установленные шаблоны**разверните узел **Visual C#** или **Visual Basic**и выберите пункт **Расширение среды**. В среднем столбце выберите пункт **Проект VSIX**.  
  
3.  Назначьте проект VSIX запускаемым проектом решения.  
  
    -   В контекстном меню проекта VSIX в обозревателе решений выберите пункт **Назначить запускаемым проектом**.  
  
4.  Откройте **source.extension.vsixmanifest**. Файл откроется в редакторе манифестов.  
  
5.  На вкладке **Метаданные** задайте имя и поля описания VSIX.  
  
6.  На вкладке **Цели установки** выберите команду **Создать** и задайте версии Visual Studio в качестве целевых сред.  
  
7.  На вкладке **Активы** добавьте компоненты в расширение Visual Studio.  
  
    1.  Выберите **Создать**.  
  
    2.  Для компонента с кодом задайте в диалоговом окне **Добавить новый актив** следующие поля:  
  
        |||  
        |-|-|  
        |**Тип** =|**Microsoft.VisualStudio.MefComponent**|  
        |**Source** =|**Проект в текущем решении**|  
        |**Проект** =|*Ваш проект библиотеки классов*|  
        |**Внедрять в эту папку** =|*(пустое)*|  
  
         Для остальных типов компонентов см. ссылки в следующем разделе.  
  
## <a name="developing-the-component"></a>Разработка компонента  
 Для каждого компонента, такого как команда меню или обработчик жестов, необходимо определить отдельный обработчик. В один проект библиотеки классов можно поместить несколько обработчиков. В приведенной ниже таблице перечислены различные виды обработчиков.  
  
|Тип расширения|Раздел|Обычный способ объявления каждого компонента|  
|--------------------|-----------|----------------------------------------------|  
|Команда меню|[Определение команды меню на схеме моделирования](../modeling/define-a-menu-command-on-a-modeling-diagram.md)|`[ClassDesignerExtension]`<br /><br /> `// or other diagram types`<br /><br /> `[Export(typeof(ICommandExtension))]`<br /><br /> `public class MyCommand : ICommandExtension`<br /><br /> `{...`|  
|Перетаскивание или двойной щелчок|[Определение обработчика жестов на схеме моделирования](../modeling/define-a-gesture-handler-on-a-modeling-diagram.md)|`[ClassDesignerExtension]`<br /><br /> `// or other diagram types`<br /><br /> `[Export(typeof(IGestureExtension))]`<br /><br /> `public class MyGesture : IGestureExtension`<br /><br /> `{...`|  
|Ограничение проверки|[Определение ограничений проверки для моделей UML](../modeling/define-validation-constraints-for-uml-models.md)|`[Export(typeof(     System.Action<ValidationContext, object>))]`<br /><br /> `[ValidationMethod(ValidationCategories.Save`<br /><br /> `&#124; ValidationCategories.Menu)]`<br /><br /> `public void ValidateSomething`<br /><br /> `(ValidationContext context, IClassifier elementToValidate)`<br /><br /> `{...}`|  
|Обработчик событий связи рабочего элемента|[Определение обработчика связей рабочего элемента](../modeling/define-a-work-item-link-handler.md)|`[Export(typeof(ILinkedWorkItemExtension))]`<br /><br /> `public class MyWorkItemEventHandler : ILinkedWorkItemExtension`<br /><br /> `{...`|  
|Профиль UML|[Определение профиля для расширения UML](../modeling/define-a-profile-to-extend-uml.md)|(Требует уточнения)|  
|Элемент панели элементов|[Определение пользовательского элемента для панели элементов моделирования](../modeling/define-a-custom-modeling-toolbox-item.md)|(Требует уточнения)|  
  
## <a name="running-an-extension-during-its-development"></a>Запуск расширения во время его разработки  
  
#### <a name="to-run-an-extension-during-its-development"></a>Запуск расширения во время его разработки  
  
1.  В меню **Отладка** [!INCLUDE[vs_current_short](../includes/vs-current-short-md.md)] выберите пункт **Начать отладку**.  
  
     Выполняется сборка проекта, и новый экземпляр [!INCLUDE[vs_current_short](../includes/vs-current-short-md.md)] запускается в экспериментальном режиме.  
  
    -   Можно также выбрать пункт **Запуск без отладки**. Это уменьшает время, необходимое для запуска программы.  
  
2.  Создайте или откройте проект моделирования в экспериментальном экземпляре Visual Studio и создайте или откройте схему.  
  
     Выполняется загрузка и запуск расширения.  
  
3.  Если был выбран параметр **Запуск без отладки** и необходимо использовать отладчик, вернитесь в основной экземпляр Visual Studio. В меню **Отладка** выберите пункт **Прикрепить к процессу**. В диалоговом окне выберите экспериментальный экземпляр Visual Studio, который имеет имя программы **devenv**.  
  
##  <a name="Installing"></a> Установка и удаление расширения  
 Выполните указанные ниже действия, чтобы запустить расширение в основном экземпляре Visual Studio на своем компьютере или на других компьютерах.  
  
1.  На своем компьютере найдите файл **.vsix** , который был создан проектом расширения.  
  
    1.  В контекстном меню проекта в **обозревателе решений**выберите пункт **Открыть папку в проводнике Windows**.  
  
    2.  Найдите файл **bin\\\*\\**_Ваш_проект_**.vsix**  
  
2.  Скопируйте файл **.vsix** на компьютер, где необходимо установить расширение. Это может быть как ваш собственный компьютер, так и любой другой.  
  
    -   На конечном компьютере должен быть один из выпусков Visual Studio, указанных на вкладке **Цели установки** в **source.extension.vsixmanifest**.  
  
3.  На конечном компьютере откройте файл **.vsix** , например дважды щелкнув его.  
  
     Откроется**установщик расширений Visual Studio** , который устанавливает расширение.  
  
4.  Запустите или перезапустите Visual Studio.  
  
#### <a name="to-uninstall-an-extension"></a>Удаление расширения  
  
1. В меню **Сервис** выберите пункт **Расширения и обновления**.  
  
2. Разверните узел **Установленные расширения**.  
  
3. Выберите расширение и щелкните **Удалить**.  
  
   Иногда неисправное расширение не удается загрузить, в результате чего в окне ошибок создается отчет, который не отображается в диспетчере расширений. В этом случае расширение можно удалить, удалив файл из следующего расположения где *% LocalAppData %* обычно *DriveName*: \Users\\*имяпользователя*\AppData\Local:  
  
   *% LocalAppData %* **\Microsoft\VisualStudio\\\Extensions [версия]**  
  
## <a name="see-also"></a>См. также  
 [Определение профиля для расширения UML](../modeling/define-a-profile-to-extend-uml.md)   
 [Определение настраиваемого элемента панели элементов моделирования](../modeling/define-a-custom-modeling-toolbox-item.md)   
 [Определение ограничений проверки для моделей UML](../modeling/define-validation-constraints-for-uml-models.md)   
 [Определение команды меню на схеме моделирования](../modeling/define-a-menu-command-on-a-modeling-diagram.md)



