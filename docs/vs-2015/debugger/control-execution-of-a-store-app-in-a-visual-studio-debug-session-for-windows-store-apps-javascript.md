---
title: Управление выполнением приложения Store в сеансе отладки Visual Studio для приложений Windows Store (JavaScript) | Документация Майкрософт
ms.custom: ''
ms.date: 2018-06-30
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-ide-debug
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- FSharp
- VB
- CSharp
- C++
ms.assetid: 60159535-61ec-466a-a4a6-115ec72a8af5
caps.latest.revision: 19
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: e5725dc2be204ae3b657a857c5a358a29b8c3709
ms.sourcegitcommit: 55f7ce2d5d2e458e35c45787f1935b237ee5c9f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2018
ms.locfileid: "47559897"
---
# <a name="control-execution-of-a-store-app-in-a-visual-studio-debug-session-for-windows-store-apps-javascript"></a>Управление выполнением приложения Магазина в сеансе отладки Visual Studio для приложений Магазина Windows (JavaScript)
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Последнюю версию этого раздела можно найти в [управления выполнением приложения Store в сеансе отладки Visual Studio для приложений Windows Store (JavaScript)](https://docs.microsoft.com/visualstudio/debugger/control-execution-of-a-store-app-in-a-visual-studio-debug-session-for-windows-store-apps-javascript).  
  
В этом кратком руководстве описывается процедура навигации по отладчику Visual Studio, а также способы просмотра состояния программы в сеансе.  
  
 Это краткое руководство предназначено для разработчиков, которые не знакомы с методами отладки с помощью Visual Studio, и для разработчиков, которые хотят узнать больше о навигации по сеансу отладки Visual Studio. Оно не предназначено для обучения самому искусству отладки. Функции в примере кода приводятся только для демонстрации процедур отладки, описанных в этом разделе. Они не отражают рекомендуемые методы разработки приложений и принципы оптимального кодирования. На самом деле вы быстро поймете, что и функции, и само приложение практически ничего не делают.  
  
 Разделы данного краткого руководства были запланированы как абсолютно независимые, поэтому вы можете пропустить любой раздел, содержащий уже знакомую вам информацию. Создавать пример приложения необязательно. Тем не менее мы рекомендуем его создать и постарались максимально упростить этот процесс.  
  
 **Сочетания клавиш отладчика.** Навигация в отладчике Visual Studio оптимизирована как для мыши, так и для клавиатуры. Для многих действий, описанных в этом разделе, в скобках указаны клавиши или сочетания клавиш для быстрого доступа. Например, примечание (клавиша F5) указывает, что нажатие клавиши F5 приводит к запуску или продолжению выполнения кода отладчиком.  
  
> [!NOTE]
>  **Шаблон "модуль"**  
>   
>  В приложениях Магазина Windows часто используется *шаблон "Модуль"* JavaScript, предназначенный для инкапсуляции данных и функций на странице. Шаблон "Модуль" включает одно самозапускающееся анонимное замыкание для отделения функциональных возможностей страницы от глобального пространства имен. В этом разделе эта функция называется *module*.  
  
## <a name="in-this-topic"></a>Содержание раздела  
 Вы научитесь:  
  
 [Создание примера приложения](#BKMK_Create_the_sample_app)  
  
 [Настройка и запуск до точки останова, шаг с заходом в функцию и изучение  данных программы](#BKMK_Set_and_run_to_a_breakpoint__step_into_a_function__and_examine_program_data)  
  
 [Шаг с заходом в функцию, обходом функции и выходом из функции](#BKMK_Step_into__over__and_out_of_functions)  
  
 [Задайте условную точку останова, выполните до текущей позиции и визуализируйте переменную.](#BKMK_Set_a_conditional_breakpoint__run_to_the_cursor__and_visualize_a_variable)  
  
 [Просмотр переменных данных в окне "Локальные"](#BKMK_View_variable_data_in_the_Locals_window)  
  
-   [Просмотр переменных данных и цепочки прототипов объекта](#BKMK_View_variable_data_and_the_prototype_chain_of_an_object)  
  
-   [Анализ данных в цепочке областей видимости](#BKMK_Examine_scope_chain_data)  
  
 [Переход к коду с помощью окна стека вызовов](#BKMK_Navigate_to_code_by_using_the_Call_Stack_window)  
  
##  <a name="BKMK_Create_the_sample_app"></a> Создание примера приложения  
 Отладка — это работа с кодом, поэтому структура примера приложения Магазина Windows используется только для создания исходного файла, в котором можно увидеть, как работает навигация по сеансу отладки и как узнать состояние программы. Любой вызываемый вами код будет браться из функции `module` файла default.js. Элементы управления при этом не добавляются, а события не обрабатываются.  
  
1.  **Создайте пустое приложение JavaScript для Магазина Windows.** Запустите Visual Studio. На домашней странице выберите ссылку **Новый проект** . В диалоговом окне **Новый проект** выберите **JavaScript** в списке **Установленные** , а затем выберите **Магазин Windows**. В списке шаблонов проектов выберите **Пустое приложение**. Visual Studio создаст новое решение и проект и откроет файл default.htm в редакторе кода.  
  
     Обратите внимание на файлы скриптов, загружаемые в страницу.  
  
    -   Файлы `base.js` и `ui.js` формируют **библиотеку Windows для JavaScript**. Библиотека Windows для JavaScript — это набор файлов JavaScript и CSS, упрощающих создание приложений для Магазина Windows с использованием JavaScript. Используйте ее для создания приложения вместе с HTML, CSS и средой выполнения Windows.  
  
    -   Ваш код запустится в файле `default.js`  .  
  
2.  **Откройте исходный файл default.js.** В обозревателе решений откройте узел **js** и выберите `default.js`.  
  
3.  **Замените содержимое страницы на пример кода.** Удалите все содержимое из файла `default.js` . Перейдите по ссылке [Debugger navigation sample code (JavaScript)](../debugger/debugger-navigation-sample-code-javascript.md), а затем скопируйте код, указанный в разделе JavaScript, в буфер обмена. (Выберите **обратно** в браузере или окне справки, чтобы вернуться на эту страницу быстрого запуска.) В редакторе Visual Studio вставьте код в пока пустой файл `default.js`. Нажмите клавиши **CTRL+S** , чтобы сохранить файл.  
  
 После этого можно выполнить примеры, приведенные в этом разделе.  
  
##  <a name="BKMK_Set_and_run_to_a_breakpoint__step_into_a_function__and_examine_program_data"></a> Настройка и запуск до точки останова, шаг с заходом в функцию и изучение  данных программы  
 Самый распространенный способ начать сеанс отладки — выбрать пункт **Начать отладку** в меню **Отладка** (F5). Приложение запустится и будет выполняться до достижения точки останова, приостановления выполнения вручную, возникновения исключения или завершения работы приложения.  
  
 При приостановке выполнения в отладчике можно просмотреть значение активной переменной в подсказке, которая отображается при наведении указателя мыши на переменную.  
  
 Прервав выполнение приложения (вмешавшись в работу отладчика), вы можете выбрать порядок выполнения остальной части кода программы: построчно, с переходом от вызова функции в саму функцию или путем выполнения вызванной функции в один шаг. Эти процедуры называются пошаговым выполнением приложения. Также можно возобновить стандартное выполнение приложения до следующей заданной точки останова или до строки, в которой размещен курсор. Сеанс отладки можно остановить в любой момент. Отладчик выполняет необходимые операции очистки и завершает выполнение.  
  
###  <a name="BKMK_Example_1"></a> Пример 1  
 В этом примере вы зададите точку останова в теле функции `module` в файле `default.js` в том месте, где она вызывает первый из пользовательских операторов. Затем вы выполните шаг с заходом в функцию, просмотрите значения переменных в подсказках отладчика и остановите отладку.  
  
1.  **Задайте точку останова.** Задайте в операторе `callTrack = "module function";` точку останова, которая будет появляться сразу после вызова `app.start()`. Выберите строку на затененном переплете редактора исходного кода (клавиатура: поместите курсор в строке и нажмите клавишу **F9** ).  
  
     ![Установите точку останова на example1](../debugger/media/dbg-jsnav-example1-breakpoint.png "DBG_JSNAV_example1_breakpoint")  
  
     На переплете отобразится значок точки останова.  
  
2.  **Выполните код до точки останова.** Запустите сеанс отладки, выбрав **Начать отладку** on the **Отладка** (F5).  
  
     Начинается выполнение приложения. Выполнение приостанавливается непосредственно перед оператором, для которого задана точка останова. Значок текущей строки на переплете определяет расположение, а текущий оператор выделяется.  
  
     ![Запуск до точки останова](../debugger/media/dbg-jsnav-example1-run-to-breakpoint.png "DBG_JSNAV_example1_run_to_breakpoint")  
  
     Теперь вы можете контролировать выполнение приложения и проверять состояние программы при пошаговом выполнении операторов.  
  
3.  **Шаг с заходом в функцию.** В диалоговом окне **Отладка** выберите команду **Шаг с заходом** (клавиша **F11**).  
  
     ![Шаг с заходом в строку кода](../debugger/media/dbg-jsnav-example1-step-into.png "DBG_JSNAV_example1_step_into")  
  
     Обратите внимание, что отладчик переходит к следующей строке, которая представляет собой вызов функции `example1` . Выполните команду **Шаг с заходом** еще раз. Отладчик перейдет к первой строке кода функции `example1` . Выделенная строка еще не выполнена, но функция уже загружена в стек вызовов и выделена память для локальных переменных.  
  
4.  При заходе в строку кода отладчик выполняет одно из следующих действий.  
  
    -   Если следующий оператор не является вызовом функции в вашем решении, отладчик выполняет оператор, переходит к следующему оператору, а затем приостанавливает выполнение.  
  
    -   Если следующий оператор вызывает функцию в вашем решении, отладчик переходит к первой строке вызванной функции и приостанавливает выполнение.  
  
     Продолжайте выполнять шаги с заходом в операторы `example1` , пока не достигните точки выхода. Отладчик выделяет закрывающую фигурную скобку функции.  
  
5.  **Просмотр значений переменных в подсказках по данным.** Продолжайте выполнять шаги с заходом в операторы `example1` , пока не достигните точки выхода. Отладчик выделяет закрывающую фигурную скобку функции. При наведении указателя мыши на имя переменной в подсказке отображаются имя и значение переменной.  
  
     ![Просмотр значений переменных в подсказке по данным](../debugger/media/dbg-jsnav-data-tip.png "DBG_JSNAV_data_tip")  
  
6.  **Добавление контрольного значения для переменной callTrack.** Файлы `callTrack` . Чтобы упростить просмотр значения этой переменной, добавьте ее в окно контрольных значений. Выберите имя переменной в редакторе, а затем выберите в контекстном меню команду **Добавить контрольное значение** .  
  
     ![Наблюдение за переменной](../debugger/media/dbg-jsnav-watch-window.png "DBG_JSNAV_watch_window")  
  
     В окне контрольных значений можно отслеживать несколько переменных. Значения контролируемых переменных, как и значения в подсказках, обновляются при каждой приостановке выполнения. Контролируемые переменные сохраняются и используются во всех сеансах отладки.  
  
7.  **Остановите отладку.** В диалоговом окне **Отладка** выберите команду **Остановить отладку** (клавиша **SHIFT+F5**). Это приведет к завершению сеанса отладки.  
  
##  <a name="BKMK_Step_into__over__and_out_of_functions"></a> Шаг с заходом в функцию, обходом функции и выходом из функции  
 В отличие от шага с заходом в функцию, вызванную родительской функцией, шаг с обходом функции выполняет дочернюю функцию и приостанавливает выполнение родительской функции в момент возобновления ее выполнения. Шаг с обходом функции можно выполнять, если вы знаете, как работает соответствующая функция, и уверены, что ее выполнение не повлияет на проблему, которую вы пытаетесь устранить.  
  
 Шаг с обходом строки кода, которая не включает вызов функции, выполняет строку таким же образом, как и шаг с заходом в строку.  
  
 Шаг с выходом из дочерней функции продолжает выполнение функции и затем приостанавливает выполнение после возврата функции в вызывающую функцию. Вы можете выполнить шаг с выходом из функции long, если определено, что остальная часть функции не имеет значения.  
  
 И шаг с обходом, и шаг с выходом из функции приводит к выполнению функции.  
  
 ![Шаг с заходом, с обходом и c выходом из метода](../debugger/media/dbg-basics-stepintooverout.png "DBG_Basics_StepIntoOverOut")  
  
###  <a name="BKMK_Example_2"></a> Пример 2  
 В данном примере выполняется шаг с заходом в функцию, шаг с обходом функции и шаг с выходом из функции.  
  
1.  **Вызов функции example2 в функции module.** Отредактируйте функцию `module` , заменив строку после `var callTrack = "module function"` на `example2();`.  
  
     ![Вызов функции example2](../debugger/media/dbg-jsnav-example2.png "DBG_JSNAV_example2")  
  
2.  **Выполните код до точки останова.** Запустите сеанс отладки, выбрав **Начать отладку** on the **Отладка** (F5). Отладчик приостанавливает выполнение в точке останова.  
  
3.  **Выполните шаг с обходом строки кода.** В диалоговом окне **Отладка** выберите команду **Шаг с обходом** (клавиша F10). Отладчик выполняет оператор `var callTrack = "module function"` таким же образом, как шаг с заходом в оператор.  
  
4.  **Выполните шаг с заходом в example2 и example2_A.** Нажмите клавишу **F11** , чтобы выполнить шаг с заходом в функцию `example2` . Продолжайте выполнять шаги с заходом в операторы `example2` , пока не дойдете до строки `var x = example2_a();`. Выполните шаг с заходом в эту строку, чтобы перейти к точке входа `example2_a`. Продолжайте выполнять шаги с заходом в каждый оператор `example2_a` , пока не вернетесь к функции `example2`.  
  
     ![Шаг с обходом функции](../debugger/media/dbg-jsnav-example2-a.png "DBG_JSNAV_example2_a")  
  
5.  **Выполните шаг с обходом функции.** Обратите внимание, что следующая строка в `example2`— `var y = example2_a();` — в основном совпадает с предшествующей строкой. Можно спокойно пропустить эту строку. Нажмите клавишу **F10** , чтобы перейти от возобновления `example2` ко второму вызову `example2_a`. Обратите внимание, что, согласно строке `callTrack` , функция `example2_a` была выполнена дважды.  
  
6.  **Выполните шаг с выходом из функции.** Нажмите клавишу **F11** , чтобы выполнить шаг с заходом в функцию `example2_b` . Обратите внимание, что `example2_b` не сильно отличается от `example2_a`. Чтобы выполнить шаг с выходом из функции, выберите пункт **Шаг с выходом** в меню **Отладка** ( **SHIFT+F11**). Обратите внимание, что, согласно переменной `callTrack` , функция `example2_b` была выполнена, а отладчик вернулся в точку возобновления `example2` .  
  
7.  **Остановите отладку.** В диалоговом окне **Отладка** выберите команду **Остановить отладку** (клавиша **SHIFT+F5**). Это приведет к завершению сеанса отладки.  
  
##  <a name="BKMK_Set_a_conditional_breakpoint__run_to_the_cursor__and_visualize_a_variable"></a> Задайте условную точку останова, выполните до текущей позиции и визуализируйте переменную.  
 Условные точки останова задают условие, которое приводит к приостановке выполнения отладчиком. Условие задается любым выражением кода, которое может обрабатываться как true или false. Например, можно использовать условную точку останова для проверки состояния программы в часто вызываемой функции только тогда, когда переменная достигает определенного значения.  
  
 Выполнение до текущей позиции аналогично заданию однократной точки останова. При приостановке выполнения можно выбрать строку в исходном коде и возобновить выполнение до достижения выбранной строки. Допустим, вы пошагово выполняете цикл в функции и определили, что код в этом цикле работает правильно. Вместо того чтобы применять пошаговое выполнение каждой итерации цикла, можно запустить выполнение до текущей позиции курсора, заданной после выполнения цикла.  
  
 Иногда трудно просмотреть значение переменной в строке подсказки или другом окне данных. Отладчик может отображать строки, HTML и Xml в средстве визуализации текста, в котором отображается отформатированное представление значения в окне с возможностью прокрутки.  
  
###  <a name="BKMK_Example_3"></a> Пример 3  
 В этом примере вы задаете условную точку останова для прерывания выполнения на определенной итерации цикла с последующим выполнением до текущей позиции курсора, заданной после цикла. Можно также просмотреть значение переменной в средстве визуализации текста.  
  
1.  **Вызов функции example3 в функции module.** Отредактируйте функцию `module` , заменив строку после `var callTrack = "module function";` на `example3();`.  
  
     ![Вызов метода example3](../debugger/media/dbg-jsnav-example3.png "DBG_JSNAV_example3")  
  
2.  **Выполните код до точки останова.** Запустите сеанс отладки, выбрав **Начать отладку** on the **Отладка** ( **F5**). Отладчик приостановит выполнение в точке останова, заданной в функции `module` .  
  
3.  **Шаг с заходом в функцию example3.** Нажмите клавиши **Шаг с заходом** on the **Отладка** ( **F11**), чтобы перейти к точке входа функции `example3` . Продолжайте выполнять шаги с заходом в функцию, пока не пройдете один или два цикла блока `for` . Обратите внимание, что пошаговое выполнение всех 1000 итераций заняло бы много времени.  
  
4.  **Задайте условную точку останова.** В левой внутренней области окна кода щелкните правой кнопкой мыши строку `s += i.toString() + "\n";` и выберите в контекстном меню пункт **Условие** .  
  
     Установите флажок **Условие** и введите в текстовом поле `i == 500;` . Выберите параметр **Верно** и выберите **ОК**. Точка останова позволяет проверить значение в 500-й итерации цикла `for` . Для определения значка условной точки останова используется белое перекрестие.  
  
     ![Значок условной точки останова](../debugger/media/dbg-jsnav-breakpoint-condition-icon.png "DBG_JSNAV_Breakpoint_Condition_icon")  
  
5.  **Выполните код до точки останова.** В диалоговом окне **Отладка** выберите команду **Продолжить** (клавиша **F5**). Остановитесь на `i` и убедитесь, что текущее значение `i` равно 500. Обратите также внимание, что переменная `s` представляется в виде одной строки, а ее длина превышает ширину окна подсказки данных.  
  
6.  **Визуализация строковой переменной.** Щелкните значок лупы в подсказке `s`.  
  
     Появится окно средства визуализации текста, и значение строки будет представлено в виде многострочного текста.  
  
     ![Визуализатор текста отладки](../debugger/media/dbg-jsnav-text-visualizer.png "DBG_JSNAV_Text_Visualizer")  
  
7.  **Выполните код до позиции курсора.** Выберите строку `callTrack += "->example3";` и выберите в контекстном меню пункт **Выполнить до текущей позиции** ( **CTRL+F10**). Отладчик завершает итерации цикла и затем приостанавливает выполнение в строке.  
  
8.  **Остановите отладку.** В диалоговом окне **Отладка** выберите команду **Остановить отладку** (клавиша **SHIFT+F5**). Это приведет к завершению сеанса отладки.  
  
###  <a name="BKMK_Use_Run_to_Cursor_to_return_to_your_code_and_delete_a_breakpoint"></a> Использование команды "Выполнить до текущей позиции" для возврата к вашему коду и удаления точки останова  
 Выполнение до текущей позиции курсора может пригодиться, если вы выполнили шаг с заходом в код библиотеки от корпорации Майкрософт или в код сторонней библиотеки. Пошаговая отладка кода библиотеки может быть информативной, но зачастую занимает долгое время, в то время как пользователя обычно гораздо больше интересует его собственный код. В этом упражнении показано, как запустить выполнение до курсора.  
  
1.  **Установите точку останова в вызове функции app.start.** In the `module` установите точку останова в строке `app.start()`  
  
2.  **Запустите выполнение до точки останова и выполните шаг с заходом в функцию библиотеки.**  
  
     При выполнении шага с заходом в `app.start()`редактор отображает код в `base.js`. Выполните шаги с заходом еще для нескольких строк.  
  
3.  **Шаг с обходом функции и шаг с выходом из функции.** Выполняя шаг с обходом (**F10**) и шаг с выходом (**SHIFT+F11**) в `base.js`, вы можете прийти к выводу, что исследование сложности и размера функции запуска — не самое интересное занятие.  
  
4.  **Установите курсор в коде и запустите выполнение до него.** Вернитесь к файлу `default.js` в редакторе кода. Выберите первую строку кода после `app.start()` (запустить выполнение до комментария или пустой строки нельзя). Выберите в контекстном меню пункт **Выполнить до текущей позиции** . Отладчик продолжит выполнение функции app.start и приостановит его в точке останова.  
  
##  <a name="BKMK_View_variable_data_in_the_Locals_window"></a> Просмотр переменных данных в окне "Локальные"  
 Окно "Локальные" представляет собой дерево параметров и переменных в цепочке областей видимости функции, выполняемой в данный момент.  
  
###  <a name="BKMK_View_variable_data_and_the_prototype_chain_of_an_object"></a> Просмотр переменных данных и цепочки прототипов объекта  
  
1.  **Добавьте объект массива в функцию module.** Отредактируйте функцию `module` , заменив строку после `var callTrack = "module function"` на `var myArray = new Array(1, 2, 3);`  
  
     ![Определение myArray](../debugger/media/dbg-jsnav-myarray.png "DBG_JSNAV_myArray")  
  
2.  **Выполните код до точки останова.** Запустите сеанс отладки, выбрав **Начать отладку** on the **Отладка** ( **F5**). Отладчик приостанавливает выполнение в точке останова. Выполните шаг с заходом в строку.  
  
3.  **Откройте окно "Локальные".** В диалоговом окне **Отладка** выберите пункт **Окна**и затем щелкните **Локальные**. (Клавиатура: Alt + 4).  
  
4.  **Анализ локальных переменных в функции module** . В окне "Локальные" в качестве узлов верхнего уровня отображаются переменные функции, выполняемой в данный момент (функция `module` ). При входе в функцию JavaScript создает все переменные и присваивает им значение `undefined`. Значением функций, определяемых в функции, становится их текст.  
  
     ![Окно "Локальные"](../debugger/media/dbg-jsnav-locals-window.png "DBG_JSNAV_Locals_window")  
  
5.  **Пройдите по определениям callTrack и myArray.** Найдите переменные callTrack и myArray в окне "Локальные". Выполните шаг с обходом (**F10**) двух определений; обратите внимание, что при этом поля **Значение** и **Тип** изменятся. В окне "Локальные" выделяются значения переменных, изменившихся с момента последнего останова.  
  
6.  **Анализ объекта myArray** . Разверните переменную `myArray` . Каждый элемент массива содержит узел **[прототип]** , содержащий иерархию наследования объекта `Array` . Разверните этот узел.  
  
     ![Цепочка прототипов в окне "Локальные"](../debugger/media/dbg-jsnav-locals-proto-chain.png "DBG_JSNAV_Locals_proto_chain")  
  
    -   Узел **Методы** содержит все методы объекта `Array` .  
  
    -   Узел **[прототип]** содержит прототип объекта `Object` , на основе которого был создан `Array` . Узлы **[прототип]** могут быть рекурсивными. Каждый родительский объект в иерархии объектов описывается в узле **[прототип]** своего дочернего узла.  
  
7.  **Остановите отладку.** On the **Отладки** выберите команду **Отладка** (клавиатура: Shift + F5). Это приведет к завершению сеанса отладки.  
  
##  <a name="BKMK_Examine_scope_chain_data"></a> Анализ данных в цепочке областей видимости  
 *Цепочка областей видимости* функции включает все активные переменные, доступные для использования функцией. Глобальные переменные, а также любые объекты (включая функции), определенные в функции, которая определяет функцию, выполняемую в данный момент, входят в цепочку областей видимости. Например, переменная `callTrack` , определенная в функции `module` файла `default.js` , доступна для любой функции, определенной в функции `module` . В окне "Локальные" каждая область видимости указывается отдельно.  
  
-   Переменные функции, выполняемой в данный момент, перечисляются в верхней части окна.  
  
-   Переменные каждой области видимости функции в цепочке областей видимости перечисляются в узле **[Область видимости]** соответствующей функции. Функции областей видимости перечисляются согласно порядку их следования в цепочке, начиная с той функции, которая определяет функцию, выполняемую в данный момент, и заканчивая самой удаленной функцией в цепочке.  
  
-   Узел **[Глобальные]** содержит глобальные объекты, определенные вне любых функций.  
  
 Цепочки областей видимости могут быть сложными для понимания, и наиболее наглядно это понятие можно раскрыть с помощью примера. В приведенном ниже примере вы увидите, как функция `module` создает собственную область видимости, и узнаете, как создать другой уровень области видимости, создав замыкание.  
  
###  <a name="BKMK_Example_4"></a> Пример 4  
  
1.  **Вызовите функцию example4 в функции module.** Отредактируйте функцию `module` , заменив строку после `var callTrack = "module function"` на `example4()`:  
  
     ![Вызов метода example4](../debugger/media/dbg-jsnav-example4.png "DBG_JSNAV_example4")  
  
2.  **Выполните код до точки останова.** Запустите сеанс отладки, выбрав **Начать отладку** on the **Отладка** ( **F5**). Отладчик приостанавливает выполнение в точке останова.  
  
3.  **Откройте окно "Локальные".** В меню **Отладка** выберите пункт **Окна**и затем щелкните **Локальные**. ( **ALT+4**). Обратите внимание, что в окне перечисляются все переменные и функции в функции `module` и содержится узел **[Глобальные]** .  
  
4.  **Анализ глобальных переменных.** . Разверните переменную **[Глобальные]** . Объекты и переменные в этом узле устанавливаются библиотекой Windows для JavaScript. Вы можете добавить в глобальную область видимости собственные переменные.  
  
5.  **Выполнение шага с заходом в функцию example4 и изучение ее локальных переменных и переменных области видимости** . Выполните шаг с заходом ( **F11**) в функцию `example4` . Так как `example4` определяется в функции `module` , функция `module` становится родительской областью видимости. `example4` может вызвать любую функцию в функции `module` и получить доступ к ее переменным. Разверните узел **[Область видимости]** в окне "Локальные" и обратите внимание, что он содержит те же переменные функции `module` .  
  
     ![Области действия метода example4](../debugger/media/dbg-jsnav-locals-example4-scope.png "DBG_JSNAV_Locals_example4_scope")  
  
6.  **Выполнение шага с заходом в функцию example4_a и изучение ее локальных переменных и переменных области видимости** . Выполните шаг с заходом в `example4` и в вызов `example4_a`. Обратите внимание, что локальные переменные теперь берутся из `example4_a`, а узел **[Область видимости]** по-прежнему содержит переменные функции `module` . Несмотря на то что переменные `example4` остаются активными, они не могут использоваться в `example4_a` и больше не входят в цепочку областей видимости.  
  
7.  **Выполнение шага с заходом в функцию multipyByA и изучение ее локальных переменных и переменных области видимости** . Пройдите оставшуюся часть `example4_a` и выполните шаг с заходом в строку `var x = multilpyByA(b);`.  
  
     Переменная функции `multipyByA` указывает на функцию `multiplyClosure` , которая представляет собой *замыкание*. `multipyClosure` определяет и возвращает внутреннюю функцию `mulitplyXby`и фиксирует (закрывает) ее параметр и переменную. В замыкании возвращаемая внутренняя функция получает доступ к данным внешней функции и, таким образом, создает свой собственный уровень области видимости.  
  
     При выполнении шага с заходом в `var x = multilpyByA(b);`вы переходите к строке `return a * b;` во внутренней функции `mulitplyXby` .  
  
8.  В окне "Локальные" только параметр `b` указывается как локальная переменная в `multiplyXby`, но новый уровень **[Область видимости]** все равно добавляется. Развернув этот узел, вы увидите, что он содержит параметры, функции и переменные `multiplyClosure`, включая переменную `a` , вызванную в первой строке `multiplyXby`. Просмотрев второй узел **[Область видимости]** , вы обнаружите переменные функции module, к которым `multiplyXby` обращается в следующей строке.  
  
     ![Области действия закрытия в окне "Локальные"](../debugger/media/dbg-jsnav-scope-mulitplyxby.png "DBG_JSNAV_scope_mulitplyXby")  
  
9. **Остановите отладку.** В диалоговом окне **Отладка** выберите команду **Остановить отладку** (клавиша **SHIFT+F5**). Это приведет к завершению сеанса отладки.  
  
##  <a name="BKMK_Navigate_to_code_by_using_the_Call_Stack_window"></a> Переход к коду с помощью окна стека вызовов  
 Стек вызовов представляет собой структуру данных, содержащую сведения о функциях, которые выполняются в текущем потоке приложения. По достижении точки останова в окне "Стек вызовов" отображается список всех функций, активных в стеке. В верхней части списка в окне "Стек вызовов" указывается функция, выполняемая в данный момент. Функция, запустившая поток, отображается в нижней части списка. Остальные функции демонстрируют путь вызова от исходной до текущей функции.  
  
 Окно "Стек вызовов" можно использовать не только для просмотра пути вызова к функции, выполняемой в данный момент, но и для перехода к коду в редакторе кода. Эта возможность может пригодиться при работе с несколькими файлами, а также для того, чтобы быстро перейти к определенной функции.  
  
###  <a name="BKMK_Example_5"></a> Пример 5  
 В этом примере вы выполните шаг с заходом в путь вызова, который содержит пять функций, определенных пользователем.  
  
1.  **Вызов функции example5 в функции module.** Отредактируйте функцию `module` , заменив строку после `var callTrack = "module function";` на `example5();`.  
  
     ![Вызов example5](../debugger/media/dbg-jsnav-example5.png "DBG_JSNAV_example5")  
  
2.  **Выполните код до точки останова.** Запустите сеанс отладки, выбрав **Начать отладку** on the **Отладка** ( **F5**). Отладчик приостановит выполнение в точке останова, заданной в функции module.  
  
3.  **Откройте окно "Стек вызовов".** В диалоговом окне **Отладка** выберите команду **Окна**и затем щелкните **Стек вызовов** (ALT+7). Обратите внимание, что в окне "Стек вызовов" отображаются две функции:  
  
    -   **Глобальный код** — это точка входа функции `module` в нижней части стека вызовов.  
  
    -   **Анонимная функция** отображает строку в функции `module` , на которой приостанавливается выполнение. Она находится в верхней части стека вызовов.  
  
4.  **Выполните шаги с заходом в функции, чтобы добраться до функции example5_d.** Нажмите клавиши **Шаг с заходом** on the **Отладка** ( **F11**), чтобы выполнить вызовы в пути вызова до момента достижения точки входа функции example5_d. Обратите внимание, что каждый раз, когда одна функция вызывает другую, номер строки вызывающей функции сохраняется, а вызываемая функция переносится в верхнюю часть стека. Номер строки вызывающей функции является точкой, в которой вызывающая функция приостановила свое выполнение. Желтая стрелка указывает на функцию, выполняемую в данный момент.  
  
     ![Окно стека вызовов](../debugger/media/dbg-jsnav-callstack-windows.png "DBG_JSNAV_CallStack_windows")  
  
5.  **Используйте окно "Стек вызовов" для перехода к коду example5_a и задания точки останова.** В окне "Стек вызовов" выберите элемент списка `example5_a` , а затем пункт **Перейти к источнику** . Редактор кода установит курсор на строку возврата функции. Задайте точку останова на этой строке. Обратите внимание, что строка, выполняемая в данный момент, при этом не изменится. Перемещается только курсор в редакторе.  
  
6.  **Выполните шаги с заходом в функции и запустите приложение до точки останова.** Выполните шаг с заходом в `example5_d`. Обратите внимание, что при возврате из функции используется стек вызовов. Нажмите клавишу **F5** , чтобы продолжить выполнение программы. Можно использовать точку останова, созданную в предыдущем шаге.  
  
7.  **Остановите отладку.** В диалоговом окне **Отладка** выберите команду **Остановить отладку** (клавиша **SHIFT+F5**). Это приведет к завершению сеанса отладки.  
  
## <a name="see-also"></a>См. также  
 [Запуск сеанса отладки (JavaScript)](../debugger/start-a-debugging-session-for-store-apps-in-visual-studio-javascript.md)   
 [Краткое руководство: Навигация по отладчику (JavaScript)](../debugger/control-execution-of-a-store-app-in-a-visual-studio-debug-session-for-windows-store-apps-javascript.md)   
 [Краткое руководство: Отладка HTML и CSS](../debugger/quickstart-debug-html-and-css.md)   
 [Активировать приостановки, возобновления и фоновых событий для Windows Store)](../debugger/how-to-trigger-suspend-resume-and-background-events-for-windows-store-apps-in-visual-studio.md)   
 [Отладка приложений в Visual Studio](../debugger/debug-store-apps-in-visual-studio.md)



