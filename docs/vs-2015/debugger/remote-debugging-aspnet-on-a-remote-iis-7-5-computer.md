---
title: Удаленная отладка ASP.NET на удаленном IIS 7.5 компьютера | Документация Майкрософт
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-ide-debug
ms.tgt_pltfrm: ''
ms.topic: conceptual
ms.assetid: 573a3fc5-6901-41f1-bc87-557aa45d8858
caps.latest.revision: 13
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: 124a4775593a161b1de7f55465bf20739909e4f8
ms.sourcegitcommit: 9ceaf69568d61023868ced59108ae4dd46f720ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2018
ms.locfileid: "49239854"
---
# <a name="remote-debugging-aspnet-on-a-remote-iis-computer"></a>Удаленная отладка ASP.NET на удаленном компьютере IIS
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Развертывание веб-приложения ASP.NET на компьютере с Windows Server со службами IIS и настроить его для удаленной отладки. В этом руководстве объясняется, как установить и настроить приложение Visual Studio 2015 MVC 4.5.2 развертывания в IIS и подключить удаленный отладчик из Visual Studio.

Эти процедуры протестированы на эти конфигурации сервера:
* Windows Server 2012 R2 и IIS 10
* Windows Server 2008 R2 и IIS 7.5

Большая часть информации в этой статье также применяется к удаленной отладки приложения ASP.NET Core, за исключением того, что развертывание приложений ASP.NET core отличается и требует дополнительных действий. Чтобы развернуть приложение ASP.NET Core в IIS, необходимо завершить все разделы [в этой статье](https://docs.asp.net/en/latest/publishing/iis.html).

## <a name="prerequisites-install-the-remote-debugger-on-the-windows-server-computer"></a>Предварительные требования: Установка удаленного отладчика на компьютере с Windows Server

Инструкции по загрузке удаленного отладчика на компьютере с Windows Server, см. в разделе [удаленной отладки](../debugger/remote-debugging.md).

Для удаленной отладки приложений ASP.NET, можно запустить приложение удаленный отладчик с правами администратора или запустить удаленный отладчик как службу. Подробную информацию о запуске удаленного отладчика в качестве службы можно найти в разделе [Remote Debugging](../debugger/remote-debugging.md).

После установки, убедитесь, что удаленный отладчик запущен на целевом компьютере. (Если это не так, найдите **удаленный отладчик** в **запустить** меню. ) В окне удаленного отладчика выглядит следующим образом. (4020 — номер порта по умолчанию)

![RemoteDebuggerWindow](../debugger/media/remotedebuggerwindow.png "RemoteDebuggerWindow")
  
## <a name="create-the-application-on-the-visual-studio-computer"></a>Создание приложения на компьютере с Visual Studio  
  
1. Создайте приложение MVC ASP.NET. (Выберите**Файл &gt; Создать &gt; Проект**, а затем **Visual C# &gt; Интернет &gt; Веб-приложение ASP.NET** . В разделе шаблонов **ASP.NET 4.5.2** выберите шаблон **MVC**. Убедитесь, что **узел в облаке** не включен в разделе "Azure". Назовите проект **MyMVC**.)
1. Откройте файл HomeController.cs и установите точку останова в методе `About()` .
1. В **обозревателе решений**щелкните правой кнопкой мыши узел проекта и выберите пункт **Опубликовать**.
1. В поле **Выберите цель публикации**выберите пункт **Настраиваемая** и назовите профиль **MyMVC**. Нажмите кнопку **Далее**.
1. На вкладке **Подключение** задайте в поле **Метод публикации** значение **Файловая система** , а в поле **Целевое расположение** укажите локальный каталог. Нажмите кнопку **Далее**.

    ![RemoteDBG_Publish_Local](../debugger/media/remotedbg-publish-local.png "RemoteDBG_Publish_Local")
1. Задайте конфигурацию **Отладка**. Нажмите кнопку **Опубликовать**.

    ![RemoteDBG_Publish_Debug_Config](../debugger/media/remotedbg-publish-debug-config.png "RemoteDBG_Publish_Debug_Config")
    
    Приложение должно опубликоваться в локальном каталоге.

## <a name="BKMK_deploy_asp_net"></a> Развертывание приложения ASP.NET на удаленном компьютере Windows Server

 В этом разделе предполагается, что на компьютере Windows Server уже включены службы IIS. В Windows Server 2012 R2, см. в разделе [конфигурации IIS](https://docs.asp.net/en/latest/publishing/iis.html#iis-configuration) для включения служб IIS. (Если вы пытаетесь развернуть приложение ASP.NET Core, можно пропустить других разделах этой статьи. Для ASP.NET Core выполните действия, описанные в статье, чтобы развернуть приложения, а не описанные здесь.)
1. Установка платформы веб-компоненты для установки ASP.NET 4.5 для использования ASP.NET (с узла сервера в Windows Server 2012 R2, выберите **получить новый веб-платформы компоненты** и выполните поиск по ASP.NET)

    ![RemoteDBG_IIS_AspNet_45](../debugger/media/remotedbg-iis-aspnet-45.png "RemoteDBG_IIS_AspNet_45")

    На Windows Server 2008 R2, установите ASP.NET 4, вместо этого с помощью следующей команды: **C:\Windows\Microsoft.NET\Framework (64) \v4.0.30319\aspnet_regiis.exe - ir**
1. Скопируйте каталог проекта ASP.NET с компьютера Visual Studio в локальный каталог (который мы назовем **C:\Publish**) на компьютере Windows Server. Можно скопировать проект вручную, с помощью Xcopy, веб-развертывания, Robocopy, Powershell или другие параметры.

    > [!CAUTION]
    >  Если вам нужно внести изменения в код или перестроение, необходимо повторно опубликовать и повторите этот шаг. Исполняемый файл, скопированный на удаленный компьютер, должен в точности совпадать с локальным исходным кодом и символами.
1. Убедитесь в том, что в файле web.config указана правильная версия .NET Framework.  Например, по умолчанию устанавливается на Windows Server 2008 R2 версии платформы .NET Framework 4.0.30319, но мы создали приложение ASP.NET 4.5.2 версии. Если приложение ASP.NET 4.0 выполняется на компьютере с Windows Server, вам потребуется изменить версию.
  
    ```xml
    <system.web>
        <authentication mode="None" />  
        <compilation debug="true" targetFramework="4.0.30319" />
        <httpRuntime targetFramework="4.0.30319" />
      </system.web>
  
    ```
1. Откройте **Диспетчер служб IIS** и перейдите к разделу **Сайты**.
1. Щелкните правой кнопкой мыши узел **Веб-сайт по умолчанию** и выберите команду **Добавить приложение**.
1. Задайте **псевдоним** поле **MyMVC** и поле пула приложения **ASP.NET v4.0** (ASP.NET 4.5 не допускаются для пула приложений). В поле **Физический путь** укажите значение **C:\Publish** (это каталог, в который вы скопировали каталог проекта ASP.NET).

    >[!NOTE] 
    > Для приложений ASP.NET Core, установите в поле пула приложений **без управляемого кода**.
1. Тестирование развертывания, щелкните правой кнопкой мыши **Default Web Site** и выберите **Обзор**.
    Если приложение успешно развернуто, вы увидите веб-страницы.

## <a name="attach-to-the-aspnet-application-from-the-visual-studio-computer"></a>Подключение к приложению ASP.NET с компьютера с Visual Studio

1. На компьютере с Visual Studio откройте решение **MyMVC** .
1. В Visual Studio щелкните **отладка / присоединение к процессу** (**Ctrl + Alt + P**).
1. Установите в поле квалификатор  **\<имя удаленного компьютера >: 4020**.
1. Нажмите кнопку **Обновить**.
    В окне **Доступные процессы** должен появиться ряд процессов.

    Если вы не видите все процессы, попробуйте использовать IP-адрес вместо имени удаленного компьютера (порт является обязательным). Используйте `ipconfig` в командной строке, чтобы получить адрес IPv4.
1. Установите флажок  **Показать процессы, запущенные всеми пользователями**.
1. Найдите процесс **w3wp.exe** и щелкните **Присоединить**.

     Чтобы быстро найти имя процесса, введите первую букву процесса.
     
    >[!NOTE]
    > Для приложения ASP.NET Core выберите процесс dnx.exe вместо w3wp.exe. (Это имя процесса может измениться в следующих выпусках.)

    ![RemoteDBG_AttachToProcess](../debugger/media/remotedbg-attachtoprocess.png "RemoteDBG_AttachToProcess")

1. Откройте веб-сайт удаленного компьютера. В браузере, перейдите к **http://\<имя удаленного компьютера >**.
    
    Должна открыться веб-страница ASP.NET.
1. В веб-страницы ASP.NET, щелкните ссылку, чтобы **о** страницы.

    В Visual Studio должна быть достигнута точка останова.



