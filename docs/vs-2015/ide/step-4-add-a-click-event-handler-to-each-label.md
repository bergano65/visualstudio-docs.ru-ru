---
title: Шаг 4. Добавление обработчика событий Click к каждой метке | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-general
ms.topic: conceptual
ms.assetid: 16bdbc7c-4129-411d-bace-f4a3e5375975
caps.latest.revision: 22
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: 9f23d0593129cae2732c8b4df14b3f5e2d5a69f7
ms.sourcegitcommit: 1fc6ee928733e61a1f42782f832ead9f7946d00c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2019
ms.locfileid: "60051379"
---
# <a name="step-4-add-a-click-event-handler-to-each-label"></a>Шаг 4. Добавление обработчика событий Click к каждому элементу управления Label
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Игра "Подбери пару!" работает следующим образом.  
  
1. Когда игрок выбирает один из квадратов со скрытым значком, программа показывает значок игроку, изменяя цвет значка на черный.  
  
2. После этого игрок выбирает другой скрытый значок.  
  
3. Если значки совпадают, они остаются видимыми. Если нет, оба значка снова скрываются.  
  
   Чтобы программа работала именно так, добавьте обработчик событий Click, изменяющий цвет выбираемой метки.  
  
### <a name="to-add-a-click-event-handler-to-each-label"></a>Добавление обработчика событий Click к каждой метке  
  
1. Откройте форму в конструкторе Windows Forms. В обозревателе решений выберите Form1.cs или Form1.vb. В строке меню выберите **Вид**, **Конструктор**.  
  
2. Выберите первый элемент Label, чтобы выделить его. Затем, удерживая нажатой клавишу CTRL, выберите каждую из оставшихся меток, чтобы выбрать и их. Убедитесь, что выбраны все метки.  
  
3. Нажмите кнопку **События** на панели инструментов в окне **Свойства**, чтобы открыть страницу **События** в окне **Свойства**. Прокрутите вниз до события **Click** и введите **label_Click** в поле, как показано на следующем рисунке.  
  
     ![Окно свойств, отображающее событие Click](../ide/media/express-labelclick.png "Express_labelClick")  
Окно свойств, отображающее событие Click  
  
4. Нажмите клавишу ВВОД. Интегрированная среда разработки добавит обработчик событий Click, который называется `label_Click()`, в код и подключит его к каждой метке в форме.  
  
5. Добавьте остальную часть кода следующим образом:  
  
     [!code-csharp[VbExpressTutorial4Step2_3_4#4](../snippets/csharp/VS_Snippets_VBCSharp/vbexpresstutorial4step2_3_4/cs/form1.cs#4)]
     [!code-vb[VbExpressTutorial4Step2_3_4#4](../snippets/visualbasic/VS_Snippets_VBCSharp/vbexpresstutorial4step2_3_4/vb/form1.vb#4)]  
  
    > [!NOTE]
    >  При копировании и вставке блока кода `label_Click()` вместо его ввода вручную проследите за тем, что заменить существующий код `label_Click()`. В противном случае в коде появится дублирующий блок.  
  
    > [!NOTE]
    >  Возможно, вы узнали `object sender` в верхней части обработчика событий; он совпадает с кодом в разделе [Руководство 2. Создание, истекло время ожидания Математическая головоломка](../ide/tutorial-2-create-a-timed-math-quiz.md) руководства. Поскольку вы подключили различные события Click элемента управления Label к одному методу обработчика событий, один и тот же метод вызывается независимо от того, какую метку щелкнет пользователь. Методу обработчика событий необходимо знать, какую метку выбрал игрок, поэтому для определения элемента управления Label используется имя **sender**. Первая строка метода сообщает программе, что это не просто универсальный объект, а элемент управления Label, для обращения к свойствам и методам которого используется имя **clickedLabel**.  
  
     Этот метод сначала проверяет, было ли успешно выполнено преобразование (приведение) **clickedLabel** из объекта в элемент управления Label. Если операция завершилась неудачно, его значение будет `null` (C#) или `Nothing` (Visual Basic) и оставшаяся часть кода метода не будет выполнена. Затем метод с помощью свойства **ForeColor** элемента управления Label проверяет цвет текста выбранной метки. Если цвет текста метки черный, это это означает, что значок уже был выбран, а метод выполнен. (Для этого и нужен оператор `return`. Он сообщает программе, что требуется остановить выполнение метода.) В противном случае значок не был выбран, поэтому программа изменяет цвет текста метки на черный.  
  
6. В строке меню выберите **Файл**, **Сохранить все**, чтобы сохранить ход выполнения, а затем в строке меню выберите **Отладка**, **Начать отладку**, чтобы запустить программу. Вы должны увидеть пустую форму с синим фоном. Выберите любую ячейку в форме, и один из значков станет видимым. Продолжайте выбирать различные ячейки формы. Значки будут отображаться при их выборе.  
  
### <a name="to-continue-or-review"></a>Продолжить или повторить пройденный материал  
  
- Следующий раздел руководства: [Шаг 5. Добавление ссылок на метки](../ide/step-5-add-label-references.md).  
  
- Предыдущий раздел руководства: [Шаг 3. Назначение каждой метке случайного значка](../ide/step-3-assign-a-random-icon-to-each-label.md).
