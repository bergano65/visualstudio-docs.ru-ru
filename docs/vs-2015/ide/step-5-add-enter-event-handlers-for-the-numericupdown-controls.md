---
title: Шаг 5. Добавление обработчиков событий входа для элементов управления NumericUpDown | Документы Майкрософт
ms.custom: ''
ms.date: 2018-06-30
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-ide-general
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 45a99a5d-c881-4298-b74d-adb481dec5ee
caps.latest.revision: 20
author: gewarren
ms.author: gewarren
manager: ghogen
ms.openlocfilehash: 879ae4e11fb51b63ed1a154eadcdb67ce87b2435
ms.sourcegitcommit: 55f7ce2d5d2e458e35c45787f1935b237ee5c9f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2018
ms.locfileid: "47560249"
---
# <a name="step-5-add-enter-event-handlers-for-the-numericupdown-controls"></a>Шаг 5. Добавление обработчиков событий входа для элементов управления NumericUpDown
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Последнюю версию этого раздела можно найти в [Step 5: добавление обработчиков событий входа для элементов управления NumericUpDown](https://docs.microsoft.com/visualstudio/ide/step-5-add-enter-event-handlers-for-the-numericupdown-controls).  
  
В пятой части этого учебника вам предстоит добавить обработчики событий "Ввод", чтобы сделать ввод ответов на задачи головоломки немного удобнее. Этот код будет выделять и удалять текущее значение в каждом элементе управления NumericUpDown, как только игрок выберет элемент управления и начнет вводить другое значение.  
  
> [!NOTE]
>  Этот раздел входит в серию учебников, посвященных основам написания кода. Обзор учебника см. в статье [Tutorial 2: Create a Timed Math Quiz](../ide/tutorial-2-create-a-timed-math-quiz.md) (Учебное руководство 2. Создание ограниченной по времени математической головоломки).  
  
### <a name="to-verify-the-default-behavior"></a>Проверка поведения по умолчанию  
  
1.  Запустите программу и запустите головоломку.  
  
     В элементе управления NumericUpDown для задачи сложения курсор мигает рядом с цифрой **0**.  
  
2.  Введите `3` и обратите внимание, что в элементе управления отображается **30**.  
  
3.  Введите `5` и обратите внимание, что появляется число **350**, но через мгновение оно меняется на **100**.  
  
     Перед исправлением ошибки подумайте, почему она возникла. Подумайте, почему цифра **0** не исчезла, когда вы ввели `3`, и почему **350** меняется на **100**, причем не сразу.  
  
     Такое поведение может показаться странным, но оно полностью соответствует логике кода. При нажатии кнопки **Запуск** ее свойство **Enabled** принимает значение **False**, из-за чего кнопка становится недоступна и отображается серым цветом. Программа переводит текущее выделение (фокус) на элемент управления, имеющий следующее наименьшее значение TabIndex, т. е. элемент управления NumericUpDown для задачи сложения. Когда вы нажимаете клавишу TAB для перехода к элементу управления NumericUpDown, курсор автоматически помещается в начало элемента управления, поэтому вводимые цифры появляются слева, а не справа. При вводе числа, превышающего значение свойства **MaximumValue** (которому присвоено значение 100), введенное число заменяется значением этого свойства.  
  
### <a name="to-add-an-enter-event-handler-for-a-numericupdown-control"></a>Добавление обработчика событий "Ввод" для элемента управления NumericUpDown  
  
1.  Выберите первый элемент управления NumericUpDown (с именем "sum") в форме, а затем в диалоговом окне **Свойства** выберите на панели инструментов значок **События**.  
  
     На вкладке **События** в диалоговом окне **Свойства** отображаются все события для выбранного в форме элемента, на которые можно реагировать (т. е. которые можно обрабатывать). Поскольку выбран элемент управления NumericUpDown, все перечисленные события относятся к нему.  
  
2.  Выберите событие **Ввод**, введите `answer_Enter` и нажмите клавишу ВВОД.  
  
     ![Диалоговое окно "Свойства"](../ide/media/express-answerenter.png "Express_AnswerEnter")  
Диалоговое окно "Свойства"  
  
     Вы только что добавили обработчик событий "Ввод" для элемента управления NumericUpDown с именем "sum" и назвали этот обработчик **answer_Enter**.  
  
3.  В методе для обработчика событий **answer_Enter** введите следующий код.  
  
     [!code-csharp[VbExpressTutorial3Step5_6#11](../snippets/csharp/VS_Snippets_VBCSharp/vbexpresstutorial3step5_6/cs/form1.cs#11)]
     [!code-vb[VbExpressTutorial3Step5_6#11](../snippets/visualbasic/VS_Snippets_VBCSharp/vbexpresstutorial3step5_6/vb/form1.vb#11)]  
  
     Этот код может показаться сложным, однако в нем легко разобраться, если просмотреть его шаг за шагом. Сначала посмотрите на верхнюю часть метода — `object sender` в C# или `sender As System.Object` в Visual Basic. Этот параметр ссылается на объект, событие которого срабатывает. Он называется отправителем. В данном случае объектом-отправителем является элемент управления NumericUpDown. Поэтому в первой строке метода указывается, что отправителем является не просто какой-либо объект, а именно элемент управления NumericUpDown. (каждый элемент управления NumericUpDown это объект, но не каждый объект, это элемент управления NumericUpDown). Элемент управления NumericUpDown в этом методе называется **answerBox**, поскольку он будет использоваться для всех элементов управления NumericUpDown в форме, а не только для элемента управления NumericUpDown с именем "sum". Поскольку переменная answerBox объявлена в этом методе, ее область действия ограничена этим методом. Иными словами, эту переменную можно использовать только внутри этого метода.  
  
     В следующей строке кода выполняется проверка, что answerBox был успешно преобразован из объекта в элемент управления NumericUpDown. Если бы преобразование завершилось неудачей, переменная имела бы значение `null` (C#) или `Nothing` (Visual Basic). Третья строка получает длину ответа, который отображается в элементе управления NumericUpDown, а четвертая строка выделяет текущее значение в элементе управления, основываясь на этой длине. Теперь, когда игрок выбирает элемент управления, Visual Studio запускает это событие, в результате чего текущий ответ выделяется. Как только игрок начинает вводить другой ответ, предыдущий ответ удаляется и заменяется новым ответом.  
  
4.  В конструкторе Windows Forms выберите элемент управления NumericUpDown с именем difference (разность).  
  
5.  На странице **События** диалогового окна **Свойства** прокрутите вниз до события **Ввод**, щелкните направленную вниз стрелку в конце строки, а затем выберите обработчик событий `answer_Enter`, который вы только что добавили.  
  
6.  Повторите предыдущий шаг для элементов управления NumericUpDown с именами product и quotient (т. е. произведение и частное).  
  
7.  Сохраните программу и запустите ее.  
  
     При выборе элемента управления NumericUpDown существующее значение автоматически выделяется и удаляется, когда вы начинаете вводить другое значение.  
  
### <a name="to-continue-or-review"></a>Продолжить или повторить пройденный материал  
  
-   Следующий шаг руководства см. в разделе [Step 6: Add a Subtraction Problem](../ide/step-6-add-a-subtraction-problem.md) (Шаг 6. Добавление задачи на вычитание).  
  
-   Предыдущий шаг руководства см. в разделе [Step 4: Add the CheckTheAnswer() Method](../ide/step-4-add-the-checktheanswer-parens-method.md) (Шаг 4. Добавление метода CheckTheAnswer()).



