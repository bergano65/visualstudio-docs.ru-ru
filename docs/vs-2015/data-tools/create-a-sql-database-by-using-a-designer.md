---
title: Создание базы данных SQL с помощью конструктора | Документация Майкрософт
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-data-tools
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
- aspx
helpviewer_keywords:
- SQL Server Express
- local data
- LocalDB
- SQLEXPRESS
- data [Visual Studio], Local data
- SQL Express
- data [Visual Studio], walkthroughs
- databases, creating
- database files, creating
ms.assetid: 99c2b06f-47aa-414e-8057-a3453712fd23
caps.latest.revision: 54
author: gewarren
ms.author: gewarren
manager: jillfra
robots: noindex,nofollow
ms.openlocfilehash: 147e9cc66518372e042230a30c16588ab719cb1c
ms.sourcegitcommit: 53aa5a413717a1b62ca56a5983b6a50f7f0663b3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59661585"
---
# <a name="create-a-sql-database-by-using-a-designer"></a>Создание базы данных SQL с помощью конструктора
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Можно изучить основные задачи, например добавление таблиц и указания столбцов, с помощью Visual Studio для создания и обновления файла локальной базы данных в SQL Server Express LocalDB. Изучив данное пошаговое руководство, вы можете ознакомиться с расширенными функциональными возможностями, используя свою локальную базу данных в качестве отправной точки для работы с другими пошаговыми руководствами, требующими использование базы данных.  
  
 Можно также создать базу данных с помощью SQL Server Management Studio (отдельного) или инструкции Transact-SQL в **обозреватель объектов SQL Server** окно инструментов в Visual Studio.  
  
 В этом пошаговом руководстве вам предстоит выполнить следующие задачи:  
  
-   [Создание проекта и файла локальной базы данных](../data-tools/create-a-sql-database-by-using-a-designer.md#BKMK_CreateNewSQLDB)  
  
-   [Создание таблиц, столбцов, первичных ключей и внешние ключи](../data-tools/create-a-sql-database-by-using-a-designer.md#BKMK_CreateNewTbls)  
  
-   [Заполнение таблиц данными](../data-tools/create-a-sql-database-by-using-a-designer.md#BKMK_Populating)  
  
## <a name="prerequisites"></a>Предварительные требования  
 Для выполнения этого пошагового руководства, убедитесь, что у вас есть SQL Server Data Tools. На **представление** меню, вы должны увидеть **обозреватель объектов SQL Server**. Если он отсутствует, перейдите к **Установка и удаление программ**, нажмите кнопку **Visual Studio 2015**выберите **изменение**и установите флажок рядом с полем **SQL Server Data Tools**.  
  
##  <a name="BKMK_CreateNewSQLDB"></a> Создание проекта и файла локальной базы данных  
  
#### <a name="to-create-a-project-and-a-database-file"></a>Создание проекта и файла базы данных  
  
1. Создайте проект Windows Forms с именем `SampleDatabaseWalkthrough`.  
  
2. В строке меню выберите **проекта** > **Добавление нового элемента**.  
  
3. В списке шаблонов элементов прокрутите вниз и выберите **базы данных на основе службы**.  
  
    ![Диалоговое окно Шаблоны элементов](../data-tools/media/raddata-vsitemtemplates.png "raddata VSItemTemplates")  
  
4. Имя базы данных **назовите**, а затем выберите **добавить** кнопки.  
  
5. Если **источников данных** окно не открыто, откройте его, выбрав клавиши Shift + Alt + D, или в строке, выбрав меню **представление** > **Other Windows**  >  **Источников данных**.  
  
6. В **источников данных** выберите **добавить новый источник данных** ссылку.  
  
7. В **мастер настройки источника данных**выберите **Далее** четыре раза, чтобы принять параметры по умолчанию, а затем выберите кнопку **Готово** кнопки.  
  
   В окне свойств базы данных отображается строка подключения и расположение основного MDF-файла базы данных. Вы увидите, что файл базы данных находится в папке проекта.  
  
-   В Visual Studio выберите **представление** > **обозреватель объектов SQL Server** Если это окно еще не открыто. Откройте окно свойств, развернув **подключения к данным** узла, открыв контекстное меню для SampleDatabase.mdf, а затем выбрав **свойства**.  
  
-   Кроме того, можно выбрать **представление** > **обозревателя серверов**, если это окно еще не открыто. Откройте окно свойств, развернув **подключения к данным** узла. Откройте контекстное меню для SampleDatabase.mdf и выберите **свойства**.  
  
##  <a name="BKMK_CreateNewTbls"></a> Создание таблиц, столбцов, первичных ключей и внешние ключи  
 В этом разделе создается несколько таблиц, первичный ключ в каждой таблице и несколько строк данных выборки. В следующем пошаговом руководстве можно получить сведения о том, как эта информация может выглядеть в приложении. Здесь также создается внешний ключ, чтобы определить, как записи в одной таблице могут соотноситься с записями в другой таблице.  
  
#### <a name="to-create-the-customers-table"></a>Чтобы создать таблицу Customers  
  
1.  В **обозревателя серверов** или **обозреватель объектов SQL Server**, разверните **подключения к данным** узел, а затем разверните **SampleDatabase.mdf**узла.  
  
2.  Откройте контекстное меню для **таблиц**, а затем выберите **добавить новую таблицу**.  
  
     Будет открыт **Конструктор таблиц**, отобразится сетка с одной строкой по умолчанию, которая представляет один столбец в создаваемой таблице. Путем добавления строк в сетку будут добавлены столбцы в таблицу.  
  
3.  В сетке добавьте строку для каждой из следующих записей.  
  
    |Имя столбца|Тип данных|Разрешить значения null|  
    |-----------------|---------------|-----------------|  
    |`CustomerID`|`nchar(5)`|False (не установлен)|  
    |`CompanyName`|`nvarchar(50)`|False (не установлен)|  
    |`ContactName`|`nvarchar (50)`|True (установлен)|  
    |`Phone`|`nvarchar (24)`|True (установлен)|  
  
4.  Откройте контекстное меню для `CustomerID` строк, а затем выберите **задать первичный ключ**.  
  
5.  Откройте контекстное меню для строки по умолчанию, а затем выберите **удалить**.  
  
6.  Назовите таблицу "Клиенты" путем обновления первой строки в области скриптов, как показано в следующем примере:  
  
    ```  
    CREATE TABLE [dbo].[Customers]  
    ```  
  
     Результат должен быть примерно таким:  
  
     ![Конструктор таблиц](../data-tools/media/raddata-table-designer.png "raddata конструктора таблиц")  
  
7.  В левом верхнем углу **конструктор таблиц**выберите **обновления** кнопки.  
  
8.  В **Просмотр обновлений базы данных** выберите **обновления базы данных** кнопки.  
  
     Ваши изменения сохраняются в файл локальной базы данных.  
  
#### <a name="to-create-the-orders-table"></a>Чтобы создать таблицу Orders  
  
1.  Создайте еще одну таблицу, а затем добавьте строку для каждой записи следующей таблицы.  
  
    |Имя столбца|Тип данных|Разрешить значения null|  
    |-----------------|---------------|-----------------|  
    |`OrderID`|`int`|False (не установлен)|  
    |`CustomerID`|`nchar(5)`|False (не установлен)|  
    |`OrderDate`|`datetime`|True (установлен)|  
    |`OrderQuantity`|`int`|True (установлен)|  
  
2.  Задайте **OrderID** качестве первичного ключа, а затем удалите строку по умолчанию.  
  
3.  Назовите таблицу "Заказы" путем обновления первой строки в области скриптов, как показано в следующем примере:  
  
    ```  
    CREATE TABLE [dbo].[Orders]  
    ```  
  
4.  В левом верхнем углу **конструктор таблиц**выберите **обновления** кнопки.  
  
5.  В **Просмотр обновлений базы данных** выберите **обновления базы данных** кнопки.  
  
     Ваши изменения сохраняются в файл локальной базы данных.  
  
#### <a name="to-create-a-foreign-key"></a>Создание внешнего ключа  
  
1.  В области контекста в правой части сетки откройте контекстное меню для **внешние ключи**, а затем выберите **добавить новый внешний ключ**, как показано на следующем рисунке.  
  
     ![Добавление внешнего ключа в конструкторе таблиц](../data-tools/media/foreignkey.png "ForeignKey")  
  
2.  В появившемся текстовом поле замените **ToTable** с `Customers`.  
  
3.  В области T-SQL обновите последнюю строку в соответствии со следующим примером:  
  
    ```  
    CONSTRAINT [FK_Orders_Customers] FOREIGN KEY ([CustomerID]) REFERENCES [Customers]([CustomerID])  
    ```  
  
4.  В левом верхнем углу **конструктор таблиц**выберите **обновления** кнопки.  
  
5.  В **Просмотр обновлений базы данных** выберите **обновления базы данных** кнопки.  
  
     Ваши изменения сохраняются в файл локальной базы данных.  
  
##  <a name="BKMK_Populating"></a> Заполнение таблиц данными  
  
#### <a name="to-populate-the-tables-with-data"></a>Заполнение таблиц данными  
  
1.  В **обозревателя серверов** или **обозреватель объектов SQL Server**, разверните узел примера базы данных.  
  
2.  Откройте контекстное меню для **таблиц** выберите **обновить**и затем разверните **таблиц** узла.  
  
3.  Откройте контекстное меню для таблицы Customers, а затем выберите **Показать таблицу данных**.  
  
4.  Добавьте любые данные для по крайней мере трех клиентов.  
  
     Можно указать любые пять символов как ИД клиентов, но хотя бы один нужно выбрать и запомнить для дальнейшего использования в этой процедуре.  
  
5.  Откройте контекстное меню для таблицы Orders, а затем выберите **Показать таблицу данных**.  
  
6.  Добавьте данные для как минимум трех заказов.  
  
    > [!IMPORTANT]
    >  Убедитесь, что все идентификаторы заказов и количества заказов — целые числа, и каждый идентификатор клиента соответствует значению, указанному в столбце CustomerID таблицы клиентов.  
  
7.  В строке меню выберите **файл** > **сохранить все**.  
  
8.  В строке меню выберите **файл** > **закрыть решение**.  
  
    > [!NOTE]
    >  Рекомендуется создать резервную копию только что созданного файла базы данных путем его копирования с последующей вставкой в другое место или присвоения копии другого имени.  
  
## <a name="next-steps"></a>Следующие шаги  
 Теперь, когда имеется файл локальной базы данных с демонстрационными данными, вы выполните любое из пошаговых руководств, решение задач базы данных.
