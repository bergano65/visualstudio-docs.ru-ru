---
title: Службы Windows Communication Foundation и WCF Data Services
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-data-tools
ms.topic: conceptual
helpviewer_keywords:
- services, WCF Data
- WCF services, binding to
- WCF services, asynchronous service methods
- service references [Visual Studio]
- WCF Data Services
- asynchronous calls
- service references [Visual Studio], type sharing
- endpoints [WCF]
- asynchronous service methods
- service references [Visual Studio] endpoints
- WCF services, type sharing
- Windows Communication Foundation, in Visual Studio
- services, WCF
- WCF service, Visual Studio
- data services, WCF
- services, in Visual Studio
- data binding [Visual Studio], WCF
- service endpoints [Visual Studio]
- service references [Visual Studio], asynchronous calls
- services, Windows Communication Foundation
- type sharing in WCF services
- WCF services, endpoints
- service method, called asynchronously[Visual Studio]
ms.assetid: d56f12cb-e139-4fec-b3e4-488383356642
caps.latest.revision: 29
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: d143bd6ea48150ec8a2515eafc016786a8d3e33e
ms.sourcegitcommit: 53aa5a413717a1b62ca56a5983b6a50f7f0663b3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59665133"
---
# <a name="windows-communication-foundation-services-and-wcf-data-services-in-visual-studio"></a>Службы Windows Communication Foundation и службы данных WCF в Visual Studio
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Visual Studio предоставляет средства для работы с Windows Communication Foundation (WCF) и [!INCLUDE[ssAstoria](../includes/ssastoria-md.md)], технологии Microsoft для создания распределенных приложений. В этом разделе содержатся вводные служб из [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] перспективы. Полную документацию см. в разделе [служб данных WCF 4.5](http://msdn.microsoft.com/library/73d2bec3-7c92-4110-b905-11bb0462357a).

## <a name="what-is-wcf"></a>Что такое WCF?
 [!INCLUDE[vsindigo](../includes/vsindigo-md.md)] — Это унифицированный платформа для создания безопасной, надежной, транзакций и с возможностью взаимодействия распределенных приложений. Он заменяет старые технологии взаимодействия между процессами, таких как службы ASMX Интернета, .NET Remoting, Enterprise Services (DCOM) и MSMQ. WCF объединяет в себе функциональные возможности всех этих технологий в единую модель программирования. Это упрощает процесс разработки распределенных приложений.

#### <a name="what-are-wcf-data-services"></a>Что такое службы WCF Data Services
 [!INCLUDE[ssAstoria](../includes/ssastoria-md.md)] является стандартной реализацией протокола Open Data (OData).  Службы WCF Data Services позволяет предоставлять табличные данные как набор интерфейсов REST API, позволяя вернуть данных с помощью стандартных команд HTTP, такие как GET, POST, PUT и DELETE. На стороне сервера, службы данных WCF заменяют [веб-API ASP.NET](http://www.asp.net/web-api) для создания новых служб OData. Клиентская библиотека службы WCF Data Services продолжает быть хорошим выбором для использования служб OData в приложении .NET из Visual Studio (**проекта &#124; Add Service Reference**). Дополнительные сведения см. в разделе [Службы данных WCF 4.5](http://go.microsoft.com/fwlink/?LinkID=119952).

### <a name="wcf-programming-model"></a>Модель программирования WCF
 Модель программирования WCF основана на связи между двумя сущностями: службы WCF и клиент WCF. Модель программирования инкапсулируется в <xref:System.ServiceModel> пространства имен в [!INCLUDE[dnprdnshort](../includes/dnprdnshort-md.md)].

#### <a name="wcf-service"></a>Служба WCF
 Службы WCF основан на интерфейс, который определяет контракт между службой и клиентом. Оно помечено <xref:System.ServiceModel.ServiceContractAttribute> атрибута, как показано в следующем коде:

 [!code-csharp[WCFWalkthrough#6](../snippets/csharp/VS_Snippets_VBCSharp/wcfwalkthrough/cs/iservice1.cs#6)]
 [!code-vb[WCFWalkthrough#6](../snippets/visualbasic/VS_Snippets_VBCSharp/wcfwalkthrough/vb/iservice1.vb#6)]

 [!code-csharp[WCFWalkthrough#1](../snippets/csharp/VS_Snippets_VBCSharp/wcfwalkthrough/cs/iservice1.cs#1)]
 [!code-vb[WCFWalkthrough#1](../snippets/visualbasic/VS_Snippets_VBCSharp/wcfwalkthrough/vb/iservice1.vb#1)]

 Определении функции или методы, предоставляемые службой WCF, маркировав их <xref:System.ServiceModel.OperationContractAttribute> атрибута. Кроме того, можно предоставить сериализованные данные, пометив составной тип <xref:System.Runtime.Serialization.DataContractAttribute> атрибута. Это позволяет привязку данных в клиенте.

 Определив интерфейс и его методы, они инкапсулируются в класс, реализующий интерфейс. Один класс службы WCF можно реализовать несколько контрактов службы.

 Службы WCF предоставляется для использования посредством что называется *конечная точка*. Конечная точка предоставляет единственный способ взаимодействия со службой; Вы не может получить доступ к службе через прямую ссылку как это делается с другими классами.

 Конечную точку состоит из адреса, привязки и контракта. Адрес определяет, где расположена служба; Это может быть URL-адрес, адрес FTP или сети или локальный путь. Привязка задает способ взаимодействия со службой. Привязки WCF предоставляют гибкую модель для указания протокола, например HTTP или FTP, механизм безопасности, такие как проверка подлинности Windows или имена пользователей и пароли и многое другое. Контракт включает операции, предоставляемые классом службы WCF.

 Одна служба WCF может предоставлять несколько конечных точек. Это позволяет разным клиентам взаимодействовать с той же службе по-разному. Например банковская служба может предоставить одну конечную точку для сотрудников, а другое для внешних клиентов, используя другой адрес, привязку и/или контракта.

#### <a name="wcf-client"></a>Клиент WCF
 Клиент WCF состоит из *прокси-сервера* , позволяет приложению взаимодействовать со службой WCF, и конечную точку, которая соответствует конечной точки, определенные для службы. Прокси-сервер создается на стороне клиента в файле app.config и включает в себя сведения о типах и методы, предоставляемые службой. Для служб, которые предоставляют несколько конечных точек клиент может выбрать тот, который наилучшим образом соответствует его требованиям, например, для взаимодействия по протоколу HTTP и использовать проверку подлинности Windows.

 После создания клиента WCF, можно ссылаться на службу в коде так же, как и любой другой объект. Например, чтобы вызвать `GetData` метода, показанного выше, можно написать код, который имеет следующий вид:

 [!code-csharp[WCFWalkthrough#3](../snippets/csharp/VS_Snippets_VBCSharp/wcfwalkthrough/cs/form1.cs#3)]
 [!code-vb[WCFWalkthrough#3](../snippets/visualbasic/VS_Snippets_VBCSharp/wcfwalkthrough/vb/form1.vb#3)]

## <a name="wcf-tools-in-visual-studio"></a>Средства служб WCF в Visual Studio
 [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] предоставляет средства для создания служб WCF и клиентов WCF. Пошаговое руководство, демонстрирующее эти средства, см. в разделе [Пошаговое руководство: Создание простой службы WCF в Windows Forms](../data-tools/walkthrough-creating-a-simple-wcf-service-in-windows-forms.md).

### <a name="creating-and-testing-wcf-services"></a>Создание и тестирование служб WCF
 С помощью WCF [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] шаблоны как основу для быстрого создания собственной службы. Затем можно использовать WCF Service Auto Host и тестового клиента WCF для отладки и тестирования службы. Вместе эти средства обеспечивают быстрый и удобный цикл отладки и тестирования и исключает необходимость фиксации модели размещения на ранней стадии.

#### <a name="wcf-templates"></a>Шаблоны WCF
 WCF [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] шаблоны предоставляют базовую структуру класса для разработки службы. Доступно несколько шаблонов WCF в **Добавление нового проекта** диалоговое окно. К ним относятся проекты библиотеки служб WCF, веб-сайтов службы WCF и шаблоны элемента службы WCF.

 При выборе шаблона файлы добавляются в контракт службы, реализация службы и конфигурации службы. Все необходимые атрибуты уже добавлены, создание простых «Hello, World!» типа службы, и вам не нужно писать код. Само собой, необходимо добавить код для предоставления функций и методов для реальной службы, но шаблоны обеспечивают основу.

 Дополнительные сведения о шаблонах WCF, см. в разделе [шаблоны WCF в Visual Studio](http://msdn.microsoft.com/library/6a608575-3535-4190-89da-911e24c8374f).

#### <a name="wcf-service-host"></a>Узел службы WCF
 При запуске [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] отладчика (нажав клавишу F5) для проекта службы WCF, узел службы WCF, автоматически запускается средство для размещения службы локально. Узел службы WCF перечисление служб в проекте службы WCF, загружает конфигурацию проекта и создает экземпляр узла для каждой найденной службы.

 С помощью узла службы WCF, вы можете проверить службы WCF без создания дополнительного кода или фиксации в конкретном узле во время разработки.

 Дополнительные сведения об узле службы WCF, см. в разделе [узел службы WCF (WcfSvcHost.exe)](http://msdn.microsoft.com/library/8643a63d-a357-4c39-bd6c-cdfdf71e370e).

#### <a name="wcf-test-client"></a>Тестовый клиент WCF
 Средство тестовый клиент WCF позволяет вводить тестовые параметры, отправлять в службу WCF и просматривать ответную службы. Он предоставляет удобную практику тестирования, используя этот продукт с узлом службы WCF службы. Это средство можно найти в папке \Common7\IDE, устанавливаемая для Visual Studio 2015 на диске C: — здесь: **C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\\**.

 При нажатии клавиши F5 для отладки проекта службы WCF, тестовый клиент WCF открывает и отображает список конечных точек службы, которые определены в файле конфигурации. Можно протестировать эти параметры и запустить службу и повторите эту процедуру для последовательного тестирования и проверки службы.

 Дополнительные сведения о тестовом клиенте WCF, см. в разделе [тестовый клиент WCF (WcfTestClient.exe)](http://msdn.microsoft.com/library/d4302855-677f-4640-aa90-c5d785d72fb7).

### <a name="accessing-wcf-services-in-visual-studio"></a>Доступ к службам WCF в Visual Studio
 [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] упрощает задачу создания клиентов WCF, автоматически создавая прокси и конечную точку для службы, добавленные с помощью **Add Service Reference** диалоговое окно. Все необходимые сведения о конфигурации добавляется в файл app.config. Большинство случаев все, что нужно сделать — это создать службу для использования в.

 **Add Service Reference** диалоговом окне можно ввести адрес для службы или выполнить поиск службы, который определен в решении. Диалоговое окно возвращает список служб и операций, предоставляемых этими службами. Он также позволяет определить пространство имен, по которому вы будете ссылаться в коде службы.

 **Настройка ссылок на службы** диалоговое окно позволяет настроить конфигурацию для службы. Можно изменить адрес для службы, задать уровень доступа, асинхронное поведение и типы контрактов сообщений и настроить повторное использование типов.

## <a name="how-to-select-a-service-endpoint"></a>Практическое руководство. Выберите конечную точку службы
 Некоторые службы Windows Communication Foundation (WCF) предоставить несколько конечных точек, которые клиент может связаться со службой. Например, служба может предоставлять одну конечную точку, использующую HTTP привязки и имя пользователя / пароля и вторую конечную точку, использующую FTP и проверки подлинности Windows. Первая конечная точка может использоваться приложениями, которые обращаются к службе из внешней стороны брандмауэра, в то время как второй может использоваться в интрасети.

 В этом случае можно указать `endpointConfigurationName` как параметр в конструктор для ссылки на службу.

 [!INCLUDE[note_settings_general](../includes/note-settings-general-md.md)]

#### <a name="to-select-a-service-endpoint"></a>Чтобы выбрать конечную точку службы

1.  Добавьте ссылку на службу WCF, щелкнув правой кнопкой мыши узел проекта в обозревателе решений и выбрав **Добавление ссылки на службу**

2.  В редакторе кода добавьте конструктор для ссылки на службу:

    ```vb
    Dim proxy As New ServiceReference.Service1Client(
    ```

    ```csharp
    ServiceReference.Service1Client proxy = new ServiceReference.Service1Client(
    ```

    > [!NOTE]
    >  Замените *ServiceReference* с пространством имен для ссылки на службу и замените *Service1Client* с именем службы.

3.  Список IntelliSense будет отображаться с помощью перегрузок для конструктора. Выберите `endpointConfigurationName As String` перегрузки.

4.  Перегрузке, введите `=` *ConfigurationName*, где *ConfigurationName* имя конечной точки, которую вы хотите использовать.

    > [!NOTE]
    >  Если вы не знаете имена доступных конечных точек, их можно найти в файле app.config.

#### <a name="to-find-the-available-endpoints-for-a-wcf-service"></a>Чтобы найти доступные конечные точки для службы WCF

1.  В **обозревателе решений**, щелкните правой кнопкой мыши файл app.config для проекта, содержащего ссылку на службу и нажмите кнопку **откройте**. Файл появится в редакторе кода.

2.  Поиск `<Client>` тег в файле.

3.  Поиск под `<Client>` тег для тега, который начинается с `<Endpoint>`.

     Если ссылка на службу предоставляет несколько конечных точек, будет существовать две или более `<Endpoint` теги.

4.  Внутри `<EndPoint>` тег, вы найдете `name="` *SomeService* `"` параметра (где *SomeService* представляет имя конечной точки). Это имя для конечной точки, который может быть передан в `endpointConfigurationName As String` перегрузки конструктора для ссылки на службу.

## <a name="how-to-call-a-service-method-asynchronously"></a>Практическое руководство. Асинхронный вызов метода службы
 Большинство методов в службах Windows Communication Foundation (WCF) может вызываться синхронно или асинхронно. Асинхронный вызов метода позволяет приложению продолжать работать при вызове метода через медленное подключение.

 По умолчанию при добавлении ссылки на службу в проект он настраивается для вызова методов синхронно. Можно изменить поведение асинхронный вызов методов, изменив параметр в **настроить ссылку на службу** диалоговое окно.

> [!NOTE]
>  Этот параметр имеет значение на основе каждой службы. Если один метод для службы вызывается асинхронно, все методы должны вызываться асинхронно.

 [!INCLUDE[note_settings_general](../includes/note-settings-general-md.md)]

#### <a name="to-call-a-service-method-asynchronously"></a>Асинхронный вызов метода службы

1.  В **обозревателе решений**, выберите ссылку на службу.

2.  На **проекта** меню, щелкните **настроить ссылку на службу**.

3.  В **настроить ссылку на службу** выберите **создать асинхронные операции** "флажок".

## <a name="how-to-bind-data-returned-by-a-service"></a>Практическое руководство. Привязка данных, возвращенных службой
 Можно привязать данные, возвращаемые службой Windows Communication Foundation (WCF) в элемент управления так же, как любой другой источник данных можно привязать к элементу управления. При добавлении ссылки на службу WCF, если служба содержит составные типы, которые возвращают данные, они автоматически добавляются **источников данных** окна.

#### <a name="to-bind-a-control-to-single-data-field-returned-by-a-wcf-service"></a>Чтобы привязать элемент управления к одному полю данных возвращенных службой WCF

1.  В меню **Данные** выберите команду **Показать источники данных**. **Источников данных** появится окно.

2.  В **источников данных** окне разверните узел для ссылки на службу. Отображаются все составные типы, возвращаемых службой.

3.  Разверните узел для типа. Поля данных для этого типа будет отображаться.

4.  Выберите поле и щелкните стрелку раскрывающегося списка, чтобы отобразить список элементов управления, доступные для типа данных.

5.  Выберите тип элемента управления, который вы хотите выполнить привязку к.

6.  Перетащите поле на форму. Элемент управления добавляется в форму вместе с <xref:System.Windows.Forms.BindingSource> компонента и <xref:System.Windows.Forms.BindingNavigator> компонента.

7.  Повторите шаги 4, то, что 6 для любых других полей, необходимо выполнить привязку.

#### <a name="to-bind-a-control-to-composite-type-returned-by-a-wcf-service"></a>Чтобы привязать элемент управления к составной тип, возвращаемый службой WCF

1.  На **данных** меню, выберите **Показать источники данных**. **Источников данных** появится окно.

2.  В **источников данных** окне разверните узел для ссылки на службу. Отображаются все составные типы, возвращаемых службой.

3.  Выберите узел для типа и щелкните стрелку раскрывающегося списка, чтобы отобразить список доступных параметров.

4.  Выберите либо **DataGridView** для отображения данных в виде сетки или **сведения** для отображения данных в отдельных элементах управления.

5.  Перетащите узел в форме. Элементы управления будут добавлены в форму вместе с <xref:System.Windows.Forms.BindingSource> компонента и <xref:System.Windows.Forms.BindingNavigator> компонента.

## <a name="how-to-configure-a-service-to-reuse-existing-types"></a>Практическое руководство. Настройка службы для повторного использования существующих типов
 При добавлении в проект ссылки на службу в локальном проекте создаются все типы, заданные в службе. Во многих случаях это создает повторяющиеся типы Если служба использует Общие [!INCLUDE[dnprdnshort](../includes/dnprdnshort-md.md)] типы или типы заданы в общей библиотеке.

 Чтобы избежать этой проблемы, по умолчанию общих типов в сборках, на которую указывает ссылка. Если вы хотите отключить совместное использование типов для одной или нескольких сборок, это можно сделать в **Настройка ссылок на службы** диалоговое окно.

#### <a name="to-disable-type-sharing-in-a-single-assembly"></a>Чтобы отключить совместное использование типов в одну сборку

1.  В **обозревателе решений**, выберите ссылку на службу.

2.  На **проекта** меню, щелкните **настроить ссылку на службу**.

3.  В **Настройка ссылок на службы** выберите **повторно использовать типы в указанных сборках, на которую указывает ссылка**.

4.  Установите флажок для каждой сборки, в которой вы хотите включить совместное использование типов. Чтобы отключить совместное использование типов для сборки, оставьте флажок снятым.

#### <a name="to-disable-type-sharing-in-all-assemblies"></a>Чтобы отключить совместное использование типов в все сборки

1.  В **обозревателе решений**, выберите ссылку на службу.

2.  На **проекта** меню, щелкните **настроить ссылку на службу**.

3.  В **Настройка ссылок на службы** снимите флажок **повторно использовать типы в сборках** "флажок".

## <a name="related-topics"></a>См. также

|Заголовок|Описание|
|-----------|-----------------|
|[Пошаговое руководство: Создание простой службы WCF в Windows Forms](../data-tools/walkthrough-creating-a-simple-wcf-service-in-windows-forms.md)|Пошаговая демонстрация создания и использования служб WCF в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)].|
|[Пошаговое руководство: Создание службы данных WCF с помощью WPF и Entity Framework](../data-tools/walkthrough-creating-a-wcf-data-service-with-wpf-and-entity-framework.md)|Пошаговая демонстрация того, как создать и использовать [!INCLUDE[ssAstoria](../includes/ssastoria-md.md)] в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)].|
|[Использование средств разработки WCF](http://msdn.microsoft.com/library/054adb87-c244-4d5a-83d1-0b2b44bd454b)|Описываются способы создания и тестирования служб WCF в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)].|
|[Практическое руководство. Добавление, обновление или удаление ссылки на службу](http://msdn.microsoft.com/library/cacc14bd-4455-4a44-be78-d2ac16113dd9)|Описывает добавление, обновление или удаление службы WCF из проекта.|
|[Практическое руководство. Добавление, обновление или удаление ссылки на службу данных WCF](../data-tools/how-to-add-update-or-remove-a-wcf-data-service-reference.md)|Описывает, как использовать [!INCLUDE[ssAstoria](../includes/ssastoria-md.md)] в [!INCLUDE[vsprvs](../includes/vsprvs-md.md)].|
|[Диагностика ссылок на службы](../data-tools/troubleshooting-service-references.md)|Приведены некоторые распространенные ошибки, которые могут возникнуть с помощью ссылок на службы и способов их устранения.|
|[Отладка служб WCF](../debugger/debugging-wcf-services.md)|Описание общих проблем отладки и методов, которыми можно столкнуться при отладке службы WCF.|
|[Общие сведения о Windows Communication Foundation проверки подлинности службы](http://msdn.microsoft.com/library/6e121a28-89e8-4974-88a8-70aaa6a7d52b)|Описывает способы использования WCF для предоставления службы роли веб-сайта.|
|[Пошаговое руководство: Создание n-уровневого приложения для работы с данными](../data-tools/walkthrough-creating-an-n-tier-data-application.md)|Содержит пошаговые инструкции по созданию типизированного набора данных и разделения кода адаптера таблицы и набора данных на несколько проектов.|
|[Диалоговое окно "Настроить ссылку на службу"](../data-tools/configure-service-reference-dialog-box.md)|Описание элементов пользовательского интерфейса из **настроить ссылку на службу** диалоговое окно.|

## <a name="reference"></a>Ссылка
 <xref:System.ServiceModel>

 <xref:System.Data.Services>

## <a name="see-also"></a>См. также
 [Visual Studio Data Tools для .NET](../data-tools/visual-studio-data-tools-for-dotnet.md)
