---
title: Регистрация и выбор (пакет VSPackage управления версиями) | Документация Майкрософт
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-ide-sdk
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- registration, source control packages
- source control packages, registration
ms.assetid: 7d21fe48-489a-4f55-acb5-73da64c4e155
caps.latest.revision: 35
ms.author: gregvanl
manager: ghogen
ms.openlocfilehash: e7b6324112bed6d201ca57fd3fb5c77696a528f2
ms.sourcegitcommit: 9ceaf69568d61023868ced59108ae4dd46f720ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2018
ms.locfileid: "49305790"
---
# <a name="registration-and-selection-source-control-vspackage"></a>Регистрация и выбор (пакет VSPackage системы управления версиями)
[!INCLUDE[vs2017banner](../../includes/vs2017banner.md)]

Системы управления версиями, необходимо зарегистрировать VSPackage, чтобы предоставлять его для [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)]. Если более одной системы управления версиями VSPackage зарегистрирован, пользователь может выбрать какие VSPackage для загрузки в нужное время. См. в разделе [пакетов VSPackage](../../extensibility/internals/vspackages.md) узнать больше о пакеты VSPackage и их регистрации.  
  
## <a name="registering-a-source-control-package"></a>Регистрация пакета системы управления версиями  
 Регистрации пакета системы управления версиями, чтобы [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] среды можно найти его и запрос для его поддерживаемых функций. Это соответствует отложенная загрузка схемы, в котором создается экземпляр пакета, только в том случае, когда его функции или команды являются обязательными, или явно запрашиваются.  
  
 Пакеты VSPackage размещать информацию в раздел реестра для конкретной версии, HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\\*X.Y*, где *X* — основной номер версии и *Y* — это дополнительный номер версии. Такой подход обеспечивает возможность поддерживает установку нескольких версий side-by-side [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)].  
  
 [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] Пользовательский интерфейс (UI) поддерживает выбор из нескольких установленных источника подключаемые модули управления (с помощью пакета адаптера системы управления версиями), а также системы управления версиями пакетов VSPackage. Может существовать только один подключаемый модуль системы управления активный источник или VSPackage за раз. Тем не менее как описано ниже, интегрированной среды разработки позволяет переключаться между подключаемых модулей системы управления версиями и пакеты VSPackage, через автоматический решение на основе пакета замену механизм. Существуют некоторые требования со стороны пакета VSPackage системы управления версиями, чтобы включить данный способ выделения.  
  
### <a name="registry-entries"></a>Записи реестра  
 Пакет системы управления версиями требуется три частного идентификатора GUID:  
  
-   Идентификатор GUID пакета: Это основной идентификатор GUID для пакета, который содержит реализацию элемента управления источника (называется ID_Package в этом разделе).  
  
-   Системы управления версиями GUID: Это представляет собой идентификатор GUID для пакета VSPackage, используемой для регистрации Visual заглушкой системы управления версиями Studio системы управления версиями и используется в качестве GUID контекста пользовательского интерфейса команды. Службы управления версиями GUID регистрируется в системе управления версиями GUID. В приведенном примере GUID исходного элемента управления называется ID_SccProvider.  
  
-   Исходный идентификатор GUID службы управления: это закрытой службой GUID, используемый в Visual Studio (называемый SID_SccPkgService в этом разделе). Кроме того пакет системы управления версиями необходимо определить другие идентификаторы GUID для пакетов VSPackage, окна инструментов и т. д.  
  
 Пакет VSPackage системы управления версиями должны быть сделаны следующие записи реестра:  
  
|Имя раздела|Записи|  
|--------------|-------------|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SourceControlProviders\`|(по умолчанию) = rg_sz: {ID_SccProvider}|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SourceControlProviders\             {ID_SccProvider}\`|(по умолчанию) = rg_sz:\<понятное имя пакета ><br /><br /> Служба = rg_sz: {SID_SccPkgService}|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SourceControlProviders\             {ID_SccProvider}\               Name\`|(по умолчанию) = rg_sz: #\<идентификатор ресурса для локализованного имени ><br /><br /> Пакет = rg_sz: {ID_Package}|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SolutionPersistence\             <PackageName>\`<br /><br /> (Обратите внимание, что имя ключа, `SourceCodeControl`, уже используется [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] и недоступно в списках \<имя пакета >.)|(по умолчанию) = rg_sz: {ID_Package}|  
  
## <a name="selecting-a-source-control-package"></a>Выбор пакета системы управления версиями  
 Несколько на базе API подключаемых модулей управления источника подключаемые модули и система управления версиями, пакеты VSPackage может быть зарегистрирован одновременно. Процесс выбора подключаемого модуля системы управления версиями или VSPackage необходимо убедиться, что [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] загружает подключаемый модуль или пакет VSPackage в соответствующее время и можно отложить загрузку ненужные компоненты, пока они не требуется. Кроме того [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] необходимо удалить всех элементов пользовательского интерфейса из других неактивные пакеты VSPackage, включая элементы меню, диалоговые окна и панели инструментов и отображает пользовательский Интерфейс для активных VSPackage.  
  
 [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] загружает пакет VSPackage системы управления версиями, при выполнении любого из следующих операций:  
  
-   Решение открывается (если решение находится в системе управления версиями).  
  
     При открытии решения или проекта в системе управления версиями, интегрированной среды разработки приводит к VSPackage, который был назначен для этого решения для загрузки системы управления версиями.  
  
-   Выполняются все команды меню из VSPackage системы управления версиями.  
  
 Все компоненты, которые необходимы только в том случае, когда они действительно будут должен загрузиться проект VSPackage системы управления версиями используется (в противном случае называется отложенной загрузки).  
  
### <a name="automatic-solution-based-vspackage-swapping"></a>Переключение автоматического пакета VSPackage на основе решений  
 Вы можете вручную переключить системы управления версиями пакетов VSPackage через [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] **параметры** диалогового окна **системы управления версиями** категории. Переключение автоматического пакетов на основе решений означает, что пакет системы управления версиями, который предназначен для конкретного решения автоматически устанавливается в активный режим, при открытии этого решения. Каждый пакет системы управления версиями следует реализовать <xref:Microsoft.VisualStudio.Shell.Interop.IVsSccProvider.SetActive%2A> и <xref:Microsoft.VisualStudio.Shell.Interop.IVsSccProvider.SetInactive%2A>. [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] Выполняет переключение между оба источника подключаемые модули управления (который реализует API подключаемых модулей управления источника) и система управления версиями пакетов VSPackage.  
  
 Переключиться на любом на основе API подключаемых модулей управления источника используется пакет адаптера системы управления версиями подключаемого модуля. Должно быть присвоено процесс перехода в промежуточный пакет адаптера системы управления версиями и определить, какой подключаемый модуль системы управления версиями, что активное или неактивное является прозрачным для пользователя. Пакет адаптера активен, всегда при активном любой подключаемый модуль системы управления версиями. Переключение между двумя суммами подключаемые модули управления источника просто загрузки и выгрузки библиотеки DLL подключаемого модуля. Переключение на пакет VSPackage системы управления версиями, однако включает в себя взаимодействия с интегрированной среды разработки для загрузки соответствующего пакета VSPackage.  
  
 Элемент управления источником VSPackage вызывается при открытии любого решения, и раздел реестра для VSPackage находится в файле решения. При открытии решения [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] находит значение реестра и загрузке VSPackage соответствующего исходного элемента управления. Все системы управления версиями пакетов VSPackage должен иметь записи реестра, описанные выше. Это решение, которое находится в системе управления версиями, помечается как связанный с элементом управления источника пакета VSPackage. Система управления версиями, пакеты VSPackage должны реализовывать <xref:Microsoft.VisualStudio.Shell.Interop.IVsSolutionPersistence> на возможность автоматического решения на базе VSPackage замены.  
  
### <a name="visual-studio-ui-for-package-selection-and-switching"></a>Пользовательский Интерфейс для выбора пакета и переключение Visual Studio  
 [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] Предоставляет пользовательский Интерфейс для системы управления версиями VSPackage и выбор подключаемого модуля в **параметры** диалогового окна **системы управления версиями** категории. Он позволяет пользователю выбрать модуль active система управления версиями или VSPackage. Перечислены в раскрывающемся списке.  
  
-   Установлены все пакеты системы управления версиями  
  
-   Все установки подключаемых модулей системы управления версиями  
  
-   Параметр «Нет», который отключает системы управления исходным кодом  
  
 Отображается только пользовательский Интерфейс для выбора элемента управления активной исходной. Выбор VSPackage скрывает пользовательский Интерфейс для предыдущего пакета VSPackage и показан пользовательский Интерфейс для создания нового. Active VSPackage установлен на уровне пользователя. Если у пользователя есть несколько копий [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] открытых одновременно, каждый из них потенциально могут использовать разные active VSPackage. Если несколько пользователей вошли том же компьютере, каждый пользователь может иметь отдельные экземпляры [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] открыть, каждый из которых разных active VSPackage. Когда несколько экземпляров [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] закрываются пользователем, пакет VSPackage, которая была активна, последнее открытое решение становится системы управления версиями по умолчанию VSPackage, задаваемый active при перезапуске системы управления версиями.  
  
 В отличие от предыдущих версий [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)], интегрированную среду разработки перезапускать узлы больше не единственный способ переключиться системы управления версиями пакетов VSPackage. Выбор VSPackage выполняется автоматически. Переключение пакетов требуются привилегии пользователя Windows (не администратора или опытного пользователя).  
  
## <a name="see-also"></a>См. также  
 <xref:Microsoft.VisualStudio.Shell.Interop.IVsSolutionPersistence>   
 [Функции](../../extensibility/internals/source-control-vspackage-features.md)   
 [Создание подключаемого модуля системы управления версиями](../../extensibility/internals/creating-a-source-control-plug-in.md)   
 [Пакеты VSPackage](../../extensibility/internals/vspackages.md)

