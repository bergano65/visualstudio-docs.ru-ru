---
title: 'Практическое: определение и использование делегатов действий в конструкторе рабочих процессов | Документация Майкрософт'
ms.custom: ''
ms.date: 11/15/2016
ms.prod: .net-framework-4.6
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: reference
ms.assetid: c68e42ad-3ec0-4c2d-b104-fe36c6d83b5e
caps.latest.revision: 3
author: steved0x
ms.author: gewarren
manager: erikre
ms.openlocfilehash: 5f7b69d0fb1ccd547d522d65fab803bd79a10ed2
ms.sourcegitcommit: 9ceaf69568d61023868ced59108ae4dd46f720ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2018
ms.locfileid: "49183382"
---
# <a name="how-to-define-and-consume-activity-delegates-in-the-workflow-designer"></a>Как определить и использовать делегатов действий в конструкторе рабочих процессов
[!INCLUDE[net_v45](../includes/net-v45-md.md)] содержит новый готовый конструктор для действия <xref:System.Activities.Statements.InvokeDelegate>. Данный конструктор можно использовать в целях назначения делегатов для действия, производного от <xref:System.Activities.ActivityDelegate>, такого как <xref:System.Activities.ActivityAction> или <xref:System.Activities.ActivityFunc%601>.  
  
### <a name="define-an-activity-delegate"></a>Укажите делегат действия  
  
1.  В [!INCLUDE[vs_current_short](../includes/vs-current-short-md.md)]выберите **файл**, **New**, **проекта**. Выберите **рабочего процесса** узел слева, а **консольное приложение рабочего процесса** шаблон в правой части. Имя проекта (при необходимости) и нажмите кнопку **ОК**.  
  
2.  Щелкните правой кнопкой мыши проект в **обозревателе решений** и выберите **добавить**, **новый элемент...** . Выберите **рабочего процесса** узел с левой стороны экрана и **действия** шаблон в правой части. Назовите новое действие **MyForEach.xaml** и нажмите кнопку **ОК**. Действие откроется в конструкторе рабочих процессов.  
  
3.  В конструкторе рабочих процессов, нажмите кнопку **аргументы** вкладки.  
  
4.  Нажмите кнопку **создать аргумент**. Назовите новый аргумент **элементы**.  
  
5.  В **тип аргумента** столбец, выберите **массив [T]**.  
  
6.  В браузере типов выберите **объект**. Нажмите кнопку **ОК**.  
  
7.  Нажмите кнопку **создать аргумент** еще раз. Назовите новый аргумент **текст**. В **направление** столбец для нового аргумента выберите **свойство**.  
  
8.  В столбце типа аргумента выберите **Выбор типов...**  
  
9. В браузере типов введите **ActivityAction** в **имя типа** поля. Выберите **ActivityAction\<T >** в представлении в виде дерева. Выберите **объект** в раскрывающемся списке, который появляется в целях присваивания типа **ActivityAction\<объекта >** к аргументу.  
  
10. Перетащите <xref:System.Activities.Statements.While> действия из **поток управления** разделе области элементов в область конструктора.  
  
11. Выберите <xref:System.Activities.Statements.While> действие и выберите **переменных** вкладки.  
  
12. Выберите **создать переменную**. Присвойте имя новой переменной **индекс**.  
  
13. В **тип переменной** столбец, выберите **Int32**. Оставьте **область** как **хотя**и **по умолчанию** пустой столбец.  
  
14. Задайте **условие** свойство <xref:System.Activities.Statements.While> действие **индекс < Items.Length;**.  
  
15. Перетащите <xref:System.Activities.Statements.InvokeDelegate> действия из **примитивы** панели элементов для **текст** из <xref:System.Activities.Statements.While> действия.  
  
16. Выберите **текст** в раскрывающемся списке делегата.  
  
17. В **свойства** сетки для <xref:System.Activities.Statements.InvokeDelegate> действия, нажмите кнопку **...** кнопки в **аргументов делегата** свойство.  
  
18. В **значение** столбец с именем аргумента **аргумент**, введите **Items [Index]**. Нажмите кнопку **ОК** закрыть **DelegateArguments** диалоговое окно.  
  
19. Перетащите действие <xref:System.Activities.Statements.Assign> на горизонтальную линию под действием <xref:System.Activities.Statements.InvokeDelegate>. <xref:System.Activities.Statements.Assign> Действия будет создан и <xref:System.Activities.Statements.Sequence> действия будут создаваться автоматически для размещения двух действий в **текст** раздел **MyForEach** действия. Требуется последовательность, так как **текст** раздел может содержать только одно действие. Автоматическое создание нового действия <xref:System.Activities.Statements.Sequence> - это новая возможность [!INCLUDE[net_v45](../includes/net-v45-md.md)].  
  
20. Задайте **для** свойство <xref:System.Activities.Statements.Assign> действие **индекс**. Задайте **значение** свойство **назначить** действие **индекс + 1**.  
  
 Пользовательский **MyForEach** действия теперь будет вызывать по одному произвольному действию, один раз для каждого значения, переданного с помощью **элементы** коллекции со значениями в коллекцию в качестве входных данных для действия.  
  
### <a name="use-the-custom-activity-in-a-workflow"></a>Использование настраиваемого действия в рабочем процессе  
  
1.  Постройте проект, нажав клавишу **Ctrl + Shift + B**.  
  
2.  В **обозревателе решений**откройте **Workflow1.xaml** в конструкторе.  
  
3.  Перетащите **MyForEach** действия из области элементов в область конструктора. Действие находится в разделе области элементов с тем же именем, что и проект.  
  
4.  Задайте **элементы** свойство **MyForEach** действие **new Object [] {1, «abc»}**.  
  
5.  Перетащите <xref:System.Activities.Statements.WriteLine> действия из **примитивы** панели элементов для **Delegate: текст** раздел **MyForEach** действия.  
  
6.  Задайте **текст** свойство <xref:System.Activities.Statements.WriteLine> действие **Argument.ToString()**.  
  
 При выполнении рабочего процесса в консоли отобразится следующее:  
  
 **1**   
**abc**