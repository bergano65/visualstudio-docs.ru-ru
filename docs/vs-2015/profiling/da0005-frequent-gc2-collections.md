---
title: 'DA0005: частые коллекции GC2 | Документация Майкрософт'
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-ide-debug
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- vs.performance.DA0005
- vs.performance.rules.DAManyGC2Collections
- vs.performance.5
- vs.performance.rules.DA0005
ms.assetid: 8d3f267c-8a74-4cf4-91a5-0b06a76dc2bd
caps.latest.revision: 16
author: MikeJo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: 80b3f769a151974559f70d247696fd7abb794731
ms.sourcegitcommit: af428c7ccd007e668ec0dd8697c88fc5d8bca1e2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/16/2018
ms.locfileid: "51745783"
---
# <a name="da0005-frequent-gc2-collections"></a>DA0005: частые коллекции GC2
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Идентификатор правила | DA0005 |  
| Категория |. Использование .NET Framework |  
| Метод профилирования |. Памяти .NET |  
| Сообщение | Многие из ваших объектов собираются при сборке мусора поколения 2. |  
| Тип сообщения | Предупреждение |  
  
## <a name="cause"></a>Причина  
 Большое число объектов памяти .NET освобождается при сборке мусора поколения 2.  
  
## <a name="rule-description"></a>Описание правила  
 Среда CLR Microsoft .NET обеспечивает автоматический механизм управления памятью, использующий сборщик мусора для удаления из памяти объектов, которые приложение больше не использует. Сборщик мусора ориентирован на поколение, исходя из той предпосылки, что многие выделения памяти являются краткосрочными. Например, срок жизни локальных переменных должен быть небольшим. Вновь созданные объекты сначала находятся в поколении 0 (gen 0), а затем переходят в поколение 1, если они сохраняются после выполнения сборки мусора и, наконец, переходят в поколение 2, если приложение по-прежнему использует их.  
  
 Объекты поколения 0 собираются часто и обычно очень эффективно. Объекты поколения 1 собираются менее часто и менее эффективно. Наконец, сбор долгоживущих объектов в поколении 2 должен происходить еще реже. Сбор поколения 2, то есть полная сборка мусора, также является наиболее ресурсоемкой операцией.  
  
 Это правило применяется в тех случаях, когда доля времени, затраченного на сборку мусора для поколения 2, становится слишком велика. Если слишком большое число относительно краткосрочных объектов остаются после сборки мусора в поколении 1, но их удается полностью собрать с поколением 2, затраты на управление памятью могут с легкостью стать слишком высокими. Дополнительные сведения см. в статье [Кризис среднего возраста](http://go.microsoft.com/fwlink/?LinkId=177835) в Rico Mariani's Performance Tidbits на веб-сайте MSDN.  
  
## <a name="how-to-investigate-a-warning"></a>Изучение причин предупреждения  
 Для лучшего понимания схемы выделения памяти в приложении просмотрите отчеты [Представления данных в памяти .NET](../profiling/dotnet-memory-data-views.md). Используйте [представление "время существования объектов"](../profiling/object-lifetime-view.md) чтобы определить, какие из данных программы остаются в поколении 2, а затем из него удаляются объекты. Используйте [Представление "Выделения"](../profiling/dotnet-memory-allocations-view.md) для определения путей выполнения, которые приводят к появлению таких выделений памяти.  
  
 Сведения о том, как повысить производительность сборки мусора, см. в статье [Сведения о повышении производительности сборки мусора](http://go.microsoft.com/fwlink/?LinkId=148226) на веб-сайте корпорации Майкрософт. Сведения о дополнительных затратах на автоматическую сборку мусора см. в статье [Представляем кучу для массивных объектов](http://go.microsoft.com/fwlink/?LinkId=177836).



