---
title: C6262 | Документация Майкрософт
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-devops-test
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- C6262
helpviewer_keywords:
- C6262
ms.assetid: 3eddc74e-2b05-4159-a093-fd469fdcebbb
caps.latest.revision: 20
author: corob-msft
ms.author: gewarren
manager: ghogen
ms.openlocfilehash: 191ace3d98a3d2da31deb198ac3547b4186e9e64
ms.sourcegitcommit: 9ceaf69568d61023868ced59108ae4dd46f720ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2018
ms.locfileid: "49208186"
---
# <a name="c6262"></a>C6262
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Предупреждение C6262: функция использует \<константа > байт в стеке: превышает / analyze: stacksize\<константа 2 >. Попробуйте переместить некоторые данные в кучу  
  
 Это предупреждение указывает, что стек, превышает заданный порог (`constant 2`) обнаружена в функции. Размер кадра стека по умолчанию для данного предупреждения составляет 16 КБ 1 КБ для режима ядра в режиме пользователя. Стек — даже в пользовательском режиме, ограничен, и ошибки фиксации страницу из стека причин исключение переполнения стека. В режиме ядра имеет ограничение размера стека 12 КБ, который не может быть увеличена; Таким образом код в режиме ядра агрессивно следует ограничить использование стека.  
  
 Чтобы решить проблему за это предупреждение, можно либо переместить некоторые данные в кучу или других динамической памяти.  В пользовательском режиме, один кадр огромная стопка может не быть проблемой, и это предупреждение может быть отменено, но кадр стека крупных повышает риск переполнение стека. (Кадр стека крупных может произойти, если функция интенсивно использует стек или является рекурсивным.) Можно увеличить общий размер стека в пользовательском режиме, если фактически происходит переполнение стека, но только в пределах системы.  Можно использовать **/ analyze** параметр командной строки, чтобы изменить значение для `<constant 2>`, но его представляет риск, что ошибка не возникнет.  
  
 Для кода режима ядра — например, в проектах драйвера, значение `<constant 2>` имеет значение 1 КБ. Правильно составленный драйверы должны иметь очень мало функции, которые подход это значение, а изменение вниз ограничения может быть желательным.  Те же общие методы, которые используются для кода пользовательского режима, чтобы уменьшить размер стека можно адаптировать для кода режима ядра.  
  
## <a name="example"></a>Пример  
 В следующем коде создается данное предупреждение, поскольку `char buffer` выделяет 16,382 байтов и локальная целочисленная переменная `i` выделяет еще 4 байта, которые вместе превысили максимальный размер стека по умолчанию 16 КБ.  
  
```cpp  
// cl.exe /c /analyze /EHsc /W4  
#include <windows.h>  
#define MAX_SIZE 16382  
  
void f( )  
{  
    int i;  
    char buffer[MAX_SIZE];  
  
    i = 0;  
    buffer[0]='\0';  
  
    // code...  
}  
  
```  
  
 В следующем коде исправлены это предупреждение, переместив некоторые данные в кучу.  
  
```cpp  
// cl.exe /c /analyze /EHsc /W4  
#include <stdlib.h>     
#include <malloc.h>  
#define MAX_SIZE 16382  
  
void f( )  
{  
    int i;  
    char *buffer;  
  
    i = 0;  
    buffer = (char *) malloc( MAX_SIZE );  
    if (buffer != NULL)   
    {  
        buffer[0] = '\0';  
        // code...  
        free(buffer);  
    }  
}  
  
```  
  
 Использование объекта malloc и free имеют множество ловушек с точки зрения утечки памяти и исключения. Чтобы избежать такого рода утечки и исключение проблемы, используйте механизмы, предоставляемые по C++ стандартной библиотеки шаблонов (STL). К ним относятся [shared_ptr](http://msdn.microsoft.com/library/1469fc51-c658-43f1-886c-f4530dd84860), [unique_ptr](http://msdn.microsoft.com/library/acdf046b-831e-4a4a-83aa-6d4ee467db9a), и [вектор](http://msdn.microsoft.com/library/c1431ad8-c0b6-4dbb-89c4-5f651e432d7f). Дополнительные сведения см. в разделе [интеллектуальные указатели](http://msdn.microsoft.com/library/909ef870-904c-49b6-b8cd-e9d0b7dc9435) и [стандартной библиотеки C++](http://msdn.microsoft.com/library/a37d3ba3-58af-47c7-9ee2-441ccd7b77ee).  
  
 **Чтобы устранить это предупреждение, корректируя размер стека**  
  
1.  В строке меню выберите **Проект**, **Свойства**.  
  
     Откроется диалоговое окно **Страницы свойств**.  
  
2.  Разверните **свойства конфигурации**.  
  
3.  Разверните **C/C++**.  
  
4.  Выберите **командной строки** свойства.  
  
5.  В **Дополнительные параметры**, добавьте **/ analyze: stacksize16388**.  
  
## <a name="see-also"></a>См. также  
 [/ STACK (выделение памяти в стеке)](http://msdn.microsoft.com/library/73283660-e4bd-47cc-b5ca-04c5d739034c)   
 [_resetstkoflw](http://msdn.microsoft.com/library/319529cd-4306-4d22-810b-2063f3ad9e14)   
 [Практическое руководство. Настройка проверок во время выполнения машинного кода](../debugger/how-to-use-native-run-time-checks.md)



