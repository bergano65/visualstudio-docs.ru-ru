---
title: Параметры стиля кода и очистка кода
description: Сведения о том, как настроить Visual Studio для применения параметров стиля кода с помощью команд очистки кода (Visual Studio 2019) и форматирования документа (Visual Studio 2017).
ms.custom: SEO-VS-2020
ms.date: 04/25/2019
ms.topic: conceptual
author: mikejo5000
ms.author: mikejo
manager: jmartens
f1_keywords:
- VS.ToolsOptionsPages.Text_Editor.CSharp.Code_Style.General
- VS.ToolsOptionsPages.Text_Editor.Basic.Code_Style.General
ms.workload:
- multiple
ms.openlocfilehash: 0aafcb1740f0e17234d2e4da38630c1416c44e9c
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99841952"
---
# <a name="code-style-preferences"></a>Параметры стиля кода

Код стиля параметров каждого проекта можно определить с помощью [EDITORCONFIG-файла](#code-styles-in-editorconfig-files); для всего кода в Visual Studio можно задать настройки на странице [**Параметры** в текстовом редакторе](#code-styles-in-the-options-dialog-box). Для кода на C# можно также настроить Visual Studio, чтобы применять эти параметры стиля кода с помощью команд **Очистка кода** (Visual Studio 2019) и **Форматировать документ** (Visual Studio 2017).

> [!NOTE]
> Этот раздел относится к Visual Studio в Windows. Информацию о Visual Studio для Mac см. в статье [Поведение редактора в Visual Studio для Mac](/visualstudio/mac/editor-behavior).

## <a name="code-styles-in-editorconfig-files"></a>Стили кода в EDITORCONFIG-файлах

[Параметры стиля кода](/dotnet/fundamentals/code-analysis/code-style-rule-options) для .NET можно указать, добавив [EDITORCONFIG-файл](create-portable-custom-editor-options.md) к проекту. EDITORCONFIG-файлы связаны с базой кода, а не с учетной записью персонализации Visual Studio. Параметры в EDITORCONFIG-файле имеют приоритет над параметрами, выбранными в диалоговом окне **Параметры**. Используйте файл EditorConfig, если вы хотите применить стили кода для всех участников к репозиторию или проекту.

::: moniker range=">=vs-2019"

Вы можете вручную отредактировать файл EditorConfig или автоматически создать его в зависимости от установленных в Visual Studio параметров стиля кода в диалоговом окне **Параметры**. Страница "Параметры" находится в разделе **Сервис** > **Параметры** > **Текстовый редактор** > [**C#** или **Basic**] > **Стиль кода** > **Общие**. Нажмите кнопку **Создать EDITORCONFIG-файл из параметров**, чтобы автоматически создать *EDITORCONFIG-файл* стиля кода на основе параметров, которые вы задали на этой странице **Параметры**.

![Создание EDITORCONFIG-файла из параметров в Visual Studio 2019](media/vs-2019/generate-editorconfig-file-small.png)

::: moniker-end

## <a name="code-styles-in-the-options-dialog-box"></a>Стили кода в диалоговом окне "Параметры"

Параметры стиля кода для проектов C# и Visual Basic можно задать, открыв диалоговое окно **Параметры** из меню **Сервис**. В диалоговом окне **Параметры** выберите **Текстовый редактор** > [**C#** или **Basic**] > **Стиль кода** > **Общие**.

При выборе для каждого из элементов в списке выводится окно предварительного просмотра:

::: moniker range="vs-2017"

![Параметры стиля кода](media/code-style-quick-actions-dialog.png)

::: moniker-end

::: moniker range=">=vs-2019"

![Параметры стиля кода](media/vs-2019/code-style-quick-actions-dialog.png)

::: moniker-end

Параметры, заданные в этом окне, применяются к вашей учетной записи персонализации Visual Studio и не связаны с конкретным проектом или базой кода. Кроме того, они не применяются во время сборки, в том числе в сборках с непрерывной интеграцией (CI). Если вы хотите связать предпочтения к стилю кода со своим проектом и применяете стили во время сборки, укажите такие предпочтения в [EDITORCONFIG-файле](#code-styles-in-editorconfig-files), связанном с проектом.

### <a name="preference-and-severity"></a>Предпочтения и степень серьезности

Для каждого параметра стиля кода на этой странице с помощью раскрывающихся списков в каждой строке можно задать значения для параметров **Предпочтение** и **Серьезность**. Для серьезности можно задать значения **Только рефакторинг**, **Предложение**, **Предупреждение** или **Ошибка**. Если вы хотите включить [быстрые действия](../ide/quick-actions.md) для стиля кода, убедитесь, что для параметра **Серьезность** задано значение, отличное от **Только рефакторинг**. Значок лампочки для **быстрых действий** :::image type="icon" source="media/light-bulb-dropdown.png":::, значок лампочки для ошибок :::image type="icon" source="media/error-bulb.png"::: или значок отвертки :::image type="icon" source="media/screwdriver.png"::: отображается при использовании альтернативного стиля. Вы можете выбрать нужный вариант в списке **быстрых действий** для автоматического повторного создания кода в предпочитаемом стиле.

::: moniker range=">=vs-2019"

## <a name="enforce-code-styles-on-build"></a>Принудительное применение стиля кода в сборке

Начиная с Visual Studio 2019 версии 16.8, куда входит пакет SDK для .NET 5.0 RC2, можно [применять соглашения о написании кода .NET в сборке](/dotnet/fundamentals/productivity/code-analysis#code-style-analysis) для всех проектов .NET. Во время сборки нарушения стиля кода .NET будут отображаться в виде предупреждений или ошибок с префиксом IDE. Это позволяет строго применять единообразные стили кода в базе кода.

::: moniker-end

## <a name="apply-code-styles"></a>Применение стилей кода

::: moniker range="vs-2017"

Вы можете настроить команду **Форматировать документ** (**Правка** > **Дополнительно** > **Форматировать документ**) для применения параметров стиля кода (из EDITORCONFIG-файла или параметров **стиля кода**) вместе с регулярным форматированием (например, отступами). Если *EDITORCONFIG*-файл существует в проекте, его параметры имеют приоритет.

> [!NOTE]
> Применение стилей кода с помощью команды **Форматировать документ** доступно только для файлов кода на C#. Это экспериментальная функция.

Вы можете выбрать, какие параметры команда **Форматировать документ** будет применять, на [странице параметров форматирования](reference/options-text-editor-csharp-formatting.md#format-document-settings).

![Параметры стиля кода для форматирования документов в Visual Studio 2017](media/format-document-settings-experiment.png)

> [!TIP]
> Правила, настроенные с серьезностью **Нет**, не используются в ходе очистки кода, но могут применяться по отдельности через меню **Быстрые действия и рефакторинг**.

При первом запуске команды **Форматировать документ** вам следует настроить параметры очистки кода на желтой информационной панели.

::: moniker-end

::: moniker range=">=vs-2019"

Для файлов кода на C# в Visual Studio 2019 есть кнопка **Очистка кода** в нижней части редактора (на клавиатуре: **CTRL**+**K**, **CTRL**+**E**) для применения стилей кода из EDITORCONFIG-файла или со страницы параметров **стиля кода**. Если *EDITORCONFIG*-файл существует в проекте, его параметры имеют приоритет.

![Выполнение очистки кода в Visual Studio 2019](media/execute-code-cleanup.png)

> [!TIP]
> Правила, настроенные с серьезностью **Нет**, не используются в ходе очистки кода, но могут применяться по отдельности через меню **Быстрые действия и рефакторинг**.

Во-первых, настройте стили кода, которые необходимо применять (в одном из двух профилей), используя диалоговое окно **Настройка очистки кода**. Чтобы открыть это диалоговое окно, щелкните стрелку рядом со значком метлы (очистка кода) и выберите команду **Настроить очистку кода**.

![Настройка очистки кода в Visual Studio 2019](media/configure-code-cleanup.png)

После настройки очистки кода вы можете щелкнуть значок метлы или нажать клавиши **Ctrl**+**K**, **Ctrl**+**E**, чтобы запустить очистку кода. Вы также можете выполнить очистку кода для всего проекта или решения сразу. Щелкните правой кнопкой мыши имя проекта или решения в **обозревателе решений**, выберите команду **Анализ и очистка кода**, а затем — **Запустить очистку кода**.

![Запуск очистки кода для всего проекта или решения](media/run-code-cleanup-project-solution.png)

Если вы хотите применять параметры стиля кода при каждом сохранении файла, вам может подойти расширение для [очистки кода при сохранении](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.CodeCleanupOnSave).

::: moniker-end

## <a name="see-also"></a>См. также раздел

- [Быстрые действия](../ide/quick-actions.md)
- [Параметры соглашений о написании кода .NET в EditorConfig](/dotnet/fundamentals/code-analysis/code-style-rule-options)
- [Поведение редактора (Visual Studio для Mac)](/visualstudio/mac/editor-behavior)
