---
title: Шаг 4. Добавление обработчика событий Click к каждому элементу управления Label
description: Узнайте, как добавить обработчик событий Click к каждому элементу управления Label.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: tutorial
ms.prod: visual-studio-windows
ms.technology: vs-ide-general
dev_langs:
- CSharp
- vb
ms.assetid: 16bdbc7c-4129-411d-bace-f4a3e5375975
author: ornellaalt
ms.author: ornella
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 0f37d0f89ad5124956198df1bde94bdb6cf54f64
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99950683"
---
# <a name="step-4-add-a-click-event-handler-to-each-label"></a>Шаг 4. Добавление обработчика событий Click к каждому элементу управления Label

Игра "Подбери пару!" работает следующим образом.

1. Когда игрок выбирает один из квадратов со скрытым значком, программа показывает значок игроку, изменяя цвет значка на черный.

2. После этого игрок выбирает другой скрытый значок.

3. Если значки совпадают, они остаются видимыми. Если нет, оба значка снова скрываются.

   Чтобы программа работала именно так, добавьте обработчик событий <xref:System.Windows.Forms.Control.Click>, изменяющий цвет выбираемого элемента управления Label.

## <a name="to-add-a-click-event-handler-to-each-label"></a>Добавление обработчика событий Click к каждому элементу управления Label

1. Откройте форму в **конструкторе Windows Forms**. В **обозревателе решений** выберите *Form1.cs* или *Form1.vb*. В строке меню выберите **Вид** > **Конструктор**.

2. Выберите первый элемент Label, чтобы выделить его. Затем, удерживая нажатой клавишу **CTRL**, выберите каждую из оставшихся меток. Убедитесь, что выбраны все метки.

3. Нажмите кнопку **События** на панели инструментов в окне **Свойства**, чтобы открыть страницу **События** в окне **Свойства**. Прокрутите вниз до события **Click** и введите **label_Click** в поле, как показано на следующем снимке экрана.

     ![Окно свойств, отображающее событие Click](../ide/media/express_labelclick.png)

4. Нажмите клавишу **ВВОД**. Интегрированная среда разработки добавит обработчик событий `Click`, который называется `label_Click()`, в код и подключит его к каждому элементу управления Label в форме.

5. Добавьте остальную часть кода следующим образом:

     [!code-csharp[VbExpressTutorial4Step2_3_4#4](../ide/codesnippet/CSharp/step-4-add-a-click-event-handler-to-each-label_1.cs)]
     [!code-vb[VbExpressTutorial4Step2_3_4#4](../ide/codesnippet/VisualBasic/step-4-add-a-click-event-handler-to-each-label_1.vb)]

     > [!IMPORTANT]
     > Используйте элемент управления языка программирования в правом верхнем углу этой страницы, чтобы просмотреть фрагмент кода на C# или Visual Basic.<br><br>![Элемент управления языка программирования для Docs.Microsoft.com](../ide/media/docs-programming-language-control.png)

    > [!NOTE]
    > При копировании и вставке блока кода `label_Click()` вместо его ввода вручную проследите за тем, что заменить существующий код `label_Click()`. В противном случае в коде появится дублирующий блок.

    > [!NOTE]
    > Возможно, вы узнали `object sender` в верхней части обработчика событий; он совпадает с кодом в руководстве по [созданию ограниченной по времени математической головоломки](../ide/tutorial-2-create-a-timed-math-quiz.md). Так как вы подключили разные события Click элемента управления Label к одному методу обработчика событий, один и тот же метод вызывается независимо от того, какой элемент управления Label щелкнет пользователь. Методу обработчика событий необходимо знать, какой элемент управления Label выбрал игрок, поэтому для его определения используется имя `sender`. Первая строка метода сообщает программе, что это не просто универсальный объект, а элемент управления Label, для обращения к свойствам и методам которого используется имя `clickedLabel`.

     Этот метод сначала проверяет, было ли успешно выполнено преобразование (приведение) `clickedLabel` из объекта в элемент управления Label. Если операция завершилась неудачно, его значение будет `null` (C#) или `Nothing` (Visual Basic) и оставшаяся часть кода метода не будет выполнена. Затем метод с помощью свойства **ForeColor** элемента управления Label проверяет цвет текста выбранной метки. Если цвет текста метки черный, это это означает, что значок уже был выбран, а метод выполнен. (Для этого и нужен оператор `return`. Он сообщает программе, что требуется остановить выполнение метода.) В противном случае значок не был выбран, поэтому программа изменяет цвет текста метки на черный.

6. В строке меню выберите **Файл** > **Сохранить все**, чтобы сохранить ход выполнения, а затем в строке меню выберите **Отладка** > **Начать отладку**, чтобы запустить программу. Вы должны увидеть пустую форму с синим фоном. Выберите любую ячейку в форме, и один из значков станет видимым. Продолжайте выбирать различные ячейки формы. Значки будут отображаться при их выборе.

## <a name="to-continue-or-review"></a>Продолжить или повторить пройденный материал

- Следующий раздел руководства: **[Шаг 5. Добавление ссылок на элементы управления Label](../ide/step-5-add-label-references.md)** .

- Предыдущий раздел: [Шаг 3. Назначение каждому элементу управления Label случайного значка](../ide/step-3-assign-a-random-icon-to-each-label.md).
