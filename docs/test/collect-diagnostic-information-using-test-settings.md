---
title: Сбор диагностических данных с помощью параметров тестирования
description: Сведения о том, как с помощью параметров тестирования в Visual Studio собирать дополнительные данные при запуске тестов. Узнайте об адаптерах диагностических данных.
ms.custom: SEO-VS-2020
ms.date: 10/03/2016
ms.topic: how-to
helpviewer_keywords:
- load tests, configuring run settings
ms.assetid: 0c86918b-cd63-4468-8f49-6d547a1276dc
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.openlocfilehash: 564d1598dd4458a902df5cf0ddcae37afbf9c423
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99868157"
---
# <a name="collect-diagnostic-information-using-test-settings"></a>Сбор диагностических данных с помощью параметров тестирования

Для сбора дополнительных данных при выполнении тестов можно использовать *Параметры тестирования* в Visual Studio. Например, может потребоваться сделать видеозапись при выполнении теста. Есть диагностические адаптеры данных для решения следующих задач:

- сбор всех шагов действий пользовательского интерфейса в текстовом формате;

- запись действий пользовательского интерфейса для воспроизведения;

- сбор сведений о системе;

- сбор данных журнала событий;

- сбор данных IntelliTrace для изоляции невоспроизводимых ошибок.

Адаптеры диагностических данных можно также использовать для изменения поведения тестового компьютера. Например, с помощью параметра тестирования в Visual Studio можно моделировать различные узкие места топологии сети для оценки производительности приложения, разрабатываемого командой.

[!INCLUDE [web-load-test-deprecated](includes/web-load-test-deprecated.md)]

## <a name="use-test-settings-with-visual-studio"></a>Использование параметров тестирования с Visual Studio

Для выполнения модульных тестов, закодированных тестов пользовательского интерфейса, веб-тестов производительности или нагрузочных тестов с помощью Visual Studio можно добавлять, настраивать и выбирать параметры тестирования, которые используются при выполнении тестов. Чтобы выполнять тесты, собирать данные или удаленно управлять тестовым компьютером, необходимо задать используемый контроллер тестирования в параметрах тестирования. Контроллер тестирования содержит агенты, которые могут быть использованы для каждой роли в параметрах тестирования.

## <a name="diagnostic-data-adapter-details"></a>Сведения об адаптерах диагностических данных

В следующей таблице представлены общие сведения о различных способах настройки адаптеров диагностических данных для использования с ролями локальных или удаленных компьютеров.

|Адаптер диагностических данных, используемый в параметрах тестирования|Ручные тесты на локальном компьютере|Автоматические тесты|Ручные тесты: сбор данных с помощью набора ролей и среды|Примечания|
|-|-|-|-|-|
|**Прокси клиента ASP.NET для IntelliTrace и влияния на тестирование**. Прокси-сервер позволяет собирать данные об HTTP-обращениях клиента к веб-серверу для адаптеров диагностических данных IntelliTrace и влияния на тесты.|Да|Да|Да|— Используйте это только в том случае, если для клиентской роли выбраны адаптеры диагностических данных влияния на тесты или IntelliTrace.|
|**Профилировщик ASP.NET**. Можно создать параметр тестирования, включающий профилировщик ASP.NET, который собирает данные о производительности веб-приложений ASP.NET.|Нет|Да (см. примечания)|Нет|— Этот адаптер диагностических данных поддерживается только при выполнении нагрузочных тестов в Visual Studio.|
|**Объем протестированного кода**. Можно создать параметр тестирования, включающий сведения о покрытии кода, которые позволяют определить объем протестированного кода.|Нет|Да (см. примечания)|Нет|— Объем протестированного кода можно использовать только при запуске автоматических тестов с помощью Visual Studio или программы *mstest.exe* и только с компьютера, на котором выполняется тест. Удаленный сбор не поддерживается.<br />— Сбор данных покрытия кода не работает, если есть параметры тестирования, настроенные для сбора сведений IntelliTrace. **Примечание.**  Этот адаптер диагностических данных применим только для параметров тестирования Visual Studio. Он не применяется для параметров тестирования в Microsoft Test Manager (не рекомендуется в Visual Studio 2017). Кроме того, этот адаптер предназначен для обеспечения совместимости с тестовыми проектами Visual Studio 2010. **Примечание.**  Для обеспечения совместимости покрытие кода применяется при выполнении автоматических тестов из Microsoft Test Manager или на удаленном агенте тестирования из Visual Studio с использованием устаревшего средства MSTest runner.|
|**Журнал событий**. Можно настроить параметр тестирования для записи журнала событий, который включается в результаты теста.|Да|Да|Да||
|**IntelliTrace**. Адаптер диагностических данных для *IntelliTrace* можно настроить для сбора определенных диагностических данных трассировки с целью изоляции ошибок, которые трудно воспроизвести. При этом записывается файл IntelliTrace, который содержит эту информацию. Расширение файла IntelliTrace — *.iTrace*. При неудачном завершении теста можно создать ошибку. К этой ошибке автоматически привязывается файл IntelliTrace, сохраняемый вместе с результатами теста. Данные, собираемые в файл IntelliTrace, повышают производительность отладки за счет снижения затрат времени на воспроизведение и диагностику ошибок в коде. Используя этот файл IntelliTrace, можно моделировать локальный сеанс на другом компьютере. Это снижает вероятность того, что ошибку нельзя будет воспроизвести.|Да|Да|Да|— Если включен сбор данных IntelliTrace, сбор данных об объеме протестированного кода не работает.<br />— Если IntelliTrace используется для роли веб-клиента, необходимо выбрать прокси-сервер клиента ASP.NET для адаптера диагностических данных IntelliTrace и влияния на тесты.<br />— Поддерживаются только следующие версии: IIS 7.0, IIS 7.5 и IIS 8.0.|
|**Эмуляция сети**. С помощью параметра тестирования можно указать, что требуется выполнить эмуляцию сетевой нагрузки при тестировании. Эмуляция сети влияет на обмен входящими и исходящими данными с компьютером, имитируя определенную скорость сетевого подключения, например коммутируемое подключение. |Нет|Да (см. примечания)|Нет|Адаптер диагностических данных эмуляции сети можно использовать для роли клиента или сервера. Не требуется использовать адаптер для обеих этих ролей, которые обмениваются данные друг с другом. **Примечание.**  Этот адаптер диагностических данных применим только для параметров тестирования Visual Studio. Он не применяется для параметров тестирования в Microsoft Test Manager (не рекомендуется в Visual Studio 2017). **Примечание.**  Эмуляцию сети нельзя использовать для увеличения скорости сетевого подключения. **Предупреждение.**  Если включить адаптер диагностических данных эмуляции сети в параметры тестирования, предполагая использовать его на локальном компьютере, необходимо также привязать драйвер эмуляции сети к одному из сетевых адаптеров компьютера. Драйвер эмуляции сети необходим для работы адаптера диагностических данных эмуляции сети. Драйвер эмуляции сети устанавливается и привязывается к адаптеру двумя способами: <ul><li>**Драйвер эмуляции сети, установленный с агентом тестирования Microsoft Visual Studio** Агент тестирования Visual Studio можно использовать на удаленных компьютерах и на локальном компьютере. Процесс установки Visual Studio Test Agent включает этап настройки, в ходе которого драйвер эмуляции сети привязывается к сетевой карте. Дополнительные сведения см. в статье [Установка и настройка агентов тестирования](../test/lab-management/install-configure-test-agents.md).</li><li>**Драйвер эмуляции сети, установленный с агентом тестирования Microsoft Visual Studio Test Professional** При первом использовании эмуляции сети вам будет предложено привязать драйвер эмуляции сети к сетевой карте.</li></ul> Также можно установить драйвер эмуляции сети из командной строки на локальном компьютере без установки Visual Studio Test Agent с помощью следующей команды: **VSTestConfig NETWORKEMULATION /install** **Предупреждение.**  Адаптер эмуляции сети не учитывается в нагрузочных тестах. Вместо него в нагрузочных тестах используются параметры, указанные в смешанном сетевом профиле сценария тестовой нагрузки.|
|**Сведения о системе**. В параметрах тестирования можно задать учет сведений о системе компьютера, на котором выполняется тест.|Да|Да|Да||
|**Влияние на тесты**. Можно собирать сведения о том, какие методы кода приложений использовались при выполнении тестового случая. Эти данные можно использовать вместе с данными об изменениях кода приложения, внесенных разработчиками, чтобы определить, на какие тесты влияют эти изменения.|Да|Да|Да|— Если выполняется сбор данных влияния на тесты для роли веб-приложения, необходимо выбрать прокси-сервер клиента ASP.NET для адаптера диагностических данных влияния на тесты и IntelliTrace.<br />— Поддерживаются только следующие версии: IIS 7.0, IIS 7.5 и IIS 8.0.|
|**Запись видео**. При выполнении теста можно создать видеозапись рабочего стола. Видео может помочь другим членам команды определить проблемы с приложением, которые трудно воспроизвести.|Да|Да (см. примечания)|Да|Если программное обеспечение агента тестирования включено для выполнения в качестве процесса, а не службы, то при запуске автоматических тестов можно создать видеозапись.|
