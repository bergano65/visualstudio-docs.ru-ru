---
title: Создание теста веб-службы в Visual Studio
ms.date: 10/19/2016
ms.topic: conceptual
helpviewer_keywords:
- Web performance tests, creating Web service tests
- Web services [Visual Studio ALM], creating
- service tests, Web
ms.assetid: fbcd57ee-06ad-4260-8694-09f8e0f93e39
author: gewarren
ms.author: gewarren
manager: douge
ms.prod: visual-studio-dev15
ms.technology: vs-ide-test
ms.openlocfilehash: 85759cc5f9297ba2bb0706352d788ba619a8021c
ms.sourcegitcommit: 495bba1d8029646653f99ad20df2f80faad8d58b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/31/2018
ms.locfileid: "39380672"
---
# <a name="how-to-create-a-web-service-test"></a>Практическое руководство. Создание теста веб-службы

Для проверки веб-служб можно использовать веб-тесты производительности. С помощью параметров **Вставить запрос** и **Вставить запрос веб-службы** можно настроить отдельные запросы в **редакторе веб-тестов производительности**, чтобы найти страницы веб-службы. Обычно эти страницы не отображаются в веб-приложениях. Поэтому для получения доступа к этим страницам нужно настроить запрос.

В следующей процедуре используется веб-служба, содержащаяся в наборе Commerce Starter Kit. Скачать его можно здесь: [ASP.NET Commerce Starter Kit](http://go.microsoft.com/fwlink/?LinkId=181469).

 **Требования**

-   Visual Studio Enterprise

## <a name="to-test-a-web-service"></a>Тестирование веб-службы

1.  Создайте веб-тест производительности. Как только браузер откроется, нажмите кнопку **Стоп**.

2.  В **редакторе веб-тестов производительности** щелкните правой кнопкой мыши веб-тест производительности и выберите **Добавить запрос веб-службы**.

3.  В свойстве **URL-адрес** нового запроса введите имя веб-службы, например **http://localhost/storecsvs/InstantOrder.asmx**.

4.  Откройте отдельный сеанс браузера и введите URL-адрес страницы *.asmx* в панели инструментов **Адрес**. Выберите метод, который нужно протестировать, и прочтите сообщение SOAP. Оно содержит `SOAPAction`.

5.  В **редакторе веб-тестов производительности** щелкните запрос правой кнопкой мыши и выберите команду **Добавить заголовок**. В поле **Имя** введите `SOAPAction`. В поле **Значение** введите значение, которое отображается в `SOAPAction`, например `"http://tempuri.org/CheckStatus"`.

6.  Разверните узел URL в редакторе, выберите узел **Текст строки** и для свойства **Тип содержимого** введите значение `text/xml`.

7.  Вернитесь в браузере к шагу 4, выберите XML-часть запроса SOAP на странице описания веб-службы и скопируйте ее в буфер обмена.

8.  XML-содержимое будет выглядеть примерно так:

     ```xml
     <?xml version="1.0" encoding="utf-8"?>
     <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
     <soap:Body>
       <CheckStatus xmlns="http://tempuri.org/">
         <userName>string</userName>
         <password>string</password>
         <orderID>int</orderID>
       </CheckStatus>
     </soap:Body>
     </soap:Envelope>
     ```

9. Вернитесь в **Редактор веб-тестов производительности** и нажмите кнопку с многоточием **(…)** в свойстве **Текст строки**. Вставьте содержимое буфера обмена в свойство.

10. Для успешного выполнения теста нужно заменить все подстановочные значения в XML на действительные. В предыдущем примере нужно заменить два экземпляра `string` и один `int`. Работа этой веб-службы будет завершена, только при наличии зарегистрированного пользователя, разместившего заказ.

11. Щелкните веб-службу правой кнопкой мыши и выберите команду **Добавить параметр URL QueryString**.

12. Присвойте параметру строки запроса имя и значение. В предыдущем примере имя равно `op`, а значение — `CheckStatus`. Таким образом определяется выполняемая операция веб-службы.

    > [!NOTE]
    > В тексте SOAP можно использовать привязку данных для замены всех подстановочных значений данными с помощью синтаксиса `{{DataSourceName.TableName.ColumnName}}`.

13. Запустите тест. В верхней области **средства просмотра результатов веб-тестов производительности** выберите запрос веб-службы. В нижней части окна перейдите на вкладку "Браузер". Будет показан XML-код, возвращенный веб-службой, и результаты всех операций.

## <a name="see-also"></a>См. также

- [Создание пользовательского кода и подключаемых модулей для нагрузочных тестов](../test/create-custom-code-and-plug-ins-for-load-tests.md)