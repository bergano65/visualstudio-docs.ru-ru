---
title: Практическое руководство. Создание теста веб-службы в Visual Studio | Документы Майкрософт
ms.date: 10/19/2016
ms.topic: article
helpviewer_keywords:
- Web performance tests, creating Web service tests
- Web services [Visual Studio ALM], creating
- service tests, Web
ms.assetid: fbcd57ee-06ad-4260-8694-09f8e0f93e39
author: gewarren
ms.author: gewarren
manager: ghogen
ms.technology: vs-ide-test
ms.openlocfilehash: b7d7a864b7fc62527bdd2593523ccdc91bf913aa
ms.sourcegitcommit: 900ed1e299cd5bba56249cef8f5cf3981b10cb1c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2018
---
# <a name="how-to-create-a-web-service-test"></a>Практическое руководство. Создание теста веб-службы.

Для проверки веб-служб можно использовать веб-тесты производительности. С помощью параметров **Вставить запрос** и **Вставить запрос веб-службы** можно настроить отдельные запросы в **редакторе веб-тестов производительности**, чтобы найти страницы веб-службы. Обычно эти страницы не отображаются в веб-приложениях. Поэтому для получения доступа к этим страницам нужно настроить запрос.

В следующей процедуре используется веб-служба, содержащаяся в наборе Commerce Starter Kit. Ее можно загрузить на странице [ASP.NET Commerce Starter Kit](http://go.microsoft.com/fwlink/?LinkId=181469).

 **Требования**

-   Visual Studio Enterprise

## <a name="to-test-a-web-service"></a>Тестирование веб-службы

1.  Создайте новый веб-тест производительности. Как только браузер откроется, нажмите кнопку **Стоп**.

2.  В **редакторе веб-тестов производительности** щелкните правой кнопкой мыши веб-тест производительности и выберите команду **Добавить запрос веб-службы**.

3.  В свойстве **URL-адрес** нового запроса введите имя веб-службы, например **http://localhost/storecsvs/InstantOrder.asmx**.

4.  Откройте отдельный сеанс браузера и введите URL-адрес ASMX-страницы на панели инструментов **Адрес**. Выберите метод, который нужно протестировать, и прочтите сообщение SOAP. Оно содержит `SOAPAction`.

5.  В **редакторе веб-тестов производительности** щелкните запрос правой кнопкой мыши и выберите команду **Добавить заголовок**. В поле **Имя** введите `SOAPAction`. В поле **Значение** введите значение, которое отображается в `SOAPAction`, например `"http://tempuri.org/CheckStatus"`.

6.  Разверните узел URL в редакторе, выберите узел **Текст строки** и для свойства **Тип содержимого** введите значение `text/xml`.

7.  Вернитесь в браузере к шагу 4, выберите XML-часть запроса SOAP на странице описания веб-службы и скопируйте ее в буфер обмена.

8.  XML-содержимое будет выглядеть примерно так:

     ```xml
     <?xml version="1.0" encoding="utf-8"?>
     <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
     <soap:Body>
       <CheckStatus xmlns="http://tempuri.org/">
         <userName>string</userName>
         <password>string</password>
         <orderID>int</orderID>
       </CheckStatus>
     </soap:Body>
     </soap:Envelope>
     ```

9. Вернитесь в **Редактор веб-тестов производительности** и нажмите кнопку с многоточием (…) в свойстве **Текст строки**. Вставьте содержимое буфера обмена в свойство.

10. Для успешного выполнения теста нужно заменить все подстановочные значения в XML на действительные. В предыдущем примере нужно заменить два экземпляра `string` и один `int`. Работа этой веб-службы будет завершена только в том случае, если будет существовать зарегистрированный пользователь, разместивший заказ.

11. Щелкните веб-службу правой кнопкой мыши и выберите команду **Добавить параметр URL QueryString**.

12. Присвойте параметру строки запроса имя и значение. В предыдущем примере имя равно `op`, а значение — `CheckStatus`. Таким образом определяется выполняемая операция веб-службы.

    > [!NOTE]
    > В тексте SOAP можно использовать привязку данных для замены всех подстановочных значений данными с помощью синтаксиса `{{DataSourceName.TableName.ColumnName}}`.

13. Запустите тест. В верхней области окна просмотра результатов веб-тестов производительности выберите запрос веб-службы. В нижней части окна перейдите на вкладку "браузер". Будет показан XML-код, возвращенный веб-службой, и результаты всех операций.

## <a name="see-also"></a>См. также

- [Создание пользовательского кода и подключаемых модулей для нагрузочных тестов](../test/create-custom-code-and-plug-ins-for-load-tests.md)