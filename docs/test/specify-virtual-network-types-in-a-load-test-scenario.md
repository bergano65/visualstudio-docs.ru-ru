---
title: Определение типов виртуальных сетей (нагрузочное тестирование)
description: Узнайте, как использовать смешанный сетевой профиль, чтобы взаимодействие пользователей с приложениями практически не отличалось от реального.
ms.custom: SEO-VS-2020
ms.date: 10/19/2016
ms.topic: how-to
helpviewer_keywords:
- load tests, scenarios
- load tests, adding networks
- load tests, removing networks
- load tests, virtual networks
- network mix
ms.assetid: 3c4f7874-081a-4ec4-9510-4d6d7d863a11
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.openlocfilehash: 7783c8f90f1e289f8e13ed2bd85e8263edec3408
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99894560"
---
# <a name="specify-virtual-network-types-in-a-load-test-scenario"></a>Определение типов виртуальных сетей в сценарии нагрузочного теста

*Смешанный сетевой профиль* представляет собой способ более реалистичного моделирования нагрузки в сценарии нагрузочного теста. Нагрузка создается с помощью сочетания разнородных сетевых типов вместо одного единого сетевого типа. При этом взаимодействие пользователей с приложениями практически не отличается от реального.

Смешанный сетевой профиль указывает вероятность, с которой виртуальный пользователь работает с заданным *сетевым профилем*. Сетевой профиль моделирует пропускную способность сети на уровне приложения. Он не моделирует задержки.

При создании нагрузочного теста может потребоваться смоделировать нагрузку, создаваемую сетевыми подключениями нескольких типов. Смешанный сетевой профиль предлагает несколько типов сетей. Моделируются различные сети. При выборе параметра, например `Cable-DSL 1.5Mbps`, время ожидания вводится в тест для моделирования выбранной пропускной способности.

Смешанный сетевой профиль работает так же, как и другие параметры набора. Тип сети выбирается случайным образом, связанным с виртуальным пользователем, на основе данного профиля. Тесты выполняются с использованием определенного типа сети на основе вероятности, указанной в смешанном сетевом профиле.

После указания смешанного сетевого профиля можно добавлять или удалять типы сетей. Распределение смешанного сетевого профиля изменяется с помощью элемента управления тестовым набором.

Элемент управления набором тестов позволяет легко изменять распределение сетей в сценарии.

Дополнительные сведения см. в разделе [Элемент управления тестовым набором](../test/specify-virtual-network-types-in-a-load-test-scenario.md).

[!INCLUDE [web-load-test-deprecated](includes/web-load-test-deprecated.md)]

## <a name="true-network-emulation"></a>Точная эмуляция сети

Visual Studio использует программную точную эмуляцию сети для всех типов тестов, включая нагрузочные. Точная эмуляция сети имитирует состояние сети путем непосредственного управления сетевыми пакетами. Точный эмулятор сети может эмулировать поведение как проводных, так и беспроводных сетей с использованием надежного физического канала, например Ethernet. В точной эмуляции сети реализованы следующие атрибуты сети.

- Время на передачу и подтверждение приема в сети (задержка)

- Значение доступной пропускной способности

- Поведение очереди

- Потеря пакетов

- Изменение порядка следования пакетов

- Распространение ошибки.

Точная эмуляция сети также обеспечивает гибкость при фильтрации сетевых пакетов на основе IP-адресов или протоколов, таких как TCP, UDP и ICMP.

Точная эмуляция сети может использоваться разработчиками и тест-инженерами сетевых приложений для эмуляции различных тестовых сред, оценки производительности, прогноза влияния изменений или принятия решений об оптимизации технологии. По сравнению с аппаратными тестовыми стендами точная эмуляция сети является намного более дешевым и гибким решением.

## <a name="to-add-new-networks-to-a-scenario"></a>Добавление новых сетей в сценарий

1. Во время определения набора сетей для сценария нажмите кнопку **Добавить**.

     В сетку будет добавлена запись новой сети.

    > [!NOTE]
    > Чтобы открыть диалоговое окно **Изменение смешанного сетевого профиля**, щелкните существующий сценарий правой кнопкой мыши, а затем в контекстном меню выберите команду **Изменить смешанный сетевой профиль**.

2. В столбце **Тип сети** выберите стрелку новой записи. Выберите нужный тип сети.

3. (Необязательно) Настройте элемент управления набором, чтобы задать распределение тестов. Дополнительные сведения см. в разделе [Элемент управления тестовым набором](../test/specify-virtual-network-types-in-a-load-test-scenario.md).

4. По завершении добавления сетей нажмите кнопку **ОК**.

## <a name="to-remove-networks-from-a-scenario"></a>Удаление сетей из сценария

1. Откройте нагрузочный тест.

2. Щелкните правой кнопкой мыши сценарий, из которого нужно удалить сеть, и в контекстном меню выберите команду **Изменить смешанный сетевой профиль**. Откроется диалоговое окно **Изменение смешанного сетевого профиля**.

3. Выберите сеть и щелкните **Удалить**.

4. (Необязательно) Настройте элемент управления набором, чтобы задать распределение тестов. Дополнительные сведения см. в разделе [Элемент управления тестовым набором](../test/specify-virtual-network-types-in-a-load-test-scenario.md).

5. По завершении удаления сетей нажмите кнопку **ОК**.

## <a name="about-the-mix-control"></a>Элемент управления тестовым набором

Элемент управления набором позволяет изменять процентное распределение нагрузки между тестами, типами браузеров или типами сетей в сценарии нагрузочного теста. Процентные доли изменяются с помощью ползунков. Изменение набора типов сетей определяет вероятность, с которой виртуальный пользователь работает с заданным типом сети в сценарии нагрузочного теста.

При перемещении ползунка изменяется процентное значение всех имеющихся элементов. При наличии более двух элементов добавленное или уменьшенное значение распределяется равномерно между другими элементами. Такое поведение можно переопределить. При установке флажка для определенного элемента в столбце блокировки процентное значение для данного элемента фиксируется. В дальнейшем при перемещении ползунка добавленное или уменьшенное значение будет распределяться только между оставшимися незаблокированными элементами.

Кнопка **Распределить** используется для равномерного распределения процентных значений между всеми элементами. Например, при наличии трех элементов нажатие кнопки **Распределить** приведет к присвоению им процентных значений, равных 34, 33 и 33.

> [!WARNING]
> При нажатии кнопки **Распределить** значения заблокированных элементов переопределяются.

Вместо использования ползунков можно также ввести процентные значения непосредственно в столбец **%** . При непосредственном вводе процентных значений значения других элементов не изменяются автоматически.

> [!NOTE]
> Ползунки становятся недоступны, если суммарное значение не равно 100 % или в столбец **%** введены десятичные дроби.

При вводе процентных значений вручную необходимо следить за тем, чтобы суммарное значение равнялось 100 %. Если суммарное значение не равно 100 %, при сохранении набора будет предложено принять текущие значения или вернуться и изменить их. Если принять текущие занятия, они будут пропорционально изменены до 100%.  Например, если два элемента имеют значения 80% и 40%, то значение первого элемента изменится на 66,67% (80, деленное на 120), а второго — на 33,33% (40, деленное на 120).
