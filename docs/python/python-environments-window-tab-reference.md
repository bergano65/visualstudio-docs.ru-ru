---
title: Справочная информация по окну "Окружения Python"
description: Сведения о вкладках, которые отображаются в окне "Окружения Python" в Visual Studio.
ms.date: 03/18/2019
ms.topic: reference
author: JoshuaPartlow
ms.author: joshuapa
manager: jmartens
ms.custom: seodec18
ms.workload:
- python
- data-science
ms.openlocfilehash: d00f8cc05e4a2a2ce1e947207997cc2e46d9d9f9
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99912374"
---
# <a name="python-environments-window-tabs-reference"></a>Справочная информация по вкладкам окна "Окружения Python"

Чтобы открыть окно **Окружения Python**, сделайте следующее:

- Выберите команду меню **Просмотр** > **Другие окна** > **Окружения Python**.
- В **обозревателе решений** щелкните правой кнопкой мыши узел **Окружения Python** в нужном проекте и выберите **Просмотреть все окружения Python**.

Если окно **Окружения Python** развернуть достаточно широко, эти параметры отобразятся в виде вкладок. Такой вариант может оказаться для вас более удобным. Для ясности вкладки в этой статье показаны в развернутом представлении.

::: moniker range="vs-2017"
![Развернутое окно Python Environments (Среды Python)](media/environments/environments-expanded-view.png)
::: moniker-end
::: moniker range=">=vs-2019"
![Развернутое окно Python Environments (Среды Python)](media/environments/environments-expanded-view-2019.png)
::: moniker-end

## <a name="overview-tab"></a>Вкладка "Обзор"

Содержит основные сведения и команды для окружения:

::: moniker range="vs-2017"
![Вкладка обзора сред Python](media/environments/environments-overview-tab.png)
::: moniker-end
::: moniker range=">=vs-2019"
![Вкладка обзора сред Python](media/environments/environments-overview-tab-2019.png)
::: moniker-end

| Команда | Описание |
| --- | --- |
| **По умолчанию использовать это окружение для новых проектов** | Задает активное окружение, при загрузке базы данных IntelliSense в котором система Visual Studio (2017 версия 15.5 и более ранние) может ненадолго перестать отвечать. Среды с множеством пакетов могут не отвечать дольше. |
| **Посетить веб-сайт распространителя** | Открывает в браузере URL-адрес, указанный в дистрибутиве Python. Например, для Python 3.x открывается сайт python.org. |
| **Открыть интерактивное окно** | Открывает [интерактивное окно (REPL)](python-interactive-repl-in-visual-studio.md) для этого окружения в Visual Studio, применяя все [скрипты запуска (см. ниже)](#startup-scripts). |
| **Просмотреть интерактивные скрипты** | См. раздел о [скриптах запуска](#startup-scripts). |
| **Использовать интерактивный режим IPython** | Если этот параметр задан, по умолчанию открывается **интерактивное** окно с IPython. Это позволяет использовать встроенные графики и расширенный синтаксис IPython, например `name?`, для просмотра справки и `!command` для команд оболочки. Этот параметр рекомендуется использовать при работе с дистрибутивом Anaconda, так как ему требуются дополнительные пакеты. Дополнительные сведения см. в статье [Использование IPython в интерактивном окне](interactive-repl-ipython.md). |
| **Открыть в PowerShell** | Запускает интерпретатор в окне команд PowerShell. |
| (Ссылки на программы и папки) | Предоставляет быстрый доступ к папке установки окружения, интерпретатору *python.exe* и интерпретатору *pythonw.exe*. Папка открывается в проводнике, а интерпретаторы — в окне консоли. |

### <a name="startup-scripts"></a>Скрипты запуска

Используя интерактивные окна в повседневной работе, удобно разработать вспомогательные функции для регулярного применения. Например, вы можете создать функцию, которая открывает кадр данных в Excel, и сохранить этот код как скрипт запуска, чтобы он всегда был доступен в **интерактивном** окне.

Скрипты запуска содержат код, автоматически загружаемый и запускаемый **интерактивным** окном, включая операции импорта, определения функций и пр. Ссылки на такие скрипты выполняются двумя способами:

1. При установке окружения Visual Studio создает папку *Documents\Visual Studio \<version>\Python Scripts\\\<environment>* , где &lt;version&gt; — это версия Visual Studio (например, 2017 или 2019), а &lt;environment&gt; соответствует имени окружения. Вы легко можете перейти в папку окружения с помощью команды **Просмотреть интерактивные сценарии**. При запуске **интерактивного** окна для этого окружения оно загружает и выполняет все найденные файлы *.py* в алфавитном порядке.

1. Элемент управления **Скрипты** на вкладке **Инструменты** > **Параметры** > **Python** > **Интерактивные окна** (см. раздел [Параметры интерактивных окон](python-support-options-and-settings-in-visual-studio.md#interactive-windows-options)) позволяет указать дополнительную папку для скриптов запуска, которые загружаются и выполняются во всех окружениях. Однако сейчас эта функция не работает.

## <a name="configure-tab"></a>Вкладка "Настройка"

На вкладке **Настройка** (если она доступна) содержатся параметры, описанные в таблице ниже. Если этой вкладки нет в списке, это значит, Visual Studio автоматически управляет всеми сведениями.

::: moniker range="vs-2017"
![Вкладка настройки сред Python](media/environments/environments-configure-tab.png)
::: moniker-end
::: moniker range=">=vs-2019"
![Вкладка настройки сред Python](media/environments/environments-configure-tab-2019.png)
::: moniker-end

| Поле | Описание |
| --- | --- |
| **Описание** | Имя среды. |
| **Prefix path** (Префикс пути) | Расположение базовой папки интерпретатора. Если заполнить это значение и щелкнуть **Автовыбор**, Visual Studio пытается заполнить другие поля автоматически. |
| **Interpreter path** (Путь к интерпретатору) | Это путь к исполняемому файлу интерпретатора, который обычно состоит из префикса пути и имени **python.exe**. |
| **Windowed interpreter** (Оконный интерпретатор) | Это путь к неконсольному исполняемому файлу, который обычно состоит из префикса пути и имени **pythonw.exe**. |
| **Library path** (Путь к библиотеке)<br/>(если доступно) | Корень стандартной библиотеки, но это значение может игнорироваться, если Visual Studio может запросить более точный путь через интерпретатор. |
| **Версия языка** | Выбирается в раскрывающемся меню. |
| **Архитектура** | Обычно архитектура обнаруживается и заполняется автоматически. В противном случае здесь можно указать **32-bit** или **64-bit**. |
| **Path environment variable** (Переменная среды пути) | Переменная среды, которую интерпретатор использует, чтобы найти пути поиска. Visual Studio изменяет значение переменной при запуске Python, чтобы он содержал пути поиска проекта. Обычно для этого свойства должно быть присвоено значение **PYTHONPATH**, но некоторые интерпретаторы используют другое значение. |

## <a name="packages-tab"></a>Вкладка "Пакеты"

*В более ранних версиях называлась pip.*

Позволяет управлять пакетами, установленными в окружении, с помощью инструмента pip (вкладка **Пакеты (PyPI)** ) или conda (вкладка **Пакеты (Conda)** , для окружений conda в Visual Studio 2017 15.7 и более поздних версиях). На этой вкладке вы также можете выполнить поиск новых пакетов (с их зависимостями) и установить их.

Уже установленные пакеты отображаются с элементами управления, с помощью которых пакет можно обновить (стрелка вверх) или удалить (X в кружке):

![Вкладка "Пакеты" окна "Окружения Python"](media/environments/environments-pip-tab-controls.png)

При вводе условия поиска фильтруется список установленных пакетов, а также пакеты, которые можно установить из PyPI.

::: moniker range="vs-2017"
![Вкладка "Пакеты" окна "Окружения Python" с поиском по "num"](media/environments/environments-pip-tab.png)
::: moniker-end
::: moniker range=">=vs-2019"
![Вкладка "Пакеты" окна "Окружения Python" с поиском по "num"](media/environments/environments-pip-tab-2019.png)
::: moniker-end

Как видно на рисунке выше, результаты поиска показывают число пакетов, которые соответствуют поисковому запросу. Но первая запись в списке содержит команду для запуска **pip install \<name>** напрямую. На вкладке **Пакеты (Conda)** вместо этого отображается **conda install \<name>** :

::: moniker range="vs-2017"
![Вкладка пакетов Conda с командой conda install](media/environments/environments-conda-tab-install.png)
::: moniker-end
::: moniker range=">=vs-2019"
![Вкладка пакетов Conda с командой conda install](media/environments/environments-conda-tab-install-2019.png)
::: moniker-end

В обоих случаях можно настроить установку, добавляя аргументы в поле поиска после имени пакета. Если вы указали аргументы, в результатах поиска отображается команда **pip install** или **conda install**, после которой идет содержимое поля поиска:

::: moniker range="vs-2017"
![Использование аргументов в командах pip и conda install](media/environments/environments-pip-tab-arguments.png)
::: moniker-end
::: moniker range=">=vs-2019"
![Использование аргументов в командах pip и conda install](media/environments/environments-pip-tab-arguments-2019.png)
::: moniker-end

При установке пакета создаются вложенные папки в папке *Lib* соответствующего окружения в рамках файловой системы. Например, если в системе есть Python 3.6 с установкой в папке *c:\Python36*, пакеты устанавливаются в *c:\Python36\Lib*; Если есть anaconda3, установленный в папке *c:\Program Files\Anaconda3*, пакеты устанавливаются в *c:\Program Files\Anaconda3\Lib*. В окружениях conda пакеты устанавливаются в папке самого окружения.

### <a name="grant-administrator-privileges-for-package-install"></a>Предоставление прав администратора для установки пакета

При установке пакета в окружение, которое находится в защищенной области файловой системы, например *c:\Program Files\Anaconda3\Lib*, Visual Studio требуется запустить `pip install` с повышенными привилегиями, чтобы разрешить создание вложенных папок для пакетов. Когда требуется повышение прав, Visual Studio отображает запрос **Для установки, обновления или удаления пакетов для этого окружения могут потребоваться права администратора**:

![Запрос на повышение прав для установки пакетов](media/environments/environments-pip-elevate.png)

Параметр **Повысить уровень прав** предоставляет pip права администратора для отдельной операции, что также распространяется на все запросы разрешений в операционной системе. Выбор варианта **Продолжить без прав администратора** приводит к попытке установить пакет, но выполнение pip завершится сбоем при попытке создать папки с выходными данными, возвращая такое сообщение: **ошибка: не удалось создать 'C:\Program Files\Anaconda3\Lib\site-packages\png.py': в разрешении отказано.**

Значение **Всегда повышать уровень прав при установке и удалении пакетов** отключает отображение данного диалогового окна для соответствующего окружения. Чтобы снова включить отображение диалогового окна, откройте вкладку **Инструменты** > **Параметры** > **Python** > **Общие** и нажмите кнопку **Сбросить все окончательно скрытые диалоговые окна**.

На этой же вкладке **Параметры** можно выбрать **Всегда выполнять pip от имени администратора**, чтобы отключить это диалоговое окно для всех окружений. См. раздел [Параметры вкладки "Общие"](python-support-options-and-settings-in-visual-studio.md#general-options).

### <a name="security-restrictions-with-older-versions-of-python"></a>Ограничения безопасности с более ранними версиями Python

При использовании Python 2.6, 3.1 и 3.2 Visual Studio выводит предупреждение: **В связи с ограничениями безопасности установка из Интернета может не работать в этой версии Python**:

![Сообщение об ограничениях pip install в предыдущих версиях Python](media/environments/environments-old-version-restriction.png)

Предупреждение возникает потому, что в предыдущих версиях Python `pip install` не поддерживает протокол TLS 1.2, который требуется для загрузки пакетов из источника пакетов, pypi.org. Пользовательские сборки Python могут поддерживать TLS 1.2, и в этом случае `pip install` может сработать.

Возможно, соответствующий *get-pip.py* для пакета удастся скачать через [bootstrap.pypa.io](https://bootstrap.pypa.io/), затем вручную скачать пакет с сайта [pypi.org](https://pypi.org/) и установить его из этой локальной копии.

Однако рекомендуется просто выполнить обновление до Python 2.7 или 3.3+. В этом случае предупреждение не будет появляться.

::: moniker range="vs-2017"
## <a name="intellisense-tab"></a>Вкладка IntelliSense

На этой вкладке отображается текущее состояние выполнения IntelliSense для базы данных.

![Вкладка IntelliSense сред Python](media/environments/environments-intellisense-tab.png)

- В Visual Studio 2017 версии 15.5 и более ранних варианты завершения IntelliSense зависят от базы данных, которая компилируется для этой библиотеки. Создание осуществляется в фоновом режиме при установке библиотеки, но оно может занять некоторое время и не завершиться, если вы начнете вводить код.
- В Visual Studio 2017 версии 15.6 и более поздних используется более быстрый способ вывода вариантов завершения, которые не зависят от базы данных по умолчанию. Поэтому вкладка помечена как **IntelliSense [база данных отключена]** . Вы можете включить базу данных, сняв флажок **Средства** > **Параметры** > **Python** >  **Экспериментально** > **Использовать новый стиль IntelliSense для сред**.

Когда Visual Studio обнаруживает (или когда вы добавляете) новую среду, автоматически запускается компиляция базы данных путем анализа исходных файлов библиотеки. Этот процесс может занять от минуты до часа и более в зависимости от установленных компонентов. (Anaconda, например, содержит множество библиотек, поэтому компиляция базы данных занимает некоторое время.) После завершения вы получите подробности IntelliSense, и вам не придется снова обновлять базу данных (с помощью кнопки **Обновить базу данных**) до установки дополнительных библиотек.

Библиотеки, для которых еще не были скомпилированы данные, помечаются знаком **!** . Если база данных среды еще не скомпилирована, рядом с ней также отображается знак **!** в основном списке среды.

::: moniker-end

## <a name="see-also"></a>См. также

- [Управление окружениями Python в Visual Studio](managing-python-environments-in-visual-studio.md)
- [Выбор интерпретатора для проекта](selecting-a-python-environment-for-a-project.md)
- [Использование файла requirements.txt для зависимостей](managing-required-packages-with-requirements-txt.md)
- [Пути поиска](search-paths.md)
