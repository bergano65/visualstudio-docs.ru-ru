---
title: Настройка и расширение доменного языка
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- Domain-Specific Language Tools, creating solutions
author: gewarren
ms.author: gewarren
manager: douge
ms.workload:
- multiple
ms.prod: visual-studio-dev15
ms.openlocfilehash: 165798341f08afd3b55e8f6b8092457f022a0634
ms.sourcegitcommit: 37fb7075b0a65d2add3b137a5230767aa3266c74
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/02/2019
ms.locfileid: "53960041"
---
# <a name="customizing-and-extending-a-domain-specific-language"></a>Настройка и расширение доменного языка
Visual Studio, моделирования и пакет SDK для визуализации (VMSDK) предоставляет несколько уровней, по которым можно определить средств моделирования:

1.  Определение доменного языка (DSL), с помощью схемы определения DSL. Можно быстро создать DSL со схематическим представлением, читаемой формой XML и основными инструментами, необходимыми для генерирования кода и других артефактов.

     Дополнительные сведения см. в разделе [способ определения доменного языка](../modeling/how-to-define-a-domain-specific-language.md).

2.  Точная настройка DSL с помощью дополнительных функций определения DSL. Например можно создавать дополнительные ссылки отображаются, когда пользователь создает элемент. Эти методы главным образом достигаются в определении DSL, а некоторые требуют несколько строк программного кода.

3.  Расширение инструментов моделирования с помощью программного кода. VMSDK разработан специально для того, чтобы облегчить интеграцию расширений с кодом, который генерируется из определения DSL.  Дополнительные сведения см. в разделе [написание кода для настройки доменного языка](../modeling/writing-code-to-customise-a-domain-specific-language.md).

> [!NOTE]
>  Если вы обновили файл определения DSL, не забудьте нажать **преобразовать все шаблоны** на панели инструментов в обозревателе решений перед повторным построением решения.

## <a name="customShapes"></a> В этом разделе

|Для достижения такого эффекта|Обратитесь к этой статье|
|-|-|
|Разрешить пользователю задать цвет и стиль свойства фигуры.|Щелкните правой кнопкой мыши класс фигуры или соединителя, выберите пункт **добавить предоставленный**и щелкните элемент.<br /><br /> См. в разделе [Настройка представления схемы](../modeling/customizing-presentation-on-the-diagram.md).|
|Различные классы элемента модели похожи на схеме, совместное использование свойства, такие как исходную высоту и ширину, цвет, всплывающие подсказки.|Используйте наследование между фигуры или соединителя классов. Сопоставления между производных фигур и производных классов доменов наследуют параметры сопоставления родительских элементов.<br /><br /> Или сопоставления классов другой домен с одним классом фигуры.|
|Класс элемента модели отображается контекстами различных фигур.|Сопоставьте более одного класса фигуры в один и тот же класс домена. При построении решения следуйте отчет об ошибке и укажите запрошенный код, чтобы решить, какую форму для использования.|
|Цвет фигуры или другие функции, такие как шрифт показывают текущее состояние.|См. в разделе [обновление фигур и соединителей в соответствии с моделью](../modeling/updating-shapes-and-connectors-to-reflect-the-model.md).<br /><br /> Создаете правило, которое обновляет этим свойствам. См. в разделе [правила распространяют изменения в пределах модели](../modeling/rules-propagate-changes-within-the-model.md).<br /><br /> Также можно использовать для обновления критически важных функций, таких как стрелки ссылку или шрифта OnAssociatedPropertyChanged().|
|Значок на изменения фигуры для указания состояния.|Настроить видимость декоратора сопоставления в окне сведения о DSL. Найдите несколько декораторов образа в той же позиции. См. в разделе [обновление фигур и соединителей в соответствии с моделью](../modeling/updating-shapes-and-connectors-to-reflect-the-model.md).<br /><br /> Или в Переопределите `ImageField.GetDisplayImage()`. Пример см. в <xref:Microsoft.VisualStudio.Modeling.Diagrams.ImageField>.|
|Задание фонового изображения на любой фигуры|Переопределите InitializeInstanceResources() Добавление привязанного ImageField. См. в разделе [Настройка представления схемы](../modeling/customizing-presentation-on-the-diagram.md).|
|Вложенные фигуры на любую глубину|Настройка рекурсивного дерева внедрения. Определите BoundsRules должен содержать фигуры. См. в разделе [Настройка представления схемы](../modeling/customizing-presentation-on-the-diagram.md).|
|Присоедините соединители в основных точек на границе элемента.|Определите внедренных терминалов элементов, представленного небольшой порты на схеме. Используйте BoundsRules исправить порты на месте. Ознакомьтесь с примером Принципиальная схема в [Visualization and Modeling SDK](http://go.microsoft.com/fwlink/?LinkID=186128).|
|Текстовое поле отображает значение, полученное от других значений.|Сопоставьте текстовый декоратор Calculated и хранения пользовательского свойства домена. Дополнительные сведения см. в разделе [вычисляемые и пользовательские свойства хранилища](../modeling/calculated-and-custom-storage-properties.md).|
|Распространение изменений между элементами модели, или между фигурами|См. в разделе [проверка в доменных языках](../modeling/validation-in-a-domain-specific-language.md).|
|Распространение изменений в ресурсы, такие как другими расширениями Visual Studio за пределами хранилища.|См. в разделе [обработчики событий распространяют изменения за пределы модели](../modeling/event-handlers-propagate-changes-outside-the-model.md).|
|Окно свойств отображаются свойства связанного элемента.|Настройка пересылки свойство. См. в разделе [Настройка окна свойств](../modeling/customizing-the-properties-window.md).|
|Категории свойств|Окно свойств содержит разделы, которые называются категориями. Задайте **категории** свойств домена. Свойства с тем же именем категории будут отображаться в одном разделе. Можно также задать **категории** роли связи.|
|Доступ пользователя к свойств домена|Задайте **возможность просмотра** значение false, чтобы предотвратить появление в окне свойств во время выполнения свойства домена. Вы по-прежнему можно сопоставить для декораторов текста.<br /><br /> **— Только для чтения** запрещает пользователям изменять свойство домена.<br /><br /> Доступ к программе в свойстве домена не влияет.|
|Измените имя, значок и видимость узлов в обозревателе моделей Доменного языка.|См. в разделе [Настройка обозревателя моделей](../modeling/customizing-the-model-explorer.md).|
|Включить копирования, вырезания и вставки|Задайте **включить копирование и вставку** свойство **редактор** узел в обозревателе DSL.|
|Ссылки на копирование и их цели, каждый раз, когда копируется элемент. Например скопируйте примечания, вложенные в элемент.|Задайте **распространение копирования** свойства роли источника (в виде линии в одной части доменная связь в схеме определения DSL).<br /><br /> Напишите код для переопределения ProcessOnCopy для достижения более сложных эффектов.<br /><br /> См. в разделе [Настройка функции копирования](../modeling/customizing-copy-behavior.md).|
|Удалять, Переподчинение и выполнить повторную компоновку связанных элементов, когда элемент удаляется.|Задайте **распространение удаления** значение роли связи. Для более сложных эффектов переопределить `ShouldVisitRelationship` и `ShouldVisitRolePlayer` методы в `MyDslDeleteClosure` класс, определенный в **файле DomainModel.cs**<br /><br /> См. в разделе [Настройка функции удаления](../modeling/customizing-deletion-behavior.md)|
|Сохранить макет фигуры и внешним видом на копирования и перемещения.|Добавить фигуры и соединители в скопированный `ElementGroupPrototype`. Является наиболее удобным способом для переопределения `ElementOperations.CreateElementGroupPrototype()`<br /><br /> См. в разделе [Настройка функции копирования](../modeling/customizing-copy-behavior.md).|
|Вставьте фигуры в выбранное место, например в текущее положение указателя.|Переопределить `ClipboardCommandSet.ProcessOnCopy()` использовать расположение — специальная версия `ElementOperations.Merge().` см. в разделе [Настройка поведения копирования](../modeling/customizing-copy-behavior.md).|
|Создайте дополнительные связи, при вставке|Переопределить ClipboardCommandSet.ProcessOnPasteCommand()|
|Включить перетаскивания из схемы, другие DSL и Windows элементов|См. практическое руководство по [ Добавление обработчика перетаскивания и вставки](../modeling/how-to-add-a-drag-and-drop-handler.md)|
|Разрешить фигуры или средство, чтобы перетащить дочерней фигуры, например, порт, как если бы оно было перетаскивать на родительский.|Определите директивы слияния элементов для целевого объекта класса, для пересылки перетаскиваемый объект к родительскому элементу. См. в разделе [Настройка создания и перемещения элементов](../modeling/customizing-element-creation-and-movement.md).|
|Разрешить фигуры или средство, чтобы перетащить фигуры и иметь дополнительные ссылки или объекты, созданные. Например, чтобы разрешить комментарий, быть перетащен на элемент, к которому это должны быть связаны.|Определить директивы слияния элементов для целевого класса домена и ссылки, будет создан. В сложных случаях можно добавить пользовательский код. См. в разделе [Настройка создания и перемещения элементов](../modeling/customizing-element-creation-and-movement.md).|
|Создание группы элементов с помощью одного средства. Например компонент фиксированный набор портов.|Переопределите метод инициализации панели элементов из файла ToolboxHelper.cs. Создайте элемент группы прототипа (EGP) содержащих элементы и их связей. См. в разделе [Настройка элементов и элементов](../modeling/customizing-tools-and-the-toolbox.md).<br /><br /> Включите основной и порт фигуры в EGP, или определить BoundsRules, чтобы изменить расположение фигур портов при создании экземпляра EGP. См. в разделе [BoundsRules ограничивает расположение и размер](../modeling/boundsrules-constrain-shape-location-and-size.md).|
|Используйте одно средство подключения для создания экземпляра несколько видов отношений.|Добавьте директивы подключения связи (LCD) построитель подключения, который вызывается средством. LCDs определить тип связи на основе типов из двух элементов. Чтобы облегчить эту зависят от состояния элементов, можно добавить пользовательский код. См. в разделе [Настройка элементов и элементов](../modeling/customizing-tools-and-the-toolbox.md).|
|Прикрепленные Сервис - пользователю можно дважды щелкнуть любой инструмент для создания многих формы или соединительные линии в последовательности.|В обозревателе DSL выберите `Editor` узла. В окне «Свойства» задайте **использует залипания элементов панели элементов**.|
|Определение команд меню|См. практическое руководство по [ Изменение стандартной команды меню](../modeling/how-to-modify-a-standard-menu-command-in-a-domain-specific-language.md)|
|Исключают из модели с помощью правил проверки|См. в разделе [проверка в доменных языках](../modeling/validation-in-a-domain-specific-language.md)|
|Создание кода, файлы конфигурации или документы из доменного языка.|[Создание кода из доменного языка](../modeling/generating-code-from-a-domain-specific-language.md)|
|Настройка сохранения модели в файл.|См. в разделе [Настройка хранилища файлов и XML-сериализации](../modeling/customizing-file-storage-and-xml-serialization.md)|
|Сохраните моделей баз данных или другого носителя.|Переопределить *ваш язык*DocData<br /><br /> См. в разделе [Настройка хранилища файлов и XML-сериализации](../modeling/customizing-file-storage-and-xml-serialization.md)|
|Интегрируйте несколько доменных языков, чтобы они работают как часть одного приложения.|См. в разделе [интеграция моделей с помощью Visual Studio Modelbus](../modeling/integrating-models-by-using-visual-studio-modelbus.md).|
|Разрешить вашего DSL, который необходимо расширить третьими лицами и контролировать расширение.|[Расширение доменного языка с помощью MEF](../modeling/extend-your-dsl-by-using-mef.md)<br /><br /> [Совместное использование классов в различных доменных языках с помощью библиотеки доменных языков](../modeling/sharing-classes-between-dsls-by-using-a-dsl-library.md)<br /><br /> [Определение политики блокировки для создания сегментов, доступных только для чтения](../modeling/defining-a-locking-policy-to-create-read-only-segments.md)|

## <a name="see-also"></a>См. также

- [Определение доменного языка](../modeling/how-to-define-a-domain-specific-language.md)
- [Написание кода для настройки доменного языка](../modeling/writing-code-to-customise-a-domain-specific-language.md)
- [SDK моделирования для Visual Studio — доменные языки](../modeling/modeling-sdk-for-visual-studio-domain-specific-languages.md)

[!INCLUDE[modeling_sdk_info](includes/modeling_sdk_info.md)]