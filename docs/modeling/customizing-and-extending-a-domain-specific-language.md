---
title: Настройка и расширение доменного языка
description: Узнайте, как пакет SDK для Visual Studio для моделирования и визуализации (VMSDK) предоставляет несколько уровней, с помощью которых можно определять средства моделирования.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- Domain-Specific Language Tools, creating solutions
author: JoshuaPartlow
ms.author: joshuapa
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 9cfa8a3cda3f6bb2f564efe745a11863cf4d0e8a
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99945309"
---
# <a name="customize-and-extend-a-domain-specific-language"></a>Настройка и расширение предметно-ориентированного языка

Пакет SDK для Visual Studio моделирования и визуализации (VMSDK) предоставляет несколько уровней, с которых можно определять средства моделирования:

1. Определение доменного языка (DSL) с помощью схемы определения DSL. Вы можете быстро создать DSL с нотацией схематическое, доступной для чтения формой XML и базовыми инструментами, необходимыми для создания кода и других артефактов. Дополнительные сведения см. [в разделе Определение языка Domain-Specific](../modeling/how-to-define-a-domain-specific-language.md).

2. Тонкая настройка DSL с помощью более сложных функций определения DSL. Например, можно добавить дополнительные ссылки, когда пользователь создает элемент. Эти методы в основном достигаются в определении DSL, и некоторые из них потребовали несколько строк программного кода.

3. Расширьте средства моделирования с помощью программного кода. VMSDK разработан специально для того, чтобы облегчить интеграцию расширений с кодом, который генерируется из определения DSL. Дополнительные сведения см. [в разделе Написание кода для настройки языка Domain-Specific](../modeling/writing-code-to-customise-a-domain-specific-language.md).

> [!NOTE]
> После обновления файла определений DSL не забудьте нажать кнопку **преобразовать все шаблоны** на панели инструментов **Обозреватель решений** перед повторной сборкой решения.

## <a name="article-reference"></a>Ссылки на статьи

|Для достижения этого результата|См. Этот раздел|
|-|-|
|Разрешает пользователю задавать свойства цвета и стиля фигуры.|Щелкните правой кнопкой мыши класс Shape или Connector, наведите указатель на пункт **Добавить видимый** и щелкните элемент.|
|Различные классы элементов модели выглядят аналогично на диаграмме и имеют общие свойства, такие как Начальная высота и ширина, цвет и подсказки.|Используйте наследование между фигурами или классами соединителей. Сопоставления между производными фигурами и производными доменными классами наследуют сведения о сопоставлении родителей.<br /><br /> Или сопоставьте разные доменные классы с одним и тем же классом Shape.|
|Класс элемента модели отображается различными контекстами фигур.|Сопоставьте более одного класса Shape с одним и тем же классом домена. При построении решения следуйте отчету об ошибке и предоставьте запрошенный код, чтобы решить, какую фигуру использовать.|
|Цвет фигуры или другие функции, такие как Font, обозначают текущее состояние.|См. раздел [Обновление фигур и соединителей для отражения модели](../modeling/updating-shapes-and-connectors-to-reflect-the-model.md).<br /><br /> Создайте правило, которое обновляет предоставляемые свойства. См. раздел [правила распространяют изменения в модели](../modeling/rules-propagate-changes-within-the-model.md).<br /><br /> Или используйте ОнассоЦиатедпропертичанжед () для обновления непредоставляемых функций, таких как стрелки или шрифты ссылок.|
|Значок на фигуре изменяется для обозначения состояния.|Установите видимость для сопоставления декораторов в окне сведения о DSL. Находит несколько декораторов изображений на одной и той же должности. См. раздел  [Обновление фигур и соединителей для отражения модели](../modeling/updating-shapes-and-connectors-to-reflect-the-model.md).<br /><br /> Или переопределите `ImageField.GetDisplayImage()` . См. пример в разделе <xref:Microsoft.VisualStudio.Modeling.Diagrams.ImageField> .|
|Задание фонового изображения для любой фигуры|Переопределите Инитиализеинстанцересаурцес (), чтобы добавить привязанный Имажефиелд.|
|Вложение фигур в любую глубину|Настройте рекурсивное дерево внедрения. Определите Баундсрулес для размещения фигур.|
|Присоединение соединителей в фиксированных точках на границе элемента.|Определите в схеме внедренные элементы терминала, представленные маленькими портами. Используйте Баундсрулес, чтобы исправить порты на месте. См. Пример схемы цепи в [пакете SDK для визуализации и моделирования](https://code.msdn.microsoft.com/Visualization-and-Modeling-313535db).|
|Текстовое поле отображает значение, полученное из других значений.|Сопоставьте декоратор текста с вычисляемым или пользовательским свойством домена хранилища. Дополнительные сведения см. в разделе [вычисляемые и настраиваемые свойства хранилища](../modeling/calculated-and-custom-storage-properties.md).|
|Распространение изменений между элементами модели или между фигурами|См. раздел [Проверка на Domain-Specific языке](../modeling/validation-in-a-domain-specific-language.md).|
|Распространите изменения на ресурсы, такие как другие расширения Visual Studio, за пределами магазина.|См. раздел [обработчики событий, распространяющие изменения за пределы модели](../modeling/event-handlers-propagate-changes-outside-the-model.md).|
|В окне свойств отображаются свойства связанного элемента.|Настройка пересылки свойств. См. раздел [Настройка окна свойств](../modeling/customizing-the-properties-window.md).|
|Категории свойств|Окно Свойства разделено на разделы, называемые категориями. Задайте **категорию** свойств домена. В одном разделе будут отображаться свойства с тем же именем категории. Можно также задать **категорию** роли отношений.|
|Управление доступом пользователей к свойствам домена|Для параметра **можно задать значение false, чтобы** запретить отображение свойства домена в окно свойств во время выполнения. Вы по-прежнему можете сопоставлять его с текстовыми декораторами.<br /><br /> **Только чтение пользовательского интерфейса** запрещает пользователям изменять свойство домена.<br /><br /> Доступ программы к свойству предметной области не затрагивается.|
|Измените имя, значок и видимость узлов в обозревателе моделей DSL.|См. раздел [Настройка обозревателя моделей](../modeling/customizing-the-model-explorer.md).|
|Включение копирования, вырезания и вставки|Задайте свойство **включить копирование вставки** в узле **Редактор** в обозревателе DSL.|
|Копировать ссылки ссылок и их целевые объекты при каждом копировании элемента. Например, скопируйте комментарии, прикрепленные к элементу.|Задайте свойство **распространяет копию** исходной роли (представленной линией с одной стороны связи домена на схеме определения DSL).<br /><br /> Напишите код для переопределения Процессонкопи, чтобы добиться более сложных эффектов.<br /><br /> См. раздел [Настройка поведения копирования](../modeling/customizing-copy-behavior.md).|
|Удаление, переподчинение или повторное связывание связанных элементов при удалении элемента.|Установите значение параметра **распространяет удаление** для роли отношений. Для более сложных эффектов Переопределите `ShouldVisitRelationship` `ShouldVisitRolePlayer` методы и в `MyDslDeleteClosure` классе, определенном в **DomainModel.CS**.|
|Сохранить макет фигуры и внешний вид при копировании и перетаскивании.|Добавьте фигуры и соединители в скопированные `ElementGroupPrototype` . Наиболее удобным методом переопределения является `ElementOperations.CreateElementGroupPrototype()`<br /><br /> См. раздел [Настройка поведения копирования](../modeling/customizing-copy-behavior.md).|
|Вставьте фигуры в выбранное место, например в текущее положение указателя.|Переопределение `ClipboardCommandSet.ProcessOnCopy()` для использования версии, зависящей от местоположения, `ElementOperations.Merge().` см. в разделе [Настройка поведения копирования](../modeling/customizing-copy-behavior.md).|
|Создать дополнительные ссылки при вставке|Переопределить Клипбоардкоммандсет. Процессонпастекомманд ()|
|Включение перетаскивания из этой диаграммы, других элементов DSL и Windows|См [. раздел как добавить обработчик перетаскивания.](../modeling/how-to-add-a-drag-and-drop-handler.md)|
|Позволяет перетаскивать форму или инструмент в дочернюю фигуру, например порт, как если бы они были перенесены на родительский объект.|Определите директиву слияния элементов в классе целевого объекта, чтобы переслать удаленный объект родительскому объекту. См. раздел [Настройка создания и перемещения элементов](../modeling/customizing-element-creation-and-movement.md).|
|Разрешить перетаскивание фигуры или инструмента на фигуру и создание дополнительных ссылок или объектов. Например, чтобы разрешить удаление комментария к элементу, с которым он должен быть связан.|Определите директиву слияния элементов в целевом классе домена и определите создаваемые ссылки. В сложных случаях можно добавить пользовательский код. См. раздел [Настройка создания и перемещения элементов](../modeling/customizing-element-creation-and-movement.md).|
|Создайте группу элементов с помощью одного инструмента. Например, компонент с фиксированным набором портов.|Переопределите метод инициализации панели элементов в ToolboxHelper.cs. Создайте прототип группы элементов (ЕГП), содержащий элементы и их связи. См. раздел [Настройка средств и панели элементов](../modeling/customizing-tools-and-the-toolbox.md).<br /><br /> Включите фигуры субъекта и порта в ЕГП или определите Баундсрулес, чтобы разместить фигуры портов при создании экземпляра ЕГП.|
|Используйте одно средство подключения для создания экземпляра нескольких типов связей.|Добавьте в построитель подключений (LCD) директивы Link Connect, которые вызываются средством. LCDs определяет тип связи от типов двух элементов. Чтобы это зависело от состояний элементов, можно добавить пользовательский код. См. раздел [Настройка средств и панели элементов](../modeling/customizing-tools-and-the-toolbox.md).|
|Средства закрепления — пользователь может дважды щелкнуть любой инструмент, чтобы создать несколько фигур или соединителей подряд.|В обозревателе DSL выберите `Editor` узел. В окно свойств задать **использует закрепленные элементы панели элементов**.|
|Определить команды меню|См [. раздел как изменить стандартную команду меню](../modeling/how-to-modify-a-standard-menu-command-in-a-domain-specific-language.md) .|
|Ограничение модели с помощью правил проверки|См. раздел [Проверка на Domain-Specific языке](../modeling/validation-in-a-domain-specific-language.md) .|
|Создание кода, файлов конфигурации или документов с помощью DSL.|[Создание кода из доменного языка](../modeling/generating-code-from-a-domain-specific-language.md)|
|Настройка способа сохранения моделей в файле.|См. раздел [Настройка хранилища файлов и XML-сериализации](../modeling/customizing-file-storage-and-xml-serialization.md) .|
|Сохранение моделей в базах данных или других носителях.|Переопределить *вашязык* DocData<br /><br /> См. раздел [Настройка хранилища файлов и XML-сериализации](../modeling/customizing-file-storage-and-xml-serialization.md) .|
|Интегрируйте несколько доменных служб, чтобы они работали как часть одного приложения.|См. раздел [Интеграция моделей с помощью Visual Studio ModelBus](../modeling/integrating-models-by-using-visual-studio-modelbus.md).|
|Разрешите, что ваш домен DSL должен быть расширен сторонними производителями, и контролируйте расширение.|[Расширение доменного языка с помощью MEF](../modeling/extend-your-dsl-by-using-mef.md)<br /><br /> [Совместное использование классов в различных доменных языках с помощью библиотеки доменных языков](../modeling/sharing-classes-between-dsls-by-using-a-dsl-library.md)<br /><br /> [Определение политики блокировки для создания сегментов, доступных только для чтения](../modeling/defining-a-locking-policy-to-create-read-only-segments.md)|

## <a name="see-also"></a>См. также раздел

- [Определение доменного языка](../modeling/how-to-define-a-domain-specific-language.md)
- [Написание кода для настройки языка Domain-Specific](../modeling/writing-code-to-customise-a-domain-specific-language.md)
- [SDK моделирования для Visual Studio — доменные языки](../modeling/modeling-sdk-for-visual-studio-domain-specific-languages.md)

[!INCLUDE[modeling_sdk_info](includes/modeling_sdk_info.md)]
