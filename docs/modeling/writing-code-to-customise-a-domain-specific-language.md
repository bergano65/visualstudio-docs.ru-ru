---
title: Настройка доменного языка
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- Domain-Specific Language, programming
author: gewarren
ms.author: gewarren
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 42cba18e3b02bb1bb4a8316f82c62ae50700ca8f
ms.sourcegitcommit: 21d667104199c2493accec20c2388cf674b195c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2019
ms.locfileid: "55955418"
---
# <a name="write-code-to-customize-a-domain-specific-language"></a>Написание специализированного кода в предметно-ориентированном языке

В этом разделе показано, как использовать пользовательский код для доступа к, изменения или создания модели в предметно ориентированного языка.

Существует несколько контекстов, в которых можно написать код, который работает с DSL.

-   **Пользовательские команды.** Можно создавать команды, что пользователи смогут вызвать щелчком правой кнопкой мыши на диаграмме и которой можно изменить модель. Дополнительные сведения см. в разделе [Как Добавление команды в контекстное меню](../modeling/how-to-add-a-command-to-the-shortcut-menu.md).

-   **Проверка.** Можно написать код, который проверяет, что модель находится в правильном состоянии. Дополнительные сведения см. в разделе [проверка в доменных языках](../modeling/validation-in-a-domain-specific-language.md).

-   **Переопределение поведения по умолчанию.** Вы можете изменить многие аспекты код, который создается на основе DslDefinition.dsl. Дополнительные сведения см. в разделе [переопределение и расширение созданных классов](../modeling/overriding-and-extending-the-generated-classes.md).

-   **Преобразование текста.** Можно создать текстовые шаблоны, содержащие код, который обращается к модели и создает текстовый файл, например, для которого создается код программы. Дополнительные сведения см. в разделе [создание кода из доменного языка](../modeling/generating-code-from-a-domain-specific-language.md).

-   **Другие расширения Visual Studio.** Можно написать отдельный расширения VSIX, чтения и изменения моделей. Дополнительные сведения см. в разделе [Как Открытие модели из файла в коде программы](../modeling/how-to-open-a-model-from-file-in-program-code.md)

Экземпляры классов, определенных вами в файле DslDefinition.dsl, хранятся в структуру данных, называемую *Store In-Memory* (IMS) или *Store*. Классы, которые вы определяете в DSL, всегда принимает Store в качестве аргумента в конструктор. Например, если доменный язык определяется класс с именем примера:

`Example element = new Example (theStore);`

Сохранение объектов в Store (а не просто как обычные объекты) дает несколько преимуществ.

-   **Транзакции**. Можно группировать связанные изменения в транзакцию:

     `using (Transaction t = store.TransactionManager.BeginTransaction("updates"))`

     `{`

     `// make several changes to Store elements here`

     `t.Commit();`

     `}`

     При возникновении исключения во время изменения, так, что последний Commit() не выполняются, Store сбрасываются в предыдущее состояние. Благодаря этому вы можете быть уверены, что ошибки не оставляйте модель в несогласованном состоянии. Дополнительные сведения см. в разделе [перехода и обновления модели в программном коде](../modeling/navigating-and-updating-a-model-in-program-code.md).

-   **Двухместные связи**. Если определить связь между двумя классами, экземпляры на обоих концах имеют свойство, которое выполняет переход к другой стороне. Оснований всегда синхронизируются. Например если определить связь parenthood с ролями, с именем родителям и детям, можно написать:

     `John.Children.Add(Mary)`

     Следующие выражения выполняются оба теперь:

     `John.Children.Contains(Mary)`

     `Mary.Parents.Contains(John)`

     Можно также получить тот же эффект, написав:

     `Mary.Parents.Add(John)`

     Дополнительные сведения см. в разделе [перехода и обновления модели в программном коде](../modeling/navigating-and-updating-a-model-in-program-code.md).

-   **Правила и события**. Можно определить правила, которые активируются, когда указанный изменений. Правила используются, например, чтобы поддерживать актуальность с элементами модели, которые они представляют фигуры на схеме. Дополнительные сведения см. в разделе [реагирование на события и распространение изменений](../modeling/responding-to-and-propagating-changes.md).

-   **Сериализация**. Store обеспечивает стандартный способ для сериализации объектов, содержащихся в нем в файл. Вы можете настроить правила для сериализации и десериализации. Дополнительные сведения см. в разделе [Настройка хранилища файлов и XML-сериализации](../modeling/customizing-file-storage-and-xml-serialization.md).

## <a name="see-also"></a>См. также

- [Настройка и расширение доменного языка](../modeling/customizing-and-extending-a-domain-specific-language.md)