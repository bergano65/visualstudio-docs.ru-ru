---
title: Практическое руководство по текстовым шаблонам
ms.date: 11/04/2016
ms.topic: conceptual
author: gewarren
ms.author: gewarren
manager: douge
ms.workload:
- multiple
ms.prod: visual-studio-dev15
ms.openlocfilehash: 7a29f9c8813950cda5907b7f0f96141d00d562fe
ms.sourcegitcommit: 37fb7075b0a65d2add3b137a5230767aa3266c74
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/02/2019
ms.locfileid: "53887767"
---
# <a name="how-to--with-text-templates"></a>Практическое руководство по текстовым шаблонам
Текстовые шаблоны в Visual Studio предоставляют удобный способ создания текста любого рода. Текстовые шаблоны можно использовать для создания текста во время выполнения как часть приложения, а также во время разработки для создания этих код проекта. Этот раздел содержит описание наиболее часто задаваемые «Практические советы...?» вопросы.

 В этом разделе несколько ответов, которым предшествует маркеры являются альтернативными предложениями.

 Общие сведения о текстовых шаблонах, в статье [создание кода и текстовые шаблоны T4](../modeling/code-generation-and-t4-text-templates.md).

## <a name="how-to-"></a>Инструкции...

### <a name="generate-part-of-my-application-code"></a>Создания частью код моего приложения
 У меня есть конфигурации или *модели* в файл или базу данных. Один или несколько частей кода зависят от этой модели.

-   Создайте несколько файлов кода на основе текстовых шаблонов. Дополнительные сведения см. в разделе [создание кода во время разработки с помощью текстовых шаблонов T4](../modeling/design-time-code-generation-by-using-t4-text-templates.md) и [Каков лучший способ приступить к написанию шаблон?](#starting).

### <a name="generate-files-at-run-time-passing-data-into-the-template"></a>Создание файлов во время выполнения, передача данных в шаблон
 Во время выполнения приложение создает текстовые файлы, например отчетов, которые представляют собой сочетание стандартного текста и данных. Я хочу избежать написания сотни `write` инструкций.

-   Добавьте текстовый шаблон времени выполнения в проект. Этот шаблон создает класс в коде, который можно создать и использовать для создания текста. Данные можно передать на него в параметрах конструктора. Дополнительные сведения см. в разделе [Создание текста во время выполнения с помощью текстовых шаблонов T4](../modeling/run-time-text-generation-with-t4-text-templates.md).

-   Если вы хотите создать на основе шаблонов, которые доступны только во время выполнения, можно использовать стандартные текстовые шаблоны. Если вы создаете расширения Visual Studio, можно вызывать службы текстовых шаблонов. Дополнительные сведения см. в разделе [вызов преобразования текста в расширении VS](../modeling/invoking-text-transformation-in-a-vs-extension.md). В других контекстах можно использовать модуль создания текстовых шаблонов. Дополнительные сведения см. в разделе <xref:Microsoft.VisualStudio.TextTemplating.Engine?displayProperty=fullName>.

     Используйте \<#@parameter#> директива для передачи параметров в эти шаблоны. Дополнительные сведения см. в разделе [директива Parameter T4](../modeling/t4-parameter-directive.md).

### <a name="read-another-project-file-from-a-template"></a>Чтение другого файла проекта из шаблона
 Для считывания файла из одного проекта Visual Studio используется как шаблон:

-   Вставьте строку `hostSpecific="true"` в директиву `<#@template#>`.

     В коде, используйте `this.Host.ResolvePath(filename)` получить полный путь к файлу.

### <a name="invoke-methods-from-a-template"></a>Вызывать методы на основе шаблона
 Если методы уже существует, например, в стандартной [!INCLUDE[dnprdnshort](../code-quality/includes/dnprdnshort_md.md)] классы:

- Используйте \<#@assembly#> директиву, чтобы загрузить сборку и использовать \<#@import#> для задания контекста пространства имен. Дополнительные сведения см. в разделе [директива Import T4](../modeling/t4-import-directive.md).

   Если вы часто использовать тот же набор сборки и директивы import, рекомендуется написать процессора директив. В каждом шаблоне можно вызывать процессор директив, который можно загрузить сборки и файлы модели и задать в контексте пространств имен. Дополнительные сведения см. в разделе [Создание пользовательских обработчиков текстовых шаблонов T4 директива](../modeling/creating-custom-t4-text-template-directive-processors.md).

  Если вы пишете методы самостоятельно:

- При создании среды выполнения текстового шаблона, напишите определение разделяемого класса, который имеет имя, совпадающее с именем в текстовом шаблоне времени выполнения. Добавьте дополнительные методы в этот класс.

- Записать блок управления возможностями класса `<#+ ... #>` в которой можно объявить, методы, свойства и закрытые классы. При компиляции текстовый шаблон, он преобразуется в класс. Стандартные управляющие блоки `<#...#>` текст преобразуются к одному методу и блоки возможностей класса вставляются как отдельные члены. Дополнительные сведения см. в разделе [управляющие блоки текстовых шаблонов](../modeling/text-template-control-blocks.md).

   Методы, определенные как возможности класса может также включать встроенные блоки текста.

   Рассмотрите возможность размещения возможности класса в отдельном файле, который вы можете `<#@include#>` в одной или нескольких файлов шаблонов.

- Создайте методы в отдельной сборке (библиотека классов) и вызывайте их из шаблона. Используйте `<#@assembly#>` директива для загрузки сборки, и `<#@import#>` для задания контекста пространства имен. Обратите внимание на то, что для перестроения сборки, а его отладка выполняется, может потребоваться остановить и перезапустить Visual Studio. Дополнительные сведения см. в разделе [директивы текстовых шаблонов T4](../modeling/t4-text-template-directives.md).

### <a name="generate-many-files-from-one-model-schema"></a>Создание нескольких файлов из одной схемы модели
 Если вы часто создаются файлы из моделей, которые имеют одинаковую схему XML или базы данных:

-   Возможность записи процессора директив. Это дает возможность заменять несколько инструкций сборки и операторов в каждом шаблоне с одной пользовательской директивы import. Процессор директив можно также загрузить и проанализировать файл модели. Дополнительные сведения см. в разделе [Создание пользовательских обработчиков текстовых шаблонов T4 директива](../modeling/creating-custom-t4-text-template-directive-processors.md).

### <a name="generate-files-from-a-complex-model"></a>Создание файлов из сложной модели

-   Рассмотрите возможность создания доменного языка (DSL) для представления модели. Это упрощает создание шаблонов, так как использовать типы и свойства, которые отражают имена элементов в модели. У вас нет синтаксический анализ файла или перемещения по узлам XML. Пример:

     `foreach (Book book in this.Library) { ... }`

     Дополнительные сведения см. в разделе [Приступая к работе с доменными языками](../modeling/getting-started-with-domain-specific-languages.md) и [создание кода из доменного языка](../modeling/generating-code-from-a-domain-specific-language.md).

### <a name="get-data-from-visual-studio"></a>Получение данных из Visual Studio
 Для использования служб, предоставляемых в Visual Studio набором `hostSpecific` атрибут и нагрузки `EnvDTE` сборки. Пример:

```csharp
<#@ template hostspecific="true" language="C#" #>
<#@ output extension=".txt" #>
<#@ assembly name="EnvDTE" #>
<#
  IServiceProvider serviceProvider = (IServiceProvider)this.Host;
  EnvDTE.DTE dte = (EnvDTE.DTE) serviceProvider.GetService(typeof(EnvDTE.DTE));
#>

Number of projects in this VS solution:  <#= dte.Solution.Projects.Count #>
```

### <a name="execute-text-templates-in-the-build-process"></a>Выполнение текстовых шаблонов в процессе сборки

-   Дополнительные сведения см. в разделе [создание кода в процессе построения](../modeling/code-generation-in-a-build-process.md).

## <a name="more-general-questions"></a>Более общие вопросы

### <a name="starting"></a> Что такое лучший способ приступить к написанию текстового шаблона

1.  Создайте конкретный пример созданного файла.

2.  Включить его в текстовый шаблон путем вставки `<#@template #>` директивы и директивы и кода, которые требуются для загрузки входного файла или модели.

3.  Последовательно замените части файла с выражением и блоков кода.

### <a name="what-is-a-model"></a>Что такое «модель»?

-   Входные данные, считываемые с помощью шаблона. Возможно, в файле или в базе данных. Он может быть XML, или рисунком Visio, доменный язык (DSL) или модели UML, или это может быть обычный текст. Он может быть распределены между несколькими файлами. Как правило, более чем один шаблон считывает одну модель.

     Термин «модели» подразумевается, что он представляет некоторые аспекты вашего бизнеса более непосредственно, чем программного кода или других файлов. Например она может представлять план коммуникационной сети, созданной программы будет контроль за.

### <a name="what-is-the-benefit-of-using-text-templates"></a>Что такое преимущество использования текстовых шаблонов
 Как правило создается несколько кода или других файлов из одной модели. Модель представляет требования более непосредственно, чем созданный код. Он пропускает сведения о реализации и записывается в виде требований, а не код. При изменении требований — для них действия - можно обновить модель проще и надежнее, чем различные части кода программы.

 Создание кода таким образом является ценным средством с точки зрения методов гибкой разработки.

### <a name="what-best-practices-are-there-for-text-templates"></a>Какие «рекомендации» есть для текстовых шаблонов?

-   Дополнительные сведения см. в разделе [рекомендации по текстовым шаблонам T4 записи](../modeling/guidelines-for-writing-t4-text-templates.md).

### <a name="what-is-t4"></a>Что такое «T4»?

-   Другое название возможностей текстовых шаблонов Visual Studio, описанные здесь. Предыдущая версия, который не был опубликован, был сокращенное обозначение «Преобразования текстового шаблона».
