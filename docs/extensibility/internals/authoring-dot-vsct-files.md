---
title: Разработка. Файлы Vsct | Документация Майкрософт
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- VSCT files, manual authoring
ms.assetid: e9f715dc-12b7-439b-bdf3-f3dc75e62f1c
author: gregvanl
ms.author: gregvanl
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: b780a426423b1d974bb4ab78ee586ca3e6b943ca
ms.sourcegitcommit: 2193323efc608118e0ce6f6b2ff532f158245d56
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/25/2019
ms.locfileid: "55039059"
---
# <a name="author-vsct-files"></a>Автор vsct-файлы
В этом документе показано, как создавать *.vsct* файл для добавления элементов меню, панелей инструментов и других элементов пользовательского интерфейса (UI) в среде разработки Visual Studio (IDE). Выполните следующие действия, при добавлении элементов пользовательского интерфейса для пакета Visual Studio (пакет VSPackage), который еще не содержит *.vsct* файла.  
  
 Для новых проектов рекомендуется использовать шаблон пакета Visual Studio, так как он создает *.vsct* файл, который, в зависимости от сделанного, уже имеет необходимые элементы для команды меню, окна инструментов или пользовательского редактора . Это значение можно изменить *.vsct* файла в соответствии с требованиями вашего VSPackage. Дополнительные сведения об изменении *.vsct* файл, см. в примерах в [расширить меню и команд](../../extensibility/extending-menus-and-commands.md).  
  
## <a name="author-the-file"></a>Создание файла  
 Автор *.vsct* файл этих этапов: Создать структуру файлов и ресурсов, объявлять элементы пользовательского интерфейса, поместите элементы пользовательского интерфейса в интегрированной среде разработки и добавить все специальные поведения.  
  
### <a name="file-structure"></a>Структура файла  
 Базовая структура *.vsct* файл [CommandTable](../../extensibility/commandtable-element.md) корневой элемент, содержащий [команды](../../extensibility/commands-element.md) элемент и [символы](../../extensibility/symbols-element.md) элемент.  
  
#### <a name="to-create-the-file-structure"></a>Для создания структуры файлов  
  
1.  Добавить *.vsct* файл в проект, выполнив действия, описанные в [как: Создание файла vsct](../../extensibility/internals/how-to-create-a-dot-vsct-file.md).  
  
2. Добавьте необходимые пространства имен для `CommandTable` элемента, как показано в следующем примере:  
  
    ```xml  
    <CommandTable xmlns="http://schemas.microsoft.com/VisualStudio/2005-10-18/CommandTable"   
        xmlns:xs="http://www.w3.org/2001/XMLSchema">  
  
    ```  
  
3.  В `CommandTable` элемента, добавьте `Commands` элемент для размещения всех пользовательских меню, панелей инструментов, группы команд и команд. Таким образом, можно загрузить свои элементы пользовательского интерфейса, `Commands` элемент должен иметь его `Package` атрибуту присвоено имя пакета.  
  
     После `Commands` элемента, добавьте `Symbols` элемент для определения идентификаторы GUID для пакета и имена и идентификаторы команд для элементов пользовательского интерфейса.  
  
### <a name="include-visual-studio-resources"></a>Включение ресурсов Visual Studio  
 Используйте [Extern](../../extensibility/extern-element.md) элемент доступ к файлам, которые определяют команды Visual Studio и меню, которые необходимо поместить элементы пользовательского интерфейса в интегрированной среде разработки. Если вы будете использовать команды, определенные вне пакета, используйте [UsedCommands](../../extensibility/usedcommands-element.md) элемент, чтобы сообщить Visual Studio.  
  
#### <a name="to-include-visual-studio-resources"></a>Необходимость включения ресурсов Visual Studio  
  
1. В верхней части `CommandTable` элемента, добавьте один `Extern` для каждого внешнего файла, ссылки и задать `href` атрибут к имени файла. Вы можете обратиться следующие файлы заголовков для доступа к ресурсам Visual Studio.  
  
   -   *Stdidcmd.h*: Определяет идентификаторы для всех команд, предоставляемых Visual Studio.  
  
   -   *Vsshlids.h*: Содержит идентификаторы команд для меню Visual Studio.  
  
2. Если пакет вызывает все команды, которые определены в Visual Studio или другими пакетами, добавить `UsedCommands` после элемента `Commands` элемент. Заполнить этот элемент с помощью [UsedCommand](../../extensibility/usedcommand-element.md) для каждой команды, то есть вызове не входит в пакет. Задайте `guid` и `id` атрибуты `UsedCommand` элементов для значения GUID и идентификатор команды для вызова. 

   Дополнительные сведения о том, как найти команды идентификаторы GUID и идентификаторы Visual Studio см. в разделе [идентификаторы GUID и идентификаторы Visual Studio команды](../../extensibility/internals/guids-and-ids-of-visual-studio-commands.md). Для вызова команды из других пакетов, используйте идентификатор GUID и идентификатор команды, как определено в *.vsct* файл для этих пакетов.
  
### <a name="declare-ui-elements"></a>Объявления элементов пользовательского интерфейса  
 Объявление всех новых элементов пользовательского интерфейса в `Symbols` раздел *.vsct* файла.  
  
#### <a name="to-declare-ui-elements"></a>Для объявления элементов пользовательского интерфейса  
  
1.  В `Symbols` элемента, добавьте три [GuidSymbol](../../extensibility/guidsymbol-element.md) элементов. Каждый `GuidSymbol` элемент имеет `name` атрибут и `value` атрибута. Задайте `name` таким образом, чтобы он отражает назначение элемента. `value` Атрибут принимает идентификатор GUID. (Создать GUID, на **средства** меню, выберите **создать GUID**, а затем выберите **формат реестра**.)  
  
     Первый `GuidSymbol` элемент представляет пакет и обычно не имеет дочерних элементов. Второй `GuidSymbol` элемент представляет команда значение и будет содержать все символы, которые определяют, в меню, группы и команды. Третий `GuidSymbol` элемент представляет хранилище образа и содержит символы для всех значков для вашей команды. Если у вас нет команд, значки, можно опустить третий `GuidSymbol` элемент.  
  
2.  В `GuidSymbol` элемент, который представляет набор команд, добавьте один или несколько [IDSymbol](../../extensibility/idsymbol-element.md) элементов. Каждый из них представляют меню, панели инструментов, группы или команды, которую вы добавляете к пользовательскому Интерфейсу.  
  
     Для каждого `IDSymbol` элемент, наборе `name` к имени будет использоваться для ссылки на соответствующее меню, группы или команды и затем задайте атрибут `value` элемента в шестнадцатеричное число, которое будет представлять ее идентификатору команды. Никакие два `IDSymbol` элементов, которые имеют тот же родительский элемент может иметь то же значение.  
  
3.  Если элементы пользовательского интерфейса требуют значки, добавьте `IDSymbol` элемент для каждого значка, чтобы `GuidSymbol` , представляющего хранилище образа.  
  
### <a name="put-ui-elements-in-the-ide"></a>Поместите элементы пользовательского интерфейса в интегрированной среде разработки  
 [Меню](../../extensibility/menus-element.md), [группы](../../extensibility/groups-element.md), и [кнопки](../../extensibility/buttons-element.md) элементов содержат определения для всех меню, группы и команды, которые определены в пакете. Поместите эти меню, группы и команды в Интегрированной среде разработки с помощью [родительского](../../extensibility/parent-element.md) элемент, который является частью определения элемента пользовательского интерфейса или с помощью [CommandPlacement](../../extensibility/commandplacement-element.md) определенный элемент, находящийся в другом.  
  
 Каждый `Menu`, `Group`, и `Button` элемент имеет `guid` атрибут и `id` атрибута. Всегда значение `guid` атрибута для сопоставления имени `GuidSymbol` , представляющий команду, а наборе `id` атрибут имени `IDSymbol` элемент, который представляет ваш меню, группы или команды в `Symbols`раздел.  
  
#### <a name="to-define-ui-elements"></a>Чтобы задать элементы пользовательского интерфейса  
  
1. При определении нового меню, подменю, контекстные меню или панели инструментов, добавить `Menus` элемент `Commands` элемент. Затем для каждого меню, который должен быть создан, добавьте [меню](../../extensibility/menu-element.md) элемент `Menus` элемент.  
  
    Задайте `guid` и `id` атрибуты `Menu` элемент, а затем задайте `type` атрибут к виду меню. Можно также установить `priority` установить относительное положение меню в родительской группе.  
  
   > [!NOTE]
   >  `priority` Атрибут неприменим к контекстные меню и панелей инструментов.  
  
2. Все команды в Интегрированной среде разработки Visual Studio должна быть размещена группы команд, которые являются непосредственными дочерними элементами меню и панелей инструментов. При добавлении нового меню или панели инструментов в интегрированную среду разработки, их должен содержать новые группы команд. Можно также добавлять группы команд в существующие меню и панелей инструментов, чтобы визуально можно сгруппировать вашей команды.  
  
    При добавлении новой группы команд, необходимо сначала создать `Groups` элемент, а затем добавьте к нему [группы](../../extensibility/group-element.md) элемент для каждой команды группы.  
  
    Задайте `guid` и `id` атрибуты каждого `Group` элемент, а затем задайте `priority` установить относительное положение группы на родительском меню. Дополнительные сведения см. в разделе [создание повторно используемых групп кнопок](../../extensibility/creating-reusable-groups-of-buttons.md).  
  
3. Если вы добавляете новые команды в интегрированную среду разработки, добавьте `Buttons` элемент `Commands` элемент. Затем для каждой команды, добавьте [кнопку](../../extensibility/button-element.md) элемент `Buttons` элемент.  
  
   1.  Задайте `guid` и `id` атрибуты каждого `Button` элемент, а затем задайте `type` атрибут к виду кнопку. Можно также установить `priority` установить относительное положение команды в родительской группе.  
  
       > [!NOTE]
       >  Используйте `type="button"` для стандартных команд меню и кнопок на панели инструментов.  
  
   2.  В `Button` элемента, добавьте [строки](../../extensibility/strings-element.md) элемент, содержащий [ButtonText](../../extensibility/buttontext-element.md) элемент и [CommandName](../../extensibility/commandname-element.md) элемент. `ButtonText` Элемент предоставляет текстовую метку для элемента меню или подсказки для кнопки панели инструментов. `CommandName` Элемент предоставляет имя команды также использовать в команде.  
  
   3.  Если команда будет отображаться значок, создайте [значок](../../extensibility/icon-element.md) элемент в `Button` и присвойте его `guid` и `id` атрибуты `Bitmap` элемент для значка.  
  
       > [!NOTE]
       >  Кнопки панели инструментов должен иметь значки.  
  
   Дополнительные сведения см. в разделе [команды MenuCommand и. OleMenuCommands](../../extensibility/menucommands-vs-olemenucommands.md).  
  
4. Если любой из команд требуют значки, добавьте [точечные рисунки](../../extensibility/bitmaps-element.md) элемент `Commands` элемент. Затем для каждого значка, добавьте [точечного рисунка](../../extensibility/bitmap-element.md) элемент `Bitmaps` элемент. Это определяет, где задается расположение ресурса точечного рисунка. Дополнительные сведения см. в разделе [добавление значков для команды меню](../../extensibility/adding-icons-to-menu-commands.md).  
  
   Можно положиться на структуру подчинения для правильного размещения большинство меню, группы и команды. Для наборов очень больших команд или когда меню, группы или команды должны появляться в нескольких местах, рекомендуется указывать размещения команд.  
  
#### <a name="to-rely-on-parenting-to-place-ui-elements-in-the-ide"></a>Полагаться на родительские связи для размещения элементов пользовательского интерфейса в интегрированной среде разработки  
  
1. Типичный подчинения создать `Parent` в каждом элементе `Menu`, `Group`, и `Command` элемент, который определен в пакете.  
  
    Цель `Parent` является элемент меню или группу, которая будет содержать меню, группы или команды.  
  
   1.  Задайте `guid` атрибут имени `GuidSymbol` элемент, который определяет набор команд. Если целевой элемент не является частью пакета, используйте идентификатор guid для этого набора команд, как определено в соответствующем *.vsct* файла.  
  
   2.  Задайте `id` атрибута для сопоставления `id` атрибут меню целевого объекта или группы. Пример меню и группы, которые предоставляются средой Visual Studio, см. в разделе [меню идентификаторы GUID и идентификаторы Visual Studio](../../extensibility/internals/guids-and-ids-of-visual-studio-menus.md) или [идентификаторы GUID и идентификаторы Visual Studio панель](../../extensibility/internals/guids-and-ids-of-visual-studio-toolbars.md).  
  
   При наличии большого числа элементов пользовательского интерфейса для размещения в интегрированной среде разработки, или если у вас есть элементы, которые должны отображаться в нескольких местах, определите их размещения в [CommandPlacements](../../extensibility/commandplacements-element.md) элемента, как показано в следующих шагах.  
  
#### <a name="to-use-command-placement-to-place-ui-elements-in-the-ide"></a>Для использования команд размещения для размещения элементов пользовательского интерфейса в интегрированной среде разработки  
  
1. После `Commands` элемента, добавьте `CommandPlacements` элемент.  
  
2. В `CommandPlacements` элемента, добавьте `CommandPlacement` элемент для каждого меню, группы или команду, чтобы поместить.  
  
    Каждый `CommandPlacement` элемент или `Parent` помещает элемент одного меню, группы или команды в одном месте интегрированной среды разработки. Элемент пользовательского интерфейса может иметь только один родительский элемент, но он может иметь несколько размещений команд. Для размещения элемента пользовательского интерфейса в нескольких местах, добавить `CommandPlacement` элемент для каждого расположения.  
  
3. Задайте `guid` и `id` атрибуты каждого `CommandPlacement` элемент размещения меню или группе, так же, как для обычного `Parent` элемент. Можно также задать `priority` установить относительное положение элемента пользовательского интерфейса.  
  
   Вы можете объединять, размещение с родительской и размещения команд. Однако для наборов очень больших команд, рекомендуется использовать только команды размещения.  
  
### <a name="add-specialized-behaviors"></a>Добавление специализированного поведения  
 Можно использовать [CommandFlag](../../extensibility/command-flag-element.md) элемент для изменения поведения меню и команд, например, чтобы изменить их внешний вид и видимость. Можно изменить с помощью команды отображается, когда [VisibilityConstraints](../../extensibility/visibilityconstraints-element.md) элемент, или добавить сочетания клавиш с помощью [сочетания клавиш](../../extensibility/keybindings-element.md) элемент. Некоторые виды меню и команды уже специализированные встроенных поведений.  
  
#### <a name="to-add-specialized-behaviors"></a>Добавление специализированного поведения  
  
1. Чтобы отобразить элемент пользовательского интерфейса только в определенных контекстах пользовательского интерфейса, например, при загрузке решения, используйте ограничения на видимость.  
  
   1.  После `Commands` элемента, добавьте `VisibilityConstraints` элемент.  
  
   2.  Для каждого элемента пользовательского интерфейса для ограничения, добавьте [VisibilityItem](../../extensibility/visibilityitem-element.md) элемент.  
  
   3.  Для каждого `VisibilityItem` элемент, наборе `guid` и `id` атрибуты в меню, группы, или команду и затем задайте `context` атрибут к контексту пользовательского интерфейса, необходимо, как определено в <xref:Microsoft.VisualStudio.Shell.Interop.UIContextGuids80> класса.   
  
2. Чтобы задать видимости и доступности элемента пользовательского интерфейса в коде, используйте один или несколько из следующих флагов команды:  
  
   -   `DefaultDisabled`
  
   -   `DefaultInvisible`
  
   -   `DynamicItemStart` 
  
   -   `DynamicVisibility`
  
   -   `NoShowOnMenuController`
  
   -   `NotInTBList`
  
   Дополнительные сведения см. в разделе [CommandFlag](../../extensibility/command-flag-element.md) элемент.  
  
3. Чтобы изменить, как отображается элемент, или динамически изменить его внешний вид, используйте один или несколько из следующих флагов команды:  
  
   -   `AlwaysCreate`  
  
   -   `CommandWellOnly`  
  
   -   `DefaultDocked`  
  
   -   `DontCache`  
  
   -   `DynamicItemStart`  
  
   -   `FixMenuController`  
  
   -   `IconAndText`  
  
   -   `Pict`  
  
   -   `StretchHorizontally`  
  
   -   `TextMenuUseButton`  
  
   -   `TextChanges`  
  
   -   `TextOnly`  
  
   Дополнительные сведения см. в разделе [CommandFlag](../../extensibility/command-flag-element.md) элемент.  
  
4. Чтобы изменить, как элемент реагирует при получении команды, используйте один или несколько из следующих флагов команды:  
  
   -   `AllowParams`  
  
   -   `CaseSensitive`  
  
   -   `CommandWellOnly`  
  
   -   `FilterKeys`  
  
   -   `NoAutoComplete`  
  
   -   `NoButtonCustomize`  
  
   -   `NoKeyCustomize`  
  
   -   `NoToolbarClose`  
  
   -   `PostExec`  
  
   -   `RouteToDocs`  
  
   -   `TextIsAnchorCommand`  
  
   Дополнительные сведения см. в разделе [CommandFlag](../../extensibility/command-flag-element.md) элемент.  
  
5. Чтобы присоединить меню зависит от сочетания клавиш меню или элемента меню, добавьте знак амперсанда (&) в `ButtonText` элемент меню или элемента меню. Символ, который за амперсанд является active сочетания клавиш, при открытом родительского меню.  
  
6. Чтобы присоединить независимый от меню сочетания клавиш для команды, используйте [сочетания клавиш](../../extensibility/keybindings-element.md) элемент. Дополнительные сведения см. в разделе [сочетание клавиш](../../extensibility/keybinding-element.md) элемент.  
  
7. Чтобы локализовать текст меню, используйте `LocCanonicalName` элемент. Дополнительные сведения см. в разделе [строки](../../extensibility/strings-element.md) элемент.  
  
   Некоторые типы меню и кнопки включения специализированного поведения. Ниже перечислены некоторые специализированные меню и типы кнопок. Для других типов, см. в разделе `types` атрибут описания в [меню](../../extensibility/menu-element.md), [кнопку](../../extensibility/button-element.md), и [со списком](../../extensibility/combo-element.md) элементов.  
  
   - Поле со списком:  
   Поле со списком имеет стрелку раскрывающегося списка, который может использоваться на панели инструментов. Чтобы добавить поля со списком в пользовательский интерфейс, создайте [Combos](../../extensibility/combos-element.md) элемент в `Commands` элемент. Затем добавьте `Combos` элемент `Combo` элемент для каждого поля со списком для добавления. `Combo` элементы имеют одинаковые атрибуты и дочерние узлы в качестве `Button` элементов и также имеют `DefaultWidth` и `idCommandList` атрибуты. `DefaultWidth` Атрибут задает ширину в пикселях и `idCommandList` атрибут идентификатор команды, который используется для заполнения поля со списком. 
  
   - Контроллер меню:  
   Контроллер меню — кнопка со стрелкой рядом с ним. Щелкнув стрелку Открытие списка. Чтобы добавить контроллер меню в пользовательский интерфейс, создайте `Menu` и присвойте его `type` атрибут `MenuController` или `MenuControllerLatched`в зависимости от нужное поведение. Чтобы заполнить контроллер меню, установите его родителем `Group` элемент. Контроллер меню будет отображаться все ее дочерние группы в раскрывающемся списке.  
  
## <a name="see-also"></a>См. также  
 [Расширение меню и команд](../../extensibility/extending-menus-and-commands.md)   
 [Visual Studio командные файлы table (.vsct)](../../extensibility/internals/visual-studio-command-table-dot-vsct-files.md)   
 [Справочник по схемам VSCT XML](../../extensibility/vsct-xml-schema-reference.md)